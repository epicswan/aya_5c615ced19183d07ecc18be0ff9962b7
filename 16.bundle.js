(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{636:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=h(i),l=h(r(539)),s=h(r(604)),c=h(r(35)),u=h(r(168)),d=h(r(149)),m=h(r(552)),p=h(r(637)),f=h(r(681));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g,b=c.default._Popup,y=c.default._loadScript,E=u.default.CancelToken,w=c.default._css,k=function(e){return console.log.bind(console,e)};c.default._store.getEnv().apiProd;r(638);var S=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_.call(r);var a=JSON.parse(JSON.stringify(r.props.schema)),i={},l={};e.autoAddUi&&(i={ratingWidget:p.default,captcha:O},l={recaptcha:{"ui:widget":"captcha","ui:options":{label:!1}},Note:{"ui:widget":"ratingWidget"},"ui:order":["Email","*"]},a.properties.Nom&&l["ui:order"].unshift("Nom"));var s=(r.props.blocks.find((function(e){return"media"===e.name}))||{item:null}).item,c="newsletter"===e.mep,u=c;e.addEmail&&(!localStorage.getItem("currentUser")||u||"edit"===e.mode?a.required.find((function(e){return"Email"===e}))||(a.required.push("Email"),a.properties.Email={type:"string",format:"email",title:"Email"}):(l["ui:order"]=l["ui:order"].filter((function(e){return"Email"!==e})),a.properties.Email&&(delete a.properties.Email,a.required=a.required.filter((function(e){return"Email"!==e})))));return r.state={schema:a,widgets:i,uiSchema:n({},r.props.uiSchema,l),error:null,item:s||null,bearer:{},isLoaded:!1,pathGet:r.props.url,pathSave:r.props.urlSave,cancelToken:null,keyForm:1,cta:(r.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta,mepRender:{full:function(e,t,n,a){return r.mepFull(!1,e,t,n,a)},"full-reverse":function(e,t,n,a){return r.mepFull(!0,e,t,n,a)},stack:function(e,t,n,a){return r.mepStack(!1,e,t,n,a)},"stack-reverse":function(e,t,n,a){return r.mepStack(!0,e,t,n,a)},newsletter:function(e,t,n,a){return r.mepNewsletter(e,t,n,a)},"only-map":function(e,t,n,a){return r.mepOnlyMap(e,n)}},pendingSend:!1,showSuccessMsg:!1,openedModal:!1},r.doValidation=r.doValidation.bind(r),r.refBtnSubmit=o.default.createRef(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"onAddressChange",value:function(e){var t="https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q="+encodeURI(e.target.value)+"&output=embed";this.setState({item:{src:t,address:e.target.value}}),this.props.onAction({action:"map_changed",params:this.state})}},{key:"postForm",value:function(e){var t=this,r=this.props,n=r.onSend,a=r.resourceId,i=r.idsChannels,o=i||[],l={data:e.formData,channels:o},s=(this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta;a&&(l.module_resource=a);var c={"Content-Type":"application/json"},d=localStorage.getItem("currentUser");d&&(c.Authorization="Bearer "+d),u.default.post(this.state.pathSave,l,{headers:c}).then((function(e){t.setState({pendingSend:!1,keyForm:t.state.keyForm+1,showSuccessMsg:!0,openedModal:!0},(function(){n(),!0===t.props.redirection&&(s.newOnglet?window.open(""+s.link,"_blank"):location.href=s.link)}))})).catch((function(e){console.log(e)}))}},{key:"doValidation",value:function(e){var t=this;console.log("good",e),this.setState({pendingSend:!0},(function(){t.postForm(e)}))}},{key:"fetchForm",value:function(){var e=this;this.state.uiSchema||u.default.get(this.state.pathGet,{cancelToken:new E((function(e){g=e}))}).then((function(t){e.setState({isLoaded:!0,schema:JSON.parse(t.data.fields)})}))}},{key:"componentDidMount",value:function(){var e=this;if(this.state.pathGet&&this.fetchForm(),"view"===this.props.mode){var t=this.state.cta;t&&(t.tpl="BtnBootstrapSubmit",t.onAction=function(t){e.refBtnSubmit.current&&e.refBtnSubmit.current.click()},y("https://www.google.com/recaptcha/api.js","js","recaptcha").then((function(){e.setState({cta:t})})))}}},{key:"componentWillMount",value:function(){console.log("props",this.props)}},{key:"componentWillUnmount",value:function(){g&&"function"==typeof g&&g()}},{key:"renderHiddenBtnSubmit",value:function(){return o.default.createElement("button",{ref:this.refBtnSubmit,type:"submit",className:"d-none"})}},{key:"renderBtnSubmit",value:function(e,t,r){var n=this.props,a=n.prefixCss,i=n.mode,l=n.onAction,s=this.state,c=s.cta,u=s.pendingSend;return r&&(c.class=c.class+" "+r),u?o.default.createElement("i",{className:"fas fa-spinner fa-pulse"}):o.default.createElement("div",{className:!1!==e?"mt-2":""},o.default.createElement(d.default,{prefixCss:a,mode:i,cta:c,style:t,onAction:l}))}},{key:"mepFull",value:function(e,t,r,a,i){var c=this,u=this.props,d=(u.mode,u.prefixCss),m=(u.onAction,this.state),p=m.schema,f=m.uiSchema,h=m.widgets;m.showErrorRecaptcha;return o.default.createElement("div",{key:"mepFull"},!e&&a&&this.renderMap(a),o.default.createElement(l.default,n({title:t},this.props),o.default.createElement("div",{className:w(d,"row")},o.default.createElement("div",{className:w(d,"col-12 col-md-12",e&&"order-2")},o.default.createElement("div",null,o.default.createElement(s.default,{schema:p,onError:k("errors"),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0,uiSchema:f,widgets:h,FieldTemplate:function(e){return o.default.createElement(N,n({useOnlyUiTitle:c.props.useOnlyUiTitle},e))}},this.renderHiddenBtnSubmit()),o.default.createElement("div",{className:"text-right"},this.renderBtnSubmit()))))),e&&this.renderMap(a))}},{key:"mepOnlyMap",value:function(e,t){var r={},a="mx-auto",i=n({},this.props);return this.props.ui.mapFullWdithScreen&&(r={marginLeft:"-15px",marginRight:"-15px"},i.containerCss="container-fluid",a=""),o.default.createElement(l.default,n({key:"mepOnlyMap",title:e},i),o.default.createElement("div",{className:a,style:r},this.renderMap(t,null,{minHeight:"500px",border:"0px",width:"100%"})))}},{key:"mepNewsletter",value:function(e){var t=this,r=this.props,a=(r.mode,r.prefixCss,r.onAction,this.state),i=a.schema,c=a.uiSchema,u=a.widgets,d=a.keyForm,m=n({Email:{classNames:"","ui:placeholder":"Entrez votre adresse email"}},c);return o.default.createElement(l.default,n({key:"mepNewsletter-"+d,title:e},this.props),o.default.createElement("div",{style:{maxWidth:"500px"},className:"mx-auto"},o.default.createElement("div",{className:"input-group mt-4"},o.default.createElement(s.default,{className:"rjsf form-newsletter",schema:i,uiSchema:m,onError:k("errors"),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0,widgets:u,FieldTemplate:function(e){var r=e.id,n=e.classNames,a=(e.label,e.help,e.required,e.rawErrors),i=(e.description,e.errors,e.children);return o.default.createElement("div",{className:n+" "},i,a&&a.length>0&&o.default.createElement(x,{errors:a}),"root_Email"===r&&o.default.createElement("div",{className:"text-center"},t.renderBtnSubmit(!0,null,"btn-block")))}},this.renderHiddenBtnSubmit()))))}},{key:"mepStack",value:function(e,t,r,a,i){var c,u=this,d=this.props,m=(d.mode,d.prefixCss),p=(d.onAction,d.ui),f=this.state,h=f.schema,g=f.uiSchema,b=f.widgets,y=(f.showErrorRecaptcha,a&&a.src&&p.map);return o.default.createElement(l.default,n({key:"mepStack",title:t},this.props),o.default.createElement("div",{className:w(m,"row")},o.default.createElement("div",{className:w(m,"col-12","col-md-6",!y&&"mx-auto",e&&"order-2")},o.default.createElement("div",null,o.default.createElement(s.default,(v(c={schema:h,uiSchema:g,onError:k("errors"),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0},"uiSchema",g),v(c,"widgets",b),v(c,"FieldTemplate",(function(e){return o.default.createElement(N,n({useOnlyUiTitle:u.props.useOnlyUiTitle},e))})),c),this.renderHiddenBtnSubmit()),o.default.createElement("div",{className:"text-right"},this.renderBtnSubmit()))),y&&o.default.createElement("div",{className:w(m,"col-12 col-md-6",e&&"order-1")},this.renderMap(a))))}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null},n=this.state.cta;if(r&&n&&r.cta.link!==n.link){var a=n;a.link=r.cta.link,this.setState({cta:a})}}},{key:"render",value:function(){var e=this.props,t=e.mep,r=e.blocks,n=(e.prefixCss,e.mode),a=e.onAction,i=e.ui,l=(e.onSend,this.state),s=l.mepRender,c=l.item,u=l.showSuccessMsg,d=l.openedModal,p=(r.find((function(e){return"title"===e.name}))||{title:null}).title,f=(r.find((function(e){return"description"===e.name}))||{description:null}).description,h=(r.find((function(e){return"cta"===e.name}))||{cta:null}).cta,v=(r.find((function(e){return"msgSuccess"===e.name}))||{msgSuccess:{txt:'<p style="text-align:center;">Votre message a bien été envoyé. Nous y répondrons dès que possible.</p>'}}).msgSuccess;return[s[t]&&s[t](p,f,i.map&&c,h)||s["stack-reverse"](p,f,i.map&&c,h),o.default.createElement("div",{className:u?"":"d-none",key:"success-msg"},o.default.createElement(b,{contentStyle:{color:"initial",margin:"5rem auto auto auto",background:"none",padding:0,border:0},open:d,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header border-0 pb-0"},o.default.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},o.default.createElement("span",{"aria-hidden":"true"},"×"))),o.default.createElement("div",{className:"modal-body pt-0"},o.default.createElement("div",null,"edit"===n&&o.default.createElement("div",{"data-name-block":"block-success-msg",style:{display:"inline-flex",width:"100%"}},o.default.createElement(m.default,{content:v.txt,block:{name:"msgSuccess",index:0,key:"msgSuccess"},fordiddenKeyboard:["split-block"],onAction:function(e){a({action:"evt_draft",params:e})}})),"view"===n&&o.default.createElement("div",{dangerouslySetInnerHTML:{__html:v.txt}}))))))]}}]),t}(i.Component),_=function(){var e=this;this.closeModal=function(){e.setState({showSuccessMsg:!1,openedModal:!1}),e.props.onCloseModal()},this.renderMap=function(t,r,n){var a=e.props,i=a.ui,l=a.onAction,s=(a.mode,n||{width:"100%",height:(r||300)+"px",border:"0px"});return i.map&&t.src&&o.default.createElement("div",null,o.default.createElement("div",{style:s,onClick:function(){l({action:"click_iframe"})}},o.default.createElement("iframe",{style:s,className:"embed-responsive-item d-block",src:t.src,allowtransparency:"true",allowFullScreen:!0})))}};S.defaultProps={autoAddUi:!0,resourceId:null,addEmail:!0,uiSchema:{Message:{"ui:widget":"textarea"}},url:null,urlSave:null,ui:{map:!0,mapFullWdithScreen:!1},schema:{title:"",description:"",type:"object",required:["Email","Message","Nom","Note"],properties:{Nom:{type:"string",title:"Nom",minLength:2},Email:{type:"string",format:"email",title:"Email"},Note:{type:"number",enum:[1,2,3,4,5],title:"Note"},Message:{type:"string",title:"Message",minLength:8}}},onCloseModal:function(){},onAction:function(){},prefixCss:"",mep:"stack-reverse",mode:"view",sectionCss:"",containerCss:"container",bg:{class:"bg-white",img:{path:"https://images.unsplash.com/photo-1509624776920-0fac24a9dfda?ixlib=rb-0.3.5&s=dd42a6d…&auto=format&fit=crop&w=1350&q=80",class:"img-fluid"}},redirection:!1,blocks:[{name:"cta",cta:{txt:"Nous contacter",css:"",class:"btn-primary",link:"/faire-un-site-gratuitement.php",tpl:"BtnBootstrap",visible:!0,icon:{active:!0,css:"far fa-envelope"}}},{name:"title",title:{txt:"<h1>Demande d'informations</h1>",class:"",visible:!0}},{name:"description",description:{txt:"Pour toutes vos questions, veuillez remplir le formulaire ci-dessous"}},{name:"media",item:{src:"https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q=paris&output=embed",address:"paris",tpl:"iframe",visible:!0}}],useOnlyUiTitle:!1,onSend:function(){}};var N=function(e){var t=e.id,r=e.classNames,n=e.label,a=e.help,i=e.required,l=e.rawErrors,s=e.description,c=(e.errors,e.children),u=e.displayLabel,d=e.hidden,m=e.useOnlyUiTitle?e.uiSchema["ui:title"]:n;return o.default.createElement("div",{className:r+" "},u&&!d&&o.default.createElement("label",{className:"control-label",htmlFor:t},m,m&&i?"*":null),s,c,l&&l.length>0&&o.default.createElement(x,{errors:l}),o.default.createElement("small",{className:"form-text text-muted"}," ",a))},x=function(e){var t=e.errors;return o.default.createElement("ul",{className:"list-unstyled mt-2"},t.map((function(e,t){return o.default.createElement("li",{key:t,className:"text-danger"}," ",o.default.createElement(C,{msg:e})," ")})))},O=function(e){return o.default.createElement(f.default,{key:"captcha",sitekey:"6LcAZCkUAAAAAJ2XQcVz6M2qgiwypmqhT501lFvv",render:"explicit",hl:"fr",verifyCallback:function(t){(0,e.onChange)(t)},expiredCallback:function(t){(0,e.onChange)(t)}})},M={"is a required property":"Veuillez remplir ce champ",'should match format "email"':"Email non valide","should NOT be shorter than _X_ characters":"Veuillez allonger ce texte pour qu'il comporte au moins _X_ caractères","should NOT be longer than _X_ characters":"Veuillez réduire ce texte à _X_ caractères maximun"},C=function(e){var t=e.msg,r=t,n=r.match(/\d+/),a=0;return n&&(r=r.replace(n[0],"_X_"),a=n[0]),M[r]?M[r].replace("_X_",a):t};t.default=S},637:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=(n=i)&&n.__esModule?n:{default:n};var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleMouseLeave=function(){r.setState({ratingPreview:0})},r.handleMouseOver=function(e){r.setState({ratingPreview:e+1})},r.handleClick=function(e){var t=r.props.onChange;r.setState({rating:e+1,ratingPreview:0},(function(){t(e+1)}))},r.state={stars:new Array(5).fill(5),rating:0,ratingPreview:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.state,r=t.stars,n=t.rating,a=t.ratingPreview;return o.default.createElement("span",{className:"mr-2 wrapper-stars",onMouseLeave:function(){return e.handleMouseLeave()}},r.map((function(t,r){return n&&r<n||a&&r<a?o.default.createElement("i",{key:r,className:"fas fa-star fa-2x cursor-pt",onMouseOver:function(){return e.handleMouseOver(r)},onClick:function(){return e.handleClick(r)}}):o.default.createElement("i",{key:r,className:"far fa-star fa-2x cursor-pt",onMouseOver:function(){return e.handleMouseOver(r)}})})))}}]),t}(i.PureComponent);t.default=l},638:function(e,t,r){var n=r(639);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(96)(n,a);n.locals&&(e.exports=n.locals)},639:function(e,t,r){(e.exports=r(95)(!1)).push([e.i,".rjsf #root_rgpd {\r\n  margin-right: 6px;\r\n}\r\n\r\n.radius-border-input-email input {\r\n  border-bottom-right-radius: 0;\r\n  border-top-right-radius: 0;\r\n}\r\n\r\n.rjsf.form-newsletter {\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n}\r\n\r\ndiv.field-error.has-error.has-danger .form-control {\r\n  border-color: var(--danger);\r\n  border-width: 1px;\r\n}\r\n",""])},680:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(636),i=(n=a)&&n.__esModule?n:{default:n};t.default=i.default}}]);