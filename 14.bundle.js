(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),s=k(l),c=k(n(539)),u=k(n(604)),d=k(n(35)),p=k(n(168)),f=k(n(149)),m=k(n(552)),h=k(n(1371)),b=k(n(681)),v=k(n(1372)),y=n(1373),g=k(n(21)),w=k(n(913)),x=k(n(1377)),E=k(n(914));function k(e){return e&&e.__esModule?e:{default:e}}function S(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var O,F=d.default._Popup,C=d.default._loadScript,_=d.default._debounce,P=d.default._store.getEnv(),I=P.scheme,N=P.domain,T=P.subdomain,U=P.apiProd,j=P.domainApi,D=(I+"://"+(U?T:"form")+"."+(U?j:N)).replace("__API__","form"),A=p.default.CancelToken,M=d.default._css,L=d.default._reactSortableHoc,R=L.SortableContainer,H=L.SortableItem,q=L.arrayMove,J=(L.sortableHandle,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));V.call(n);var a=JSON.parse(JSON.stringify(n.props.schema)),o={},i={};e.autoAddUi&&(o={ratingWidget:h.default,captcha:W},i={recaptcha:{"ui:widget":"captcha","ui:options":{label:!1}},Note:{"ui:widget":"ratingWidget"},"ui:order":["Email","*"]},a.properties.Nom&&i["ui:order"].unshift("Nom"));var l=(n.props.blocks.find((function(e){return"media"===e.name}))||{item:null}).item;e.addEmail&&(localStorage.getItem("currentUser")&&"edit"!==e.mode?(i["ui:order"]=i["ui:order"].filter((function(e){return"Email"!==e})),a.properties.Email&&(delete a.properties.Email,a.required=a.required.filter((function(e){return"Email"!==e})))):a.required.find((function(e){return"Email"===e}))||(a.required.push("Email"),a.properties.Email={type:"string",format:"email",title:"Email"}));return n.state={schema:a,widgets:o,uiSchema:r({},n.props.uiSchema,i),error:null,item:l||null,bearer:{},isLoaded:!1,pathGet:D+"/public/formulaire/"+n.props.idForm,pathSave:D+"/public/reponse/"+n.props.idForm,cancelToken:null,keyForm:1,cta:(n.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta,mepRender:{full:function(e,t,a,o){return n.mepFull(!1,e,t,a,o)},"full-reverse":function(e,t,a,o){return n.mepFull(!0,e,t,a,o)},stack:function(e,t,a,o){return n.mepStack(!1,e,t,a,o)},"stack-reverse":function(e,t,a,o){return n.mepStack(!0,e,t,a,o)},"only-map":function(e,t,a,o){return n.mepOnlyMap(e,a)}},pendingSend:!1,showSuccessMsg:!1,openedModal:!1,loadingFailed:!0,forms:[],formItems:n.initFormItems(n.props.formItems),idForm:1,idFormEdit:1,popoverIsOpen:!1},n.doValidation=n.doValidation.bind(n),n.refBtnSubmit=s.default.createRef(),n.onUpdateField=n.onUpdateField.bind(n),n.onAddFormItem=n.onAddFormItem.bind(n),n.onDeleteFormItem=n.onDeleteFormItem.bind(n),n.exportData=n.exportData.bind(n),n.onPositionUpFormItem=n.onPositionUpFormItem.bind(n),n.onPositionDownFormItem=n.onPositionDownFormItem.bind(n),n.onAddOptionFormItem=n.onAddOptionFormItem.bind(n),n.onReplaceFormItem=n.onReplaceFormItem.bind(n),n.initHelpText=n.initHelpText.bind(n),n.onUpdateOpt=n.onUpdateOpt.bind(n),n.onSortEnd=n.onSortEnd.bind(n),n.requestState=n.requestState.bind(n),n.traverse=n.traverse.bind(n),n.cleanStrings=n.cleanStrings.bind(n),n.cleanFormItemsInState=n.cleanFormItemsInState.bind(n),n.refPopup=s.default.createRef(),n.limitations={optionsByField:{max:15},fieldsByForm:{max:"FREE"!==window.__PLAN_SITE?20:10}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"exportData",value:function(){var e=[];for(var t in this.state.formItems){var n=this.state.formItems[t],a={label:n.label,required:n.required,name:n.name,helpText:n.helpText,placeholder:n.placeholder,className:n.className,options:n.options,multiple:n.multiple,type:n.type};e.push(a)}o=e,r=new FormData,Object.keys(o).forEach((function(e){return r.append(e,o[e])}));var o,r,i=this,l=this.state.bearer;p.default.post("http://form.wifeo.org/form/create",{items:e},{headers:{Authorization:l,"Content-Type":"application/json"}}).then((function(e){console.log(e),i.getFormulaires()})).catch((function(e){console.log(e)}))}},{key:"onAddressChange",value:function(e){var t="https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q="+encodeURI(e.target.value)+"&output=embed";this.setState({item:{src:t,address:e.target.value}}),this.props.onAction({action:"map_changed",params:this.state})}},{key:"postForm",value:function(e){var t=this,n=this.props,a=n.onSend,o=n.resourceId,r=n.idsChannels,i=r||[],l={data:e.formData,channels:i},s=(this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta;o&&(l.module_resource=o);var c={"Content-Type":"application/json"},u=localStorage.getItem("currentUser");u&&(c.Authorization="Bearer "+u),p.default.post(this.state.pathSave,l,{headers:c}).then((function(e){t.setState({pendingSend:!1,keyForm:t.state.keyForm+1,showSuccessMsg:!0,openedModal:!0},(function(){a(),!0===t.props.redirection&&(s.newOnglet?window.open(""+s.link,"_blank"):location.href=s.link)}))})).catch((function(e){console.log(e)}))}},{key:"doValidation",value:function(e){var t=this;this.setState({pendingSend:!0},(function(){t.postForm(e)}))}},{key:"fetchForm",value:function(){var e=this;p.default.get(this.state.pathGet+"?no_cache=1",{cancelToken:new A((function(e){O=e}))}).then((function(t){void 0!==JSON.parse(t.data.fields).schema&&g.default.unstable_batchedUpdates((function(){e.setState({isLoaded:!0,loadingFailed:!1,schema:JSON.parse(t.data.fields).schema,formItems:JSON.parse(t.data.fields).formItems,uiSchema:JSON.parse(t.data.fields).uiSchema})}))})).catch((function(t){e.setState({isLoaded:!0,loadingFailed:!0})}))}},{key:"componentDidMount",value:function(){var e=this;if(this.state.pathGet?this.props.integrated?this.props.staticForm?this.setState({isLoaded:!0,loadingFailed:!1,schema:this.props.staticForm.schema,formItems:this.props.staticForm.formItems,uiSchema:this.props.staticForm.uiSchema}):this.setState({loadingFailed:!0}):this.fetchForm():this.setState({loadingFailed:!0}),"view"===this.props.mode&&!this.props.externalCta){var t=this.state.cta;t&&(t.tpl="BtnBootstrapSubmit",t.onAction=function(t){e.refBtnSubmit.current&&e.refBtnSubmit.current.click()},C("https://www.google.com/recaptcha/api.js","js","recaptcha").then((function(){e.setState({cta:t})})))}}},{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){O&&"function"==typeof O&&O()}},{key:"renderHiddenBtnSubmit",value:function(){return s.default.createElement("button",{ref:this.refBtnSubmit,type:"submit",className:"d-none"})}},{key:"renderBtnSubmit",value:function(e,t,n){var a=this.props,o=a.prefixCss,r=a.mode,i=a.onAction,l=this.state,c=l.cta,u=l.pendingSend;return n&&(c.class=c.class+" "+n),u?s.default.createElement("i",{className:"fas fa-spinner fa-pulse"}):s.default.createElement("div",{className:!1!==e?"mt-2":""},s.default.createElement(f.default,{prefixCss:o,mode:r,cta:c,style:t,onAction:i}))}},{key:"requestState",value:function(){var e=this.state,t=(e.schema,e.uiSchema,e.widgets,e.showErrorRecaptcha,e.loadingFailed),n=e.isLoaded;return s.default.createElement("div",null,n&&t&&s.default.createElement("div",{align:"center"},s.default.createElement("i",{className:"fa fa-times"}),s.default.createElement("span",null,"   Formulaire introuvable ou supprimé...")),t&&!n&&s.default.createElement("div",{align:"center"},s.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-fw"}),s.default.createElement("span",null,"  Chargement en cours...")))}},{key:"mepFull",value:function(e,t,n,a,o){var i=this.props,l=(i.mode,i.prefixCss),u=(i.onAction,i.btnAlign),d=this.state,p=(d.schema,d.uiSchema,d.widgets,d.showErrorRecaptcha,d.loadingFailed);return s.default.createElement("div",{key:"mepFull"},!e&&a&&this.renderMap(a),s.default.createElement(c.default,r({title:t},this.props),s.default.createElement("div",{className:M(l,"row")},s.default.createElement("div",{className:M(l,"col-12 col-md-12",e&&"order-2")},s.default.createElement("div",null,this.renderForm(),!p&&s.default.createElement("div",{className:"text-right"},s.default.createElement(v.default,{cta:o,btnAlign:u})),this.requestState())))),e&&this.renderMap(a))}},{key:"renderForm",value:function(){var e,t=this,n=this.props,a=n.ui,o=n.mode,i=this.state,l=i.schema,c=i.uiSchema,d=i.widgets,p=(i.showErrorRecaptcha,i.formItems),f=i.idFormEdit,m=(i.idForm,i.popoverIsOpen),h=(i.showSuccessMsg,i.openedModal,i.cta,i.isLoaded,i.loadingFailed),b=this.onAddFormItem,v=this.onDeleteFormItem,y=(this.exportData,this.onPositionUpFormItem),g=this.onPositionDownFormItem,E=this.onAddOptionFormItem,k=this.onReplaceFormItem,S=this.onUpdateField,O=this.initHelpText,C=this.onUpdateOpt;return"edit"===o&&!h&&s.default.createElement("div",{className:"wifeo-form-custom width-form-custom"},s.default.createElement("form",{className:"form-inline"},s.default.createElement(R,{axis:"xy",useDragHandle:!0,distance:0,onSortEnd:this.onSortEnd},s.default.createElement("div",{className:"we-w-100"},p.map((function(e,t){return s.default.createElement(H,{key:"form-edit-"+f+"-ctrl-sortable-"+t,index:t,sortIndex:t},s.default.createElement("div",{className:"we-w-100 we-text-center we-mb-3",key:"form-edit-"+f+"-ctrl-"+t},s.default.createElement(x.default,{item:e,formItems:p,index:t,onDelete:v,onAddOption:E,onPositionDown:g,onPositionUp:y,onReplace:k,onUpdateField:S,initHelpText:O,onUpdateOpt:C,data:data,ui:a})))}))))),s.default.createElement("div",{className:"we-text-center we-my-5"},s.default.createElement(F,{ref:this.refPopup,open:m,contentStyle:{color:"initial",width:"230px",zIndex:"1015"},overlayStyle:{zIndex:"1"},trigger:s.default.createElement("button",{className:"we-btn we-btn-secondary we-btn-sm"},s.default.createElement("i",{className:"fas fa-plus-circle"})," Ajouter un élément"),position:["bottom center","top center","left center","right center"],mouseLeaveDelay:250,closeOnDocumentClick:!0,onClose:function(){return t.togglePopover(!1)},onOpen:function(){return t.togglePopover(!0)}},s.default.createElement("div",{className:"we-text-left"},s.default.createElement(w.default,{inputs:data,form:p,onAddFormItem:b})))))||!h&&s.default.createElement(u.default,{schema:l,onError:(e="errors",console.log.bind(console,e)),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0,uiSchema:c,widgets:d,FieldTemplate:function(e){return s.default.createElement(B,r({useOnlyUiTitle:t.props.useOnlyUiTitle},e))}},this.renderHiddenBtnSubmit())}},{key:"mepOnlyMap",value:function(e,t){var n={},a="mx-auto",o=r({},this.props);return this.props.ui.mapFullWdithScreen&&(n={marginLeft:"-15px",marginRight:"-15px"},o.containerCss="container-fluid",a=""),s.default.createElement(c.default,r({key:"mepOnlyMap",title:e},o),s.default.createElement("div",{className:a,style:n},this.renderMap(t,null,{minHeight:"500px",border:"0px",width:"100%"})))}},{key:"initFormItems",value:function(e){var t=[];if(this.props.addEmail){if(!e.find((function(e){return"Email"===e.name}))){t=[].concat(S(e),[{type:"email",labelMenu:"Email",label:"Email",className:"form-control",name:"Email",required:!0,placeholder:"email@example.com",helpText:"",minLength:1,maxLength:75}])}}else t=[].concat(S(e));return t}},{key:"onAddFormItem",value:function(e){var t=e;if(t.name=t.type+"_"+(0,y.v4)(),this.state.formItems.length>=this.limitations.fieldsByForm.max)alert("Vous ne pouvez pas ajouter plus d'élément pour ce formulaire");else{var n=[].concat(S(this.state.formItems),[t]);this.setState({formItems:n,popoverIsOpen:!1,idForm:this.state.idForm+1})}}},{key:"onReplaceFormItem",value:function(e,t){var n=Object.assign({},e);n.name=n.type+"_"+(0,y.v4)();var a=[].concat(S(this.state.formItems)),o=a.findIndex((function(e){return e.name==t.name}));a[o]=n,this.setState({formItems:a,popoverIsOpen:!1,idForm:this.state.idForm+1})}},{key:"onUpdateField",value:function(e,t){var n=this.state,a=n.idForm,o=n.idFormEdit,r=[].concat(S(this.state.formItems)),i=r.findIndex((function(t){return t.name==e.name})),l=r[i];r[i]=e;var s=e.label!==l.label,c=e.placeholder!==l.placeholder,u=e.helpText&&e.helpText!==l.helpText;s||c||u?this.setState({formItems:r,idForm:a+1},(function(){"function"==typeof t&&t()})):this.setState({formItems:r,idForm:a+1,idFormEdit:o+1},(function(){"function"==typeof t&&t()}))}},{key:"initHelpText",value:function(e){var t=this;if(!e.helpText){var n=r({},e);n.helpText="Texte d'aide",this.onUpdateField(n,(function(){t.setState({idForm:t.state.idForm+1,idFormEdit:t.state.idFormEdit+1})}))}}},{key:"onDeleteFormItem",value:function(e){var t=[].concat(S(this.state.formItems));for(var n in t)t[n].name===e&&t.splice(n,1);this.setState({formItems:t,idForm:this.state.idForm+1})}},{key:"onAddOptionFormItem",value:function(e,t){var n=[].concat(S(this.state.formItems)),a=n.findIndex((function(t){return t.name==e.name})),o=r({},e);o.options.length>=this.limitations.optionsByField.max?alert("Vous ne pouvez pas ajouter plus d'élément pour ce champ"):(o.options.push({label:"Option sans titre",value:"option_"+(0,y.v4)()}),n[a]=e,this.setState({formItems:n,idForm:this.state.idForm+1,idFormEdit:this.state.idFormEdit+1}))}},{key:"onPositionDownFormItem",value:function(e,t){var n=[].concat(S(this.state.formItems)),a=(0,E.default)(n,e,1,"name");this.setState({formItems:a,idForm:this.state.idForm+1})}},{key:"onPositionUpFormItem",value:function(e,t){var n=[].concat(S(this.state.formItems)),a=(0,E.default)(n,e,-1,"name");this.setState({formItems:a,idForm:this.state.idForm+1})}},{key:"cleanStrings",value:function(e){return"string"==typeof e?e.replace(/["]+/g,"'"):""}},{key:"getEnumFieldRJSF",value:function(e){var t=this;if(["radio","select"].indexOf(e.type)>=0)return e.options.map((function(e){return t.cleanStrings(e.label)}))}},{key:"getEnumCheckboxFieldRJSF",value:function(e){var t=this;return e.options.map((function(e){return t.cleanStrings(e.label)}))}},{key:"getTypeFieldRJSF",value:function(e){return{checkbox:"Case à cocher"===e.labelMenu?"boolean":"array",number:"number"}[e.type]||"string"}},{key:"getWidgetFieldRJSF",value:function(e){return{email:"email",date:"date",number:"updown",radio:"radio",checkbox:"Case à cocher"===e.labelMenu?"checkbox":"checkboxes",select:"select",text:"text",textarea:"textarea"}[e.type]||"text"}},{key:"buildSchema",value:function(){var e=this,t=this.props.ui,n={title:"",description:"",type:"object"},a=this.state.formItems,o={},r=[];return a.forEach((function(n){o[n.name]={},o[n.name].minLength=n.minLength,o[n.name].maxLength=n.maxLength;var a=null;if(n.options){var i=n.options.find((function(e){return!0===e.selected}));a=i&&i.label||void 0}a=e.cleanStrings(a),o[n.name].type=e.getTypeFieldRJSF(n),o[n.name].enum=e.getEnumFieldRJSF(n),o[n.name].title=e.cleanStrings(t.label&&n.label||""),"checkbox"===n.type&&("Case à cocher"===n.labelMenu?o[n.name].title=e.cleanStrings(n.options[0].label):(o[n.name].uniqueItems=!0,o[n.name].items={type:"string",enum:e.getEnumCheckboxFieldRJSF(n)})),"select"===n.type&&(o[n.name].default=a),"radio"===n.type&&(o[n.name].default=a),"number"===n.type&&(o[n.name].minimum=0),n.required&&r.push(n.name)})),n.properties=o,n.required=r,n}},{key:"onUpdateOpt",value:function(e,t,n){e.opt;var a=e.options,o=[].concat(S(this.state.formItems)),r=o.findIndex((function(e){return e.name==a.name}));o[r]=a,"handleChangeLabel"===n?this.setState({formItems:o}):this.setState({formItems:o,idForm:this.state.idForm+1,idFormEdit:this.state.idFormEdit+1})}},{key:"buildUiSchema",value:function(){var e=this,t=this.props.ui,n={Message:{"ui:widget":"textarea"}},a=[];return this.state.formItems.forEach((function(o){n[o.name]={"ui:widget":e.getWidgetFieldRJSF(o),"ui:placeholder":e.cleanStrings(o.placeholder),"ui:help":e.cleanStrings(o.helpText),"ui:title":e.cleanStrings(t.label&&o.label||"")},a.push(o.name)})),a.push("*"),n["ui:order"]=a,n.testCheckbox={"ui:widget":"radio"},n}},{key:"togglePopover",value:function(e){var t="boolean"==typeof e?e:!this.state.popoverIsOpen;this.setState({popoverIsOpen:t})}},{key:"mepStack",value:function(e,t,n,a,o){var i=this.props,l=(i.mode,i.prefixCss),u=(i.onAction,i.ui),d=this.state,p=(d.schema,d.uiSchema,d.widgets,d.showErrorRecaptcha,d.loadingFailed),f=(d.isLoaded,a&&a.src&&u.map);return s.default.createElement(c.default,r({key:"mepStack",title:t},this.props),s.default.createElement("div",{className:M(l,"row")},s.default.createElement("div",{className:M(l,"col-12","col-md-6",!f&&"mx-auto",e&&"order-2")},s.default.createElement("div",null,this.renderForm(),!p&&s.default.createElement(v.default,r({cta:o},this.props)),this.requestState())),f&&s.default.createElement("div",{className:M(l,"col-12 col-md-6",e&&"order-1")},this.renderMap(a))))}},{key:"integratedMep",value:function(e,t,n,a,o){var i=this.props,l=(i.mode,i.prefixCss),c=(i.onAction,i.ui),u=this.state,d=(u.schema,u.uiSchema,u.widgets,u.showErrorRecaptcha,u.loadingFailed),p=(u.isLoaded,a&&a.src&&c.map);return s.default.createElement("div",{className:M(l,"row")},s.default.createElement("div",{className:M(l,"col-12","col-md-6",!p&&"mx-auto",e&&"order-2")},s.default.createElement("div",null,this.renderForm(),!d&&s.default.createElement(v.default,r({cta:o},this.props)),this.requestState())))}},{key:"cleanFormItemsInState",value:function(){var e=this,t=r({},this.state),n=[];return this.state.formItems.forEach((function(t){var a=t;if(a.label=e.cleanStrings(t.label),a.helpText=e.cleanStrings(t.helpText),a.placeholder=e.cleanStrings(t.placeholder),void 0!==t.options){var o=[];t.options.forEach((function(t){var n=t;n.label=e.cleanStrings(t.label),n.value=e.cleanStrings(t.value),o.push(n)})),a.options=o}n.push(a)})),t.formItems=n,t}},{key:"traverse",value:function(e){var t=this;if(null!==e&&"object"==(void 0===e?"undefined":o(e)))return Object.entries(e).forEach((function(e){var n=a(e,2),o=(n[0],n[1]);t.traverse(o)})),e}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null},a=this.state.cta;if(n&&a&&n.cta.link!==a.link){var o=a;o.link=n.cta.link,this.setState({cta:o})}this.sendUpdate()}},{key:"render",value:function(){var e=this.props,t=e.mep,n=e.blocks,a=(e.prefixCss,e.mode),o=e.onAction,r=e.ui,i=(e.onSend,this.state),l=i.mepRender,c=i.item,u=i.showSuccessMsg,d=i.openedModal,p=(n.find((function(e){return"title"===e.name}))||{title:null}).title,f=(n.find((function(e){return"description"===e.name}))||{description:null}).description,h=(n.find((function(e){return"cta"===e.name}))||{cta:null}).cta,b=(n.find((function(e){return"msgSuccess"===e.name}))||{msgSuccess:{txt:'<p style="text-align:center;">Votre message a bien été envoyé. Nous y répondrons dès que possible.</p>'}}).msgSuccess;return this.props.integrated?[this.integratedMep(!1,p,f,c,h),s.default.createElement("div",{className:u?"":"d-none",key:"success-msg"},s.default.createElement(F,{contentStyle:{color:"initial",margin:"5rem auto auto auto",background:"none",padding:0,border:0},open:d,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},s.default.createElement("div",{className:"modal-content"},s.default.createElement("div",{className:"modal-header border-0 pb-0"},s.default.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},s.default.createElement("span",{"aria-hidden":"true"},"×"))),s.default.createElement("div",{className:"modal-body pt-0"},s.default.createElement("div",null,"edit"===a&&s.default.createElement("div",{"data-name-block":"block-success-msg",style:{display:"inline-flex",width:"100%"}},s.default.createElement(m.default,{content:b.txt,block:{name:"msgSuccess",index:0,key:"msgSuccess"},fordiddenKeyboard:["split-block"],onAction:function(e){o({action:"evt_draft",params:e})}})),"view"===a&&s.default.createElement("div",{dangerouslySetInnerHTML:{__html:b.txt}}))))))]:[l[t]&&l[t](p,f,r.map&&c,h)||l["stack-reverse"](p,f,r.map&&c,h),s.default.createElement("div",{className:u?"":"d-none",key:"success-msg"},s.default.createElement(F,{contentStyle:{color:"initial",margin:"5rem auto auto auto",background:"none",padding:0,border:0},open:d,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},s.default.createElement("div",{className:"modal-content"},s.default.createElement("div",{className:"modal-header border-0 pb-0"},s.default.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},s.default.createElement("span",{"aria-hidden":"true"},"×"))),s.default.createElement("div",{className:"modal-body pt-0"},s.default.createElement("div",null,"edit"===a&&s.default.createElement("div",{"data-name-block":"block-success-msg",style:{display:"inline-flex",width:"100%"}},s.default.createElement(m.default,{content:b.txt,block:{name:"msgSuccess",index:0,key:"msgSuccess"},fordiddenKeyboard:["split-block"],onAction:function(e){o({action:"evt_draft",params:e})}})),"view"===a&&s.default.createElement("div",{dangerouslySetInnerHTML:{__html:b.txt}}))))))]}}]),t}(l.Component)),V=function(){var e=this;this.onSortEnd=function(t){var n=t.oldIndex,a=t.newIndex;n!==a&&e.setState((function(e){var t=e.formItems;return{formItems:q(t,n,a)}}))},this.sendUpdate=_((function(){e.props.onAction({action:"updatePropsForm",params:{props:e.props,state:e.cleanFormItemsInState(),schema:e.buildSchema(),uiSchema:e.buildUiSchema()}})}),1e3),this.closeModal=function(){e.setState({showSuccessMsg:!1,openedModal:!1}),e.props.onCloseModal()},this.renderMap=function(t,n,a){var o=e.props,r=o.ui,i=o.onAction,l=(o.mode,a||{width:"100%",height:(n||300)+"px",border:"0px"});return r.map&&t.src&&s.default.createElement("div",null,s.default.createElement("div",{style:l,onClick:function(){i({action:"click_iframe"})}},s.default.createElement("iframe",{style:l,className:"embed-responsive-item d-block",src:t.src,allowtransparency:"true",allowFullScreen:!0})))}};J.defaultProps={integrated:!1,formItems:[],useOnlyUiTitle:!0,autoAddUi:!0,resourceId:null,addEmail:!0,uiSchema:{Message:{"ui:widget":"textarea"}},url:null,urlSave:null,ui:{label:!0,map:!0,mapFullWdithScreen:!1},schema:{title:"",description:"",type:"object",required:["Email","Message","Nom","Note"],properties:{Nom:{type:"string",title:"Nom",minLength:2},Email:{type:"string",format:"email",title:"Email"},Note:{type:"number",enum:[1,2,3,4,5],title:"Note"},Message:{type:"string",title:"Message",minLength:8}}},onCloseModal:function(){},onAction:function(){},prefixCss:"",mep:"stack-reverse",mode:"view",sectionCss:"",containerCss:"container",bg:{class:"bg-white",img:{path:"https://images.unsplash.com/photo-1509624776920-0fac24a9dfda?ixlib=rb-0.3.5&s=dd42a6d…&auto=format&fit=crop&w=1350&q=80",class:"img-fluid"}},redirection:!1,blocks:[{name:"cta",cta:{txt:"Nous contacter",css:"",class:"btn-primary",link:"/faire-un-site-gratuitement.php",tpl:"BtnBootstrap",visible:!0,icon:{active:!0,css:"far fa-envelope"}}},{name:"title",title:{txt:"<h1>Demande d'informations</h1>",class:"",visible:!1}},{name:"description",description:{txt:"Pour toutes vos questions, veuillez remplir le formulaire ci-dessous"}},{name:"media",item:{src:"https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q=paris&output=embed",address:"paris",tpl:"iframe",visible:!1}}],btnAlign:"center",onSend:function(){}};var B=function(e){var t=e.id,n=e.classNames,a=e.label,o=e.help,r=e.required,i=e.rawErrors,l=e.description,c=(e.errors,e.children),u=e.displayLabel,d=e.hidden,p=e.useOnlyUiTitle?e.uiSchema["ui:title"]:a;return s.default.createElement("div",{className:n+" "},u&&!d&&s.default.createElement("label",{className:"control-label font-weight-bold",htmlFor:t},p,p&&r?"*":null),l,c,i&&i.length>0&&s.default.createElement(z,{errors:i}),s.default.createElement("small",{className:"form-text text-muted"}," ",o))},z=function(e){var t=e.errors;return s.default.createElement("ul",{className:"list-unstyled mt-2"},t.map((function(e,t){return s.default.createElement("li",{key:t,className:"text-danger"}," ",s.default.createElement(K,{msg:e})," ")})))},W=function(e){return s.default.createElement(b.default,{key:"captcha",sitekey:"6LcAZCkUAAAAAJ2XQcVz6M2qgiwypmqhT501lFvv",render:"explicit",hl:"fr",verifyCallback:function(t){(0,e.onChange)(t)},expiredCallback:function(t){(0,e.onChange)(t)}})},X={"is a required property":"Veuillez remplir ce champ",'should match format "email"':"Email non valide","should NOT be shorter than _X_ characters":"Veuillez allonger ce texte pour qu'il comporte au moins _X_ caractères","should NOT be longer than _X_ characters":"Veuillez réduire ce texte à _X_ caractères maximun"},K=function(e){var t=e.msg,n=t,a=n.match(/\d+/),o=0;return a&&(n=n.replace(a[0],"_X_"),o=a[0]),X[n]?X[n].replace("_X_",o):t};t.default=J},1371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),i=(a=r)&&a.__esModule?a:{default:a};var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseLeave=function(){n.setState({ratingPreview:0})},n.handleMouseOver=function(e){n.setState({ratingPreview:e+1})},n.handleClick=function(e){var t=n.props.onChange;n.setState({rating:e+1,ratingPreview:0},(function(){t(e+1)}))},n.state={stars:new Array(5).fill(5),rating:0,ratingPreview:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.stars,a=t.rating,o=t.ratingPreview;return i.default.createElement("span",{className:"mr-2 wrapper-stars",onMouseLeave:function(){return e.handleMouseLeave()}},n.map((function(t,n){return a&&n<a||o&&n<o?i.default.createElement("i",{key:n,className:"fas fa-star fa-2x cursor-pt",onMouseOver:function(){return e.handleMouseOver(n)},onClick:function(){return e.handleClick(n)}}):i.default.createElement("i",{key:n,className:"far fa-star fa-2x cursor-pt",onMouseOver:function(){return e.handleMouseOver(n)}})})))}}]),t}(r.PureComponent);t.default=l},1372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=r(n(149));function r(e){return e&&e.__esModule?e:{default:e}}var i=r(n(35)).default._css;t.default=function(e){var t=e.prefixCss,n=e.mode,r=e.onAction,l=e.useMarginT,s=e.style,c=e.btnCss,u=e.pendingSend,d=e.cta,p=e.btnAlign;if(c&&(d.class=d.class+" "+c),u)return a.default.createElement("i",{className:"fas fa-spinner fa-pulse"});var f,m,h,b="text-center";return"right"===p?b="text-right":"left"===p&&(b="text-left"),a.default.createElement("div",(f={className:!1!==l?"mt-2":""},m="className",h=i("",!1!==l&&"mt-2",b),m in f?Object.defineProperty(f,m,{value:h,enumerable:!0,configurable:!0,writable:!0}):f[m]=h,f),a.default.createElement(o.default,{prefixCss:t,mode:n,cta:d,style:s,onAction:r}))}},1373:function(e,t,n){var a=n(1374),o=n(1375),r=o;r.v1=a,r.v4=o,e.exports=r},1374:function(e,t,n){var a,o,r=n(911),i=n(912),l=0,s=0;e.exports=function(e,t,n){var c=t&&n||0,u=t||[],d=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var f=r();null==d&&(d=a=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:s+1,b=m-l+(h-s)/1e4;if(b<0&&void 0===e.clockseq&&(p=p+1&16383),(b<0||m>l)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=m,s=h,o=p;var v=(1e4*(268435455&(m+=122192928e5))+h)%4294967296;u[c++]=v>>>24&255,u[c++]=v>>>16&255,u[c++]=v>>>8&255,u[c++]=255&v;var y=m/4294967296*1e4&268435455;u[c++]=y>>>8&255,u[c++]=255&y,u[c++]=y>>>24&15|16,u[c++]=y>>>16&255,u[c++]=p>>>8|128,u[c++]=255&p;for(var g=0;g<6;++g)u[c+g]=d[g];return t||i(u)}},1375:function(e,t,n){var a=n(911),o=n(912);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var l=0;l<16;++l)t[r+l]=i[l];return t||o(i)}},1376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),i=(a=r)&&a.__esModule?a:{default:a};var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedField:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"selected",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onAddFormItem(JSON.parse(JSON.stringify(this.props)))}},{key:"render",value:function(){var e=this;return i.default.createElement("button",{className:"we-dropdown-item",onClick:function(t){return e.selected(t)},style:{cursor:"pointer"}},this.props.labelMenu)}}]),t}(i.default.Component);t.default=l},1377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=c(n(0)),i=c(n(1378)),l=c(n(1379)),s=c(n(1380));function c(e){return e&&e.__esModule?e:{default:e}}var u=c(n(35)).default._reactSortableHoc,d=u.SortableContainer,p=u.SortableItem,f=u.arrayMove,m=(u.sortableHandle,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSortEnd=function(e){var t=e.oldIndex,o=e.newIndex;if(t!==o){var r=a({},n.props.item,{options:f(n.props.item.options,t,o)});n.onUpdateField(r)}},n.onDelete=n.onDelete.bind(n),n.onAddOption=n.onAddOption.bind(n),n.onPositionDown=n.onPositionDown.bind(n),n.onPositionUp=n.onPositionUp.bind(n),n.onUpdateField=n.onUpdateField.bind(n),n.initHelpText=n.initHelpText.bind(n),n.onSortEnd=n.onSortEnd.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"onDelete",value:function(){this.props.onDelete(this.props.item.name)}},{key:"onPositionUp",value:function(){this.props.onPositionUp(this.props.item,this.props.key)}},{key:"onPositionDown",value:function(){this.props.onPositionDown(this.props.item,this.props.key)}},{key:"onAddOption",value:function(){this.props.onAddOption(this.props.item,this.props.key)}},{key:"onUpdateField",value:function(e){this.props.onUpdateField(e)}},{key:"initHelpText",value:function(e){this.props.initHelpText(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=t.formItems,c=t.index,u=t.item,f=t.ui,m=this.onDelete,h=this.onPositionDown,b=this.onAddOption,v=this.onPositionUp,y=this.onUpdateField,g=this.initHelpText,w={position:"absolute",left:"39px",top:"14px"};return r.default.createElement("div",null,r.default.createElement(i.default,{key:u.name,index:c,formItems:o,params:u,onDelete:m,onPositionUp:v,onPositionDown:h,onAddOption:b,onUpdateField:y,initHelpText:g,data:n,onReplace:function(t){return e.props.onReplace(t,e.props.item)},ui:f,toggleSelect:function(){return e.toggleSelect()}}),"select"===u.type&&r.default.createElement(d,{axis:"xy",useDragHandle:!0,distance:0,onSortEnd:this.onSortEnd},r.default.createElement("div",{className:"we-w-100"},u.options.map((function(t,n){return r.default.createElement(p,{key:"options-sortable-"+n,index:n,sortIndex:n},r.default.createElement("div",null,r.default.createElement(l.default,{key:t.value,index:n,params:a({},t),parentParams:u,onDelete:function(t){return e.props.onUpdateOpt({options:t},"onDelete")},onPositionUp:function(t){return e.props.onUpdateOpt({options:t},"onPositionUp")},onPositionDown:function(t){return e.props.onUpdateOpt({options:t},"onPositionDown")},onUpdateField:function(t,n){return e.props.onUpdateOpt({options:t},"onUpdateField",n)},styleOption:{borderLeft:"1px solid #ced4da",borderRight:"1px solid #ced4da",borderBottom:u.options.length-1===n?"1px solid #ced4da":void 0},labelSelected:"Choisie par défaut"})))})))),"radio"===u.type&&r.default.createElement(d,{axis:"xy",useDragHandle:!0,distance:0,onSortEnd:this.onSortEnd},r.default.createElement("div",{className:"we-w-100"},u.options.map((function(t,n){return r.default.createElement(p,{key:"options-sortable-"+n,index:n,sortIndex:n},r.default.createElement("div",null," ",r.default.createElement(l.default,{key:t.value,index:n,params:a({},t),parentParams:u,onDelete:function(t){return e.props.onUpdateOpt({options:t},"onDelete")},onPositionUp:function(t){return e.props.onUpdateOpt({options:t},"onPositionUp")},onPositionDown:function(t){return e.props.onUpdateOpt({options:t},"onPositionDown")},onUpdateField:function(t,n){return e.props.onUpdateOpt({options:t},"onUpdateField",n)},styleOption:{},inputUi:r.default.createElement("input",{style:w,type:"radio",disabled:!0,checked:t.selected})})))})))),"checkbox"===u.type&&r.default.createElement(d,{axis:"xy",useDragHandle:!0,distance:0,onSortEnd:this.onSortEnd},r.default.createElement("div",{className:"we-w-100"},u.options.map((function(t,n){return r.default.createElement(p,{key:"options-sortable-"+n,index:n,sortIndex:n},r.default.createElement("div",null,r.default.createElement(l.default,{key:t.value,index:n,params:a({},t),parentParams:u,onDelete:function(t){return e.props.onUpdateOpt({options:t},"onDelete")},onPositionUp:function(t){return e.props.onUpdateOpt({options:t},"onPositionUp")},onPositionDown:function(t){return e.props.onUpdateOpt({options:t},"onPositionDown")},onUpdateField:function(t,n){return e.props.onUpdateOpt({options:t},"onUpdateField",n)},styleOption:{},inputUi:r.default.createElement("input",{style:w,type:"checkbox",disabled:!0,checked:t.selected})})))})))),r.default.createElement(s.default,{key:"help-"+u.name,params:u,onUpdateField:y,initHelpText:g}))}}]),t}(r.default.Component));t.default=m},1378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(0)),i=s(n(35)),l=s(n(913));function s(e){return e&&e.__esModule?e:{default:e}}var c=i.default._Popup,u=i.default._reactSortableHoc.sortableHandle,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={placeholder:n.props.params.placeholder,label:n.props.params.label,helpText:n.props.params.helpText,params:n.props.params,required:n.props.params.required,popoverIsOpen:!1,showHelpText:!!n.props.params.helpText,showFormUI:!1,canSort:!0},n.handleChangeLabel=n.handleChangeLabel.bind(n),n.ctrlContentLabel=n.ctrlContentLabel.bind(n),n.handleChangePlaceholder=n.handleChangePlaceholder.bind(n),n.handleChangeRequired=n.handleChangeRequired.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.onDelete=n.onDelete.bind(n),n.onPositionDown=n.onPositionDown.bind(n),n.onChangeType=n.onChangeType.bind(n),n.onAddOption=n.onAddOption.bind(n),n.onPositionUp=n.onPositionUp.bind(n),n.showHelpText=n.showHelpText.bind(n),n.onAddFormItem=n.onAddFormItem.bind(n),n.refLabel=r.default.createRef(),n.refHelpText=r.default.createRef(),n.limitations={lengthField:{max:350}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"handleChangeLabel",value:function(){var e=this.refLabel.current.textContent,t=a({},this.props.params);t.label=e,this.props.onUpdateField(t)}},{key:"handleChangePlaceholder",value:function(e){var t=this,n=e.target.value;this.setState({placeholder:n},(function(){var e=a({},t.props.params);e.placeholder=n,t.props.onUpdateField(e)}))}},{key:"handleChangeRequired",value:function(e){var t=this,n=e.target.checked;this.setState({required:n},(function(){var e=a({},t.props.params);e.required=n,t.props.onUpdateField(e)}))}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"onPositionUp",value:function(){this.props.onPositionUp()}},{key:"showHelpText",value:function(){var e=this;this.setState({showHelpText:!this.state.showHelpText},(function(){if(e.state.showHelpText){var t=a({},e.props.params);e.props.initHelpText(t)}else{var n=a({},e.props.params);n.helpText="",e.props.onUpdateField(n)}}))}},{key:"onPositionDown",value:function(){this.props.onPositionDown()}},{key:"onChangeType",value:function(){this.setState({showFormUI:!0})}},{key:"onAddOption",value:function(){this.props.onAddOption()}},{key:"onUpdateField",value:function(){this.props.onUpdateField()}},{key:"onDelete",value:function(){this.canDeleteItem()&&this.props.onDelete()}},{key:"getValueSelectedSelect",value:function(){var e=this.props.params;return(e.options.find((function(e){return!0===e.selected}))||e.options[0]).label}},{key:"onAddFormItem",value:function(e){this.props.onReplace(e)}},{key:"canDeleteItem",value:function(){return-1===["Email"].indexOf(this.props.params.name)}},{key:"ctrlContentLabel",value:function(e){this.refLabel.current.textContent.length===this.limitations.lengthField.max&&8!=e.keyCode&&e.preventDefault()}},{key:"ctrlContentPlaceholder",value:function(e){}},{key:"render",value:function(){var e,t,n,a=this,o=this.state,i=o.label,s=(o.helpText,o.placeholder),d=o.params,p=o.required,f=o.popoverIsOpen,m=o.showHelpText,h=o.showFormUI,b=o.canSort,v=this.onDelete,y=this.onPositionDown,g=this.onPositionUp,w=this.onAddOption,x=this.onAddFormItem,E=this.props,k=E.data,S=E.index,O=E.formItems,F=E.ui,C=m?"fas fa-eye":"fas fa-eye-slash",_=-1===["radio","checkbox"].indexOf(d.type),P=this.canDeleteItem(),I=P?{}:{cursor:"not-allowed"},N=u((function(){return r.default.createElement("div",{title:"Modifier l'ordre",style:{margin:"auto 6px auto 0px"},className:"we-btn we-btn-sm we-btn-secondary we-p-0"},r.default.createElement("i",{className:"far fa-arrows-alt",style:{lineHeight:"1.5",padding:".25rem .5rem",cursor:"move"}}))}));return r.default.createElement("div",{className:""},r.default.createElement("div",{className:""},r.default.createElement("div",{className:_?"we-w-100":"we-d-flex",style:!_&&{position:"relative",marginBottom:"1rem",paddingTop:"5px"}||null},b&&!_&&r.default.createElement(N,null),r.default.createElement("div",(e={ref:this.refLabel,onInput:this.handleChangeLabel,className:"we-text-left we-font-weight-bold we-w-100",contentEditable:!0,dangerouslySetInnerHTML:{__html:i},style:{visibility:!1===F.label?"hidden":"visible"},onPaste:this.ctrlContentLabel,onKeyDown:this.ctrlContentLabel,onKeyPress:function(e){13===e.which&&e.preventDefault()}},n=function(){setTimeout((function(){a.refLabel.current.innerHTML=a.refLabel.current.textContent}),0)},(t="onPaste")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),r.default.createElement("div",{className:"we-d-flex",style:_&&{position:"relative"}||null},b&&_&&r.default.createElement(N,null),_&&-1===["date","select","textarea"].indexOf(d.type)&&r.default.createElement("input",{type:"text",className:"we-form-control we-w-100",value:s,onChange:this.handleChangePlaceholder,maxLength:this.limitations.lengthField.max}),_&&"date"===d.type&&r.default.createElement("input",{type:"date",className:"we-form-control we-w-100",disabled:!0}),_&&"select"===d.type&&r.default.createElement("div",{className:"we-w-100 pos-rel"},r.default.createElement("select",{type:"text",className:"we-form-control we-w-100",value:this.getValueSelectedSelect(),style:{background:"white"},disabled:!0},r.default.createElement("option",null,this.getValueSelectedSelect()))),_&&"textarea"===d.type&&r.default.createElement("textarea",{rows:"2",className:"we-form-control we-w-100",value:s,onChange:this.handleChangePlaceholder}),r.default.createElement("div",{className:"we-d-flex we-text-black we-align-items-center"},r.default.createElement(c,{open:f,onClose:function(){a.setState({popoverIsOpen:!1,showFormUI:!1})},contentStyle:{color:"initial",width:"250px",zIndex:"1015"},overlayStyle:{zIndex:"1"},trigger:r.default.createElement("div",{className:"btn ml-2 mr-2 test",style:{width:"32px",height:"32px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.25)",backgroundColor:"#ffffff",borderRadius:"50%"}},r.default.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",borderRadius:"50%"}},r.default.createElement("i",{className:"we-text-black fas fa-ellipsis-v"}))),position:["bottom center","top center","left center","right center"],mouseLeaveDelay:250,closeOnDocumentClick:!0},r.default.createElement("div",{className:"we-text-left"},!h&&r.default.createElement("div",{style:{textAlign:"left"}},P&&r.default.createElement("span",null,r.default.createElement("label",{className:"we-dropdown-item "+(P?"":"we-disabled"),htmlFor:"checkbox-required-"+d.name,style:{}},r.default.createElement("i",{className:"icon-actions-form far fa-star"})," ","Champ obligatoire"," ",r.default.createElement("div",null,r.default.createElement("input",{id:"checkbox-required-"+d.name,type:"checkbox",style:{margin:"0px 0px 0px 5px"},className:"we-form-check-input",checked:p,onChange:this.handleChangeRequired})))),r.default.createElement("button",{className:"we-dropdown-item",type:"button",onClick:this.showHelpText},r.default.createElement("i",{className:"icon-actions-form "+C})," ","Afficher aide"),d.options&&!1!==d.canAddOption&&r.default.createElement("button",{className:"we-dropdown-item",type:"button",onClick:w},r.default.createElement("i",{className:"icon-actions-form fas fa-plus"})," ","Ajouter une option"),0!==S&&r.default.createElement("button",{className:"we-dropdown-item",type:"button",onClick:g},r.default.createElement("i",{className:"icon-actions-form fas fa-long-arrow-alt-up"})," ","Déplacer vers le haut"),O.length-1!==S&&r.default.createElement("button",{className:"we-dropdown-item",type:"button",onClick:y},r.default.createElement("i",{className:"icon-actions-form fas fa-long-arrow-alt-down"})," ","Déplacer vers le bas"),P&&r.default.createElement("span",{style:I},r.default.createElement("button",{className:"we-dropdown-item",type:"button",onClick:this.onChangeType},r.default.createElement("i",{className:"icon-actions-form fas fa-exchange-alt"})," ","Remplacer le champ"))),h&&r.default.createElement("div",null,r.default.createElement("button",{className:"we-dropdown-item mb-2",type:"button",style:{color:"#519bda",cursor:"pointer"},onClick:function(){a.setState({showFormUI:!1})}},r.default.createElement("i",{className:"fas fa-chevron-left"})," Retour"),r.default.createElement(l.default,{inputs:k,form:[],onAddFormItem:x,exclude:d.labelMenu})))),r.default.createElement("div",{className:"we-btn we-mr-1",style:{width:"32px",height:"32px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.25)",backgroundColor:"#ffffff",visibility:P?"visible":"hidden"},onClick:v},r.default.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},r.default.createElement("i",{className:"fas fa-times-circle"}))),r.default.createElement("div",{style:{width:"32px",height:"32px",backgroundColor:"transparent",display:"inline-block",visibility:d.required?"visible":"hidden"}},r.default.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},r.default.createElement("i",{className:"fas fa-star"}))))))))}}]),t}(r.default.Component);t.default=d},1379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(0)),i=s(n(35)),l=s(n(914));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var u=i.default._Popup,d=i.default._reactSortableHoc.sortableHandle,p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={placeholder:n.props.params.placeholder,label:n.props.params.label,helpText:n.props.params.helpText,params:n.props.params,required:n.props.params.required,popoverIsOpen:!1,showHelpText:!!n.props.params.helpText,canSort:!0},n.handleChangeLabel=n.handleChangeLabel.bind(n),n.handleChangeSelected=n.handleChangeSelected.bind(n),n.onDelete=n.onDelete.bind(n),n.onPositionDown=n.onPositionDown.bind(n),n.onPositionUp=n.onPositionUp.bind(n),n.refLabel=r.default.createRef(),n.refHelpText=r.default.createRef(),n.setWrapperRef=n.setWrapperRef.bind(n),n.handleClickOutside=n.handleClickOutside.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){}},{key:"handleChangeSelected",value:function(e){e.target.checked;var t=a({},this.props.params),n=[].concat(c(this.props.parentParams.options));n.forEach((function(e){e.value===t.value?e.selected=void 0===e.selected||!e.selected:e.selected=!1}));var o=a({},this.props.parentParams,{options:n});this.props.onUpdateField(o,"selected")}},{key:"handleChangeLabel",value:function(){var e=this.refLabel.current.textContent,t=a({},this.props.params);t.label=e,this.onUpdateField(t,"handleChangeLabel")}},{key:"onPositionUp",value:function(){var e=a({},this.props.params),t=[].concat(c(this.props.parentParams.options)),n=(0,l.default)(t,e,-1,"value"),o=a({},this.props.parentParams,{options:n});this.props.onUpdateField(o)}},{key:"onPositionDown",value:function(){var e=a({},this.props.params),t=[].concat(c(this.props.parentParams.options)),n=(0,l.default)(t,e,1,"value"),o=a({},this.props.parentParams,{options:n});this.props.onUpdateField(o)}},{key:"onUpdateField",value:function(e,t){var n=[].concat(c(this.props.parentParams.options)),o=n.findIndex((function(t){return t.value==e.value}));n[o]=e;var r=a({},this.props.parentParams,{options:n});this.props.onUpdateField(r,t)}},{key:"onDelete",value:function(){var e=[].concat(c(this.props.parentParams.options)),t=this.props.params.value;for(var n in e)e[n].value===t&&e.splice(n,1);var o=a({},this.props.parentParams,{options:e});this.props.onUpdateField(o)}},{key:"render",value:function(){var e=this,t=this.state,n=t.label,a=(t.helpText,t.placeholder,t.params),o=(t.required,t.popoverIsOpen),i=t.canSort,l=this.props,s=l.parentParams,c=l.index,p=l.styleOption,f=l.inputUi,m=l.labelSelected,h=l.styleLabelSelected,b=this.onDelete,v=this.onPositionDown,y=this.onPositionUp,g=d((function(){return r.default.createElement("div",{title:"Modifier l'ordre",style:{margin:"auto 6px auto 0px"},className:"we-btn we-btn-sm we-btn-secondary we-p-0"},r.default.createElement("i",{className:"far fa-arrows-alt",style:{lineHeight:"1.5",padding:".25rem .5rem",cursor:"move"}}))}));return r.default.createElement("div",{ref:this.setWrapperRef},r.default.createElement("div",{style:{backgroundColor:"select"===s.type?"white":null}},r.default.createElement("div",{className:"we-d-flex we-text-black "+("select"===s.type?"":"we-align-items-center we-pb-2")+" ",style:{position:"relative"}},i&&r.default.createElement(g,null),r.default.createElement("div",{ref:this.refLabel,onInput:this.handleChangeLabel,className:"we-text-left we-d-flex we-flex-column py-2 "+("select"!==s.type?"we-pl-4":"we-pl-2")+"  we-w-100",style:p,contentEditable:!0,dangerouslySetInnerHTML:{__html:n},onKeyPress:function(e){13===e.which&&e.preventDefault()},onPaste:function(){setTimeout((function(){e.refLabel.current.innerHTML=e.refLabel.current.textContent}),0)}}),r.default.createElement("div",{className:"we-d-flex"},f,r.default.createElement("div",{className:"we-d-flex we-align-items-center"},r.default.createElement(u,{open:o,contentStyle:{color:"initial",width:"240px",zIndex:"1015"},overlayStyle:{zIndex:"1"},trigger:r.default.createElement("div",{className:"we-btn we-ml-2 we-mr-2",style:{width:"32px",height:"32px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.25)",backgroundColor:"#ffffff",borderRadius:"50%"}},r.default.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",borderRadius:"50%"}},r.default.createElement("i",{className:"fas fa-ellipsis-v we-text-black"}))),position:["bottom center","top center","left center","right center"],mouseLeaveDelay:250,closeOnDocumentClick:!0},r.default.createElement("div",{style:{textAlign:"left"}},r.default.createElement("label",{className:"we-dropdown-item",htmlFor:"checkbox-required-"+a.value},r.default.createElement("i",{className:"icon-actions-form far fa-heart",style:h})," ",m,r.default.createElement("div",null,r.default.createElement("input",{id:"checkbox-required-"+a.value,type:"checkbox",style:{margin:"0px 0px 0px 5px"},className:"we-form-check-input",checked:a.selected,onChange:this.handleChangeSelected}))),0!==c&&r.default.createElement("button",{className:"we-dropdown-item",type:"button",onClick:y},r.default.createElement("i",{className:"icon-actions-form fas fa-long-arrow-alt-up"})," ","Déplacer vers le haut"),s.options.length-1!==c&&r.default.createElement("button",{className:"we-dropdown-item",type:"button",onClick:v},r.default.createElement("i",{className:"icon-actions-form fas fa-long-arrow-alt-down"})," ","Déplacer vers le bas"))),r.default.createElement("div",{className:"we-btn we-mr-1",style:{width:"32px",height:"32px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.25)",backgroundColor:"#ffffff",visibility:s.options.length>1?"visible":"hidden"},onClick:b},r.default.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},r.default.createElement("i",{className:"fas fa-times-circle"}))),r.default.createElement("div",{style:{width:"32px",height:"32px",backgroundColor:"#ffffff",display:"inline-block",visibility:a.required?"visible":"hidden"}},r.default.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},r.default.createElement("i",{className:"fas fa-star"}))))))))}}]),t}(r.default.Component);p.defaultProps={labelSelected:"Coché par défaut",styleLabelSelected:{paddingRight:"0px"}},t.default=p},1380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=(a=i)&&a.__esModule?a:{default:a};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={helpText:n.props.params.helpText,showHelpText:!!n.props.params.helpText,showFormUI:!1},n.handleChangeHelpText=n.handleChangeHelpText.bind(n),n.ctrlContent=n.ctrlContent.bind(n),n.limitations={lengthField:{max:350}},n.refHelpText=l.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"ctrlContent",value:function(e){this.refHelpText.current.textContent.length===this.limitations.lengthField.max&&8!=e.keyCode&&e.preventDefault()}},{key:"handleChangeHelpText",value:function(){var e=this.refHelpText.current.textContent,t=o({},this.props.params);t.helpText=e,this.props.onUpdateField(t)}},{key:"onUpdateField",value:function(){this.props.onUpdateField()}},{key:"render",value:function(){var e=this.state.helpText;return e&&l.default.createElement("small",{className:"form-text text-muted"},l.default.createElement("div",{ref:this.refHelpText,onInput:this.handleChangeHelpText,className:"we-text-left",contentEditable:!0,dangerouslySetInnerHTML:{__html:e},onPaste:this.ctrlContent,onKeyDown:this.ctrlContent}))||null}}]),t}(l.default.Component);t.default=s},1496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(1370),r=(a=o)&&a.__esModule?a:{default:a};t.default=r.default},911:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var a=new Uint8Array(16);e.exports=function(){return n(a),a}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},912:function(e,t){for(var n=[],a=0;a<256;++a)n[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,o=n;return[o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]]].join("")}},913:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),i=s(r),l=s(n(1376));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={formItems:[],inputs:[],form:function(){}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:""},this.props.inputs.map((function(t,n){return t.labelMenu!==e.props.exclude&&i.default.createElement(l.default,a({key:n},t,{onAddFormItem:e.props.onAddFormItem}))})))}}]),t}(r.Component);t.default=c},914:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){var o=-1,r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)),i={};for(var l in r)r[l][a]===t[a]&&(o=l,i=r[l]);if(o>-1){var s=parseInt(o)+parseInt(n);s<0?s=0:s>=r.length&&(s=r.length);var c=r.slice();return c.splice(o,1),c.splice(s,0,i),c}return r}}}]);