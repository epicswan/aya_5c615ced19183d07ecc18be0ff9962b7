(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1250:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(733),i=n(122),s=n(238),l=n.n(s),c=n(15),u=n.n(c),f=n(762),p=n(991);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){k(e,t,n[t])}))}return e}function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=P(e);if(t){var r=P(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=u.a._reactSortableHoc,N=(_.SortableItem,_.SortableContainer,_.arrayMove,_.sortableHandle,u.a._store.getEnv()),w=N.scheme,S=N.domain,O=N.subdomain,x=N.apiProd,E=N.domainApi,I=x?O:"gallerie",L="".concat(w,"://").concat(I,".").concat(x?E:S).replace("__API__","gallerie"),j=u.a._css,R=u.a._getSrcSet,A=(u.a._ToolbarActions,l.a.CancelToken),D={transitionDuration:0},M={background:".bg-light"},T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,a,s=v(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),k(C(t=s.call(this,e)),"handlePS",(function(e){t.setState({isOpenPS:!!e})}));var n={};if(t.props.items.items.length>0){var a=t.props.items,r=a.numItems,o=a.page,i=a.totalItems;n={items:t.transformItems(t.props.items.items),numItems:r,page:o,totalItems:i,inLoading:!1}}else n={items:[],numItems:0,page:1,totalItems:0,inLoading:!0};return t.state=g({},n,{pathOrder:"".concat(L,"/slides/").concat(t.props.idGallery,"/order"),grid:{1:"",2:"col-md-6",3:"col-md-4",4:"col-md-3"},forcePage:t.props.forcedPage,mepRender:{bootstrapColumn:function(e){return t.bootstrapColumn(e)},masonryJS:function(e){return t.masonryJs(e)},bootstrapDefault:function(e){return t.bootstrapDefault(e)}},isOpenPS:!1,optionsPS:{index:0,closeOnScroll:!1,shareEl:!1},itemsPS:[]}),t}return t=c,(n=[{key:"getItems",value:function(e,t){return"edit"===this.props.mode&&(t.no_cache=!0),new Promise((function(n,a){l.a.defaults.headers.common.Authorization=null,l.a.get(e,{cancelToken:new A((function(e){e})),params:t}).then((function(e){n(e)})).catch((function(e){a(e)}))}))}},{key:"componentDidMount",value:function(){this.loadItems(this.props.forcedPage||1,"init"),this.loadIconsPS()}},{key:"loadIconsPS",value:function(){if(document&&!document.querySelector("#PS_CSS")){var e=document.createElement("style");e.id="PS_CSS",document.head.appendChild(e);var t=e.sheet;t.insertRule(".pswp__button, .pswp__button--arrow--left:before, .pswp__button--arrow--right:before {background: none !important}",t.cssRules.length),t.insertRule(".pswp__preloader--active .pswp__preloader__icn{background:url(".concat(w,"://editor.").concat(S,"/assets/dist/e34aafbb485a96eaf2a789b2bf3af6fe.gif) 0 0 no-repeat !important}"),t.cssRules.length),t.insertRule("@media (-webkit-min-device-pixel-ratio:1.1),(-webkit-min-device-pixel-ratio:1.09375),(min-resolution:1.1dppx),(min-resolution:105dpi){.pswp--svg .pswp__button,.pswp--svg .pswp__button--arrow--left:before,.pswp--svg .pswp__button--arrow--right:before{background-image:none !important}}",t.cssRules.length)}}},{key:"loadItems",value:function(e,t){var n=this,a=this.props.idGallery,r=L+"/public/galleries/"+a+"/slides",o={page:e};this.getItems(r,o).then((function(e){var t=e.data,a=t.items,r=t.numItems,o=t.page,i=t.totalItems;a=n.transformItems(a);var s=JSON.parse(JSON.stringify(a)).map((function(e){return g({},e,{w:0,h:0})}));n.setState({items:a,itemsPS:s,numItems:r,page:o,totalItems:i,inLoading:!1},(function(){n.props.onAction({action:"first_load_items",data:{numItems:r,page:o,totalItems:i,items:a}})}))})).catch((function(e){return console.log("erreur!!",e)}))}},{key:"orderItems",value:function(e){return[].concat(e).sort((function(e,t){return e.rank===t.rank?t.id-e.id:e.rank-t.rank}))}},{key:"transformItems",value:function(e){return this.orderItems(e.map((function(e){var t=e.src_set&&R(JSON.parse(e.src_set));return g({},e,{src:e.url,title:"",img:{path:e.url},visible:!0,srcSet:t})})))}},{key:"masonryJs",value:function(e){var t=this,n=this.props.prefixCss,a=e.map((function(e,a){return r.a.createElement("li",{key:a,className:"list-unstyled"},r.a.createElement(i.a,{css:j(n,"img-fluid"),tpl:"img",item:e,onAction:function(){return t.onActionMedia(e,a)}}))}));return r.a.createElement(Masonry,{className:"my-gallery-class",elementType:"ul",options:D,disableImagesLoaded:!1,updateOnEachImageLoad:!1,imagesLoadedOptions:M},a)}},{key:"onActionMedia",value:function(e,t){var n=this;this.setState({optionsPS:g({},this.state.optionsPS,{index:t})},(function(){return n.handlePS(!0)}))}},{key:"onActionPagination",value:function(e){var t=this;console.log("pagination",e),"page_change"===e.action&&this.setState({inLoading:!0},(function(){t.loadItems(e.data.nextPage)}))}},{key:"bootstrapColumn",value:function(e){var t=this,n=this.props.prefixCss;return r.a.createElement("div",{className:j(n,"card-columns")+" card-columns-2"},e.map((function(e,a){return r.a.createElement("div",{key:a,className:j(n,"card","border-0","mb-0")},r.a.createElement(i.a,{css:j(n,"card-img"),tpl:"img",item:e,onAction:function(){return t.onActionMedia(e,a)}}))})))}},{key:"getGrid",value:function(e,t){var n=this.state.grid,a=n[e]||n[1];return j(t,"col-12",a,"d-flex","align-items-stretch")}},{key:"bootstrapDefault",value:function(e){var t=this,n=this.props,a=n.prefixCss,o=n.spacing,s=(n.spacingAdmin,n.cardsInRow),l=n.mode,c=(n.cfgToolbarMedia,n.gridCss),u=(n.onAction,o?j(a,"mb-3","px-2"):j(a,"m-0","p-0")),f=""!==c&&c||this.getGrid(s,a);return r.a.createElement("div",{className:j(a,"row")},e.map((function(e,n){return r.a.createElement("div",{"data-item":"gallery",className:j(a,"col-12")+" "+f+" "+u},r.a.createElement(i.a,{mode:l,style:{objectFit:"cover",height:"100%",width:"100%"},css:j(a,"img-fluid"),tpl:"img",item:e,onAction:function(){return t.onActionMedia(e,n)}}))})))}},{key:"gettingData",value:function(e,t,n){if(n.w<1||n.h<1){var a=new Image;a.onload=function(){n.w=this.width,n.h=this.height,e.updateSize(!0)},n.srcSet&&(a.srcset=n.srcSet),a.src=n.src}}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=(t.mode,t.onAction,t.blocks),i=(t.btnAdd,this.state),s=i.items,l=i.itemsPS,c=i.totalItems,u=i.numItems,d=i.forcePage,g=i.mepRender,b=i.inLoading,h=i.isOpenPS,v=i.optionsPS,y=Math.ceil(c/u),C=d&&d-1||null,P=(a&&a.find((function(e){return"title"===e.name}))||{title:null}).title,k=void 0!==p.PhotoSwipe?p.PhotoSwipe:null;return r.a.createElement(o.a,m({title:P},this.props),b&&r.a.createElement("div",{className:"text-center"},r.a.createElement("i",{className:"fas fa-spinner fa-pulse"})),g[n]&&g[n](s)||g.bootstrapDefault(s),y>1&&r.a.createElement(f.a,{forcePage:C,pageCount:y,onAction:function(t){return e.onActionPagination(t)}}),k&&r.a.createElement(k,{isOpen:h,items:l||[],options:v,onClose:this.handlePS,gettingData:function(t,n,a){return e.gettingData(t,n,a)}}))}}])&&b(t.prototype,n),a&&b(t,a),c}(a.Component);T.defaultProps={mode:"view",type:"bootstrapDefault",prefixCss:"",gridCss:"",cardsInRow:3,spacing:!0,onAction:function(){},cfgToolbarMedia:{visible:!0,trash:!0},idGallery:0,items:{items:[]},btnAdd:{limit:100}},T.displayName="MasonryRcpt",t.default=T},762:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(796),i=n.n(o),s=n(15);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=n.n(s).a._css,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,e);var t,n,a,o=f(s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e)}return t=s,(n=[{key:"handlePageClick",value:function(e){this.props.onAction({action:"page_change",data:{nextPage:e.selected+1}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCss,a=t.posContainer;return r.a.createElement("nav",{className:m(n,"d-flex","justify-content-center")},r.a.createElement(i.a,{previousLabel:"❮",forcePage:this.props.forcePage,initialPage:0,nextLabel:"❯",breakLabel:r.a.createElement("div",{className:"page-link"},"..."),breakClassName:"page-item",pageCount:this.props.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:5,pageClassName:"page-item",pageLinkClassName:"page-link",nextClassName:"page-item",previousClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",onPageChange:function(t){return e.handlePageClick(t)},containerClassName:m(n,"pagination",a),subContainerClassName:"pages pagination",activeClassName:"active",disableInitialCallback:!0}))}}])&&c(t.prototype,n),a&&c(t,a),s}(a.Component);g.defaultProps={prefixCss:"",pageCount:1,posContainer:"",onAction:function(){},forcePage:null},t.a=g},796:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(992),o=(a=r)&&a.__esModule?a:{default:a};t.default=o.default},992:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=c(r),i=c(n(2)),s=c(n(993)),l=c(n(994));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlePreviousPage=function(e){var t=n.state.selected;e.preventDefault?e.preventDefault():e.returnValue=!1,t>0&&n.handlePageSelected(t-1,e)},n.handleNextPage=function(e){var t=n.state.selected,a=n.props.pageCount;e.preventDefault?e.preventDefault():e.returnValue=!1,t<a-1&&n.handlePageSelected(t+1,e)},n.handlePageSelected=function(e,t){t.preventDefault?t.preventDefault():t.returnValue=!1,n.state.selected!==e&&(n.setState({selected:e}),n.callCallback(e))},n.callCallback=function(e){void 0!==n.props.onPageChange&&"function"==typeof n.props.onPageChange&&n.props.onPageChange({selected:e})},n.pagination=function(){var e=[],t=n.props,a=t.pageRangeDisplayed,r=t.pageCount,i=t.marginPagesDisplayed,s=t.breakLabel,c=t.breakClassName,u=n.state.selected;if(r<=a)for(var f=0;f<r;f++)e.push(n.getPageElement(f));else{var p=a/2,d=a-p;u>r-a/2?p=a-(d=r-u):u<a/2&&(d=a-(p=u));var m=void 0,g=void 0,b=void 0,h=function(e){return n.getPageElement(e)};for(m=0;m<r;m++)(g=m+1)<=i||g>r-i||m>=u-p&&m<=u+d?e.push(h(m)):s&&e[e.length-1]!==b&&(b=o.default.createElement(l.default,{key:m,breakLabel:s,breakClassName:c}),e.push(b))}return e},n.state={selected:e.initialPage?e.initialPage:e.forcePage?e.forcePage:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialPage,n=e.disableInitialCallback;void 0===t||n||this.callCallback(t)}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.forcePage&&this.props.forcePage!==e.forcePage&&this.setState({selected:e.forcePage})}},{key:"hrefBuilder",value:function(e){var t=this.props,n=t.hrefBuilder,a=t.pageCount;if(n&&e!==this.state.selected&&e>=0&&e<a)return n(e+1)}},{key:"getPageElement",value:function(e){var t=this.state.selected,n=this.props,a=n.pageClassName,r=n.pageLinkClassName,i=n.activeClassName,l=n.activeLinkClassName,c=n.extraAriaContext;return o.default.createElement(s.default,{key:e,onClick:this.handlePageSelected.bind(null,e),selected:t===e,pageClassName:a,pageLinkClassName:r,activeClassName:i,activeLinkClassName:l,extraAriaContext:c,href:this.hrefBuilder(e),page:e+1})}},{key:"render",value:function(){var e=this.props,t=e.disabledClassName,n=e.previousClassName,a=e.nextClassName,r=e.pageCount,i=e.containerClassName,s=e.previousLinkClassName,l=e.previousLabel,c=e.nextLinkClassName,u=e.nextLabel,f=this.state.selected,p=n+(0===f?" "+t:""),d=a+(f===r-1?" "+t:"");return o.default.createElement("ul",{className:i},o.default.createElement("li",{className:p},o.default.createElement("a",{onClick:this.handlePreviousPage,className:s,href:this.hrefBuilder(f-1),tabIndex:"0",role:"button",onKeyPress:this.handlePreviousPage},l)),this.pagination(),o.default.createElement("li",{className:d},o.default.createElement("a",{onClick:this.handleNextPage,className:c,href:this.hrefBuilder(f+1),tabIndex:"0",role:"button",onKeyPress:this.handleNextPage},u)))}}]),t}(r.Component);u.propTypes={pageCount:i.default.number.isRequired,pageRangeDisplayed:i.default.number.isRequired,marginPagesDisplayed:i.default.number.isRequired,previousLabel:i.default.node,nextLabel:i.default.node,breakLabel:i.default.node,hrefBuilder:i.default.func,onPageChange:i.default.func,initialPage:i.default.number,forcePage:i.default.number,disableInitialCallback:i.default.bool,containerClassName:i.default.string,pageClassName:i.default.string,pageLinkClassName:i.default.string,activeClassName:i.default.string,activeLinkClassName:i.default.string,previousClassName:i.default.string,nextClassName:i.default.string,previousLinkClassName:i.default.string,nextLinkClassName:i.default.string,disabledClassName:i.default.string,breakClassName:i.default.string},u.defaultProps={pageCount:10,pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousClassName:"previous",nextClassName:"next",previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:!1},t.default=u},993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),o=(a=r)&&a.__esModule?a:{default:a};t.default=function(e){var t=e.pageClassName,n=e.pageLinkClassName,a=e.onClick,r=e.href,i="Page "+e.page+(e.extraAriaContext?" "+e.extraAriaContext:""),s=null;return e.selected&&(s="page",i="Page "+e.page+" is your current page",t=void 0!==t?t+" "+e.activeClassName:e.activeClassName,void 0!==n?(n=n,void 0!==e.activeLinkClassName&&(n=n+" "+e.activeLinkClassName)):n=e.activeLinkClassName),o.default.createElement("li",{className:t},o.default.createElement("a",{onClick:a,role:"button",className:n,href:r,tabIndex:"0","aria-label":i,"aria-current":s,onKeyPress:a},e.page))}},994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),o=(a=r)&&a.__esModule?a:{default:a};t.default=function(e){var t=e.breakLabel,n=e.breakClassName||"break";return o.default.createElement("li",{className:n},t)}}}]);