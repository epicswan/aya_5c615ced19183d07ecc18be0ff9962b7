(window.webpackJsonp=window.webpackJsonp||[]).push([[12,15],{514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=(r=o)&&r.__esModule?r:{default:r};var i=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.index;return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"media mb-3","review-index":n},l.default.createElement("div",{className:"media-body"},t)),l.default.createElement("hr",null))}}]),t}(o.Component);t.default=i},515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=(r=o)&&r.__esModule?r:{default:r};var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={stars:new Array(5).fill(5)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.ui,r=e.className,a=this.state.stars;return n.rating&&l.default.createElement("span",{className:"mr-2 wrapper-stars"+(r?" "+r:"")},a.map((function(e,n){return n<t.rating&&l.default.createElement("i",{key:n,className:"fas fa-star"})||l.default.createElement("i",{key:n,className:"far fa-star"})})))||null}}]),t}(o.PureComponent);t.default=i},516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t.default=function(e){var t=e.ui,n=e.item;return t.dateItem&&r(n.DateItem).format(t.dateFormat)||null}},517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.ui,n=e.item;return t.msg&&n.msg&&o.default.createElement("div",{className:"mt-1"},n.msg)||null}},518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.ui,n=e.item,r=e.className;return t.title&&o.default.createElement("div",{className:r},n.title)||null}},519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.ui,n=e.item;return t.nameUser&&o.default.createElement("span",null,o.default.createElement("span",{className:"font-weight-bold"},n.name)," ")||null}},558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=h(o),i=h(n(462)),s=h(n(526)),u=h(n(28)),c=h(n(99)),f=h(n(81)),d=h(n(475)),p=h(n(559)),m=h(n(603));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b,y=u.default._Popup,g=u.default._loadScript,E=c.default.CancelToken,_=u.default._css,w=function(e){return console.log.bind(console,e)};u.default._store.getEnv().apiProd;n(560);var O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));k.call(n);var a=JSON.parse(JSON.stringify(n.props.schema)),o={},i={};e.autoAddUi&&(o={ratingWidget:p.default,captcha:N},i={recaptcha:{"ui:widget":"captcha","ui:options":{label:!1}},Note:{"ui:widget":"ratingWidget"},"ui:order":["Email","*"]},a.properties.Nom&&i["ui:order"].unshift("Nom"));var s=(n.props.blocks.find((function(e){return"media"===e.name}))||{item:null}).item,u="newsletter"===e.mep,c=u;e.addEmail&&(!localStorage.getItem("currentUser")||c||"edit"===e.mode?a.required.find((function(e){return"Email"===e}))||(a.required.push("Email"),a.properties.Email={type:"string",format:"email",title:"Email"}):(i["ui:order"]=i["ui:order"].filter((function(e){return"Email"!==e})),a.properties.Email&&(delete a.properties.Email,a.required=a.required.filter((function(e){return"Email"!==e})))));return n.state={schema:a,widgets:o,uiSchema:r({},n.props.uiSchema,i),error:null,item:s||null,bearer:{},isLoaded:!1,pathGet:n.props.url,pathSave:n.props.urlSave,cancelToken:null,keyForm:1,cta:(n.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta,mepRender:{full:function(e,t,r,a){return n.mepFull(!1,e,t,r,a)},"full-reverse":function(e,t,r,a){return n.mepFull(!0,e,t,r,a)},stack:function(e,t,r,a){return n.mepStack(!1,e,t,r,a)},"stack-reverse":function(e,t,r,a){return n.mepStack(!0,e,t,r,a)},newsletter:function(e,t,r,a){return n.mepNewsletter(e,t,r,a)},"only-map":function(e,t,r,a){return n.mepOnlyMap(e,r)}},pendingSend:!1,showSuccessMsg:!1,openedModal:!1},n.doValidation=n.doValidation.bind(n),n.refBtnSubmit=l.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"onAddressChange",value:function(e){var t="https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q="+encodeURI(e.target.value)+"&output=embed";this.setState({item:{src:t,address:e.target.value}}),this.props.onAction({action:"map_changed",params:this.state})}},{key:"postForm",value:function(e){var t=this,n=this.props,r=n.onSend,a=n.resourceId,o=n.idsChannels,l=o||[],i={data:e.formData,channels:l},s=(this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta;a&&(i.module_resource=a);var u={"Content-Type":"application/json"},f=localStorage.getItem("currentUser");f&&(u.Authorization="Bearer "+f),c.default.post(this.state.pathSave,i,{headers:u}).then((function(e){t.setState({pendingSend:!1,keyForm:t.state.keyForm+1,showSuccessMsg:!0,openedModal:!0},(function(){r(),!0===t.props.redirection&&(s.newOnglet?window.open(""+s.link,"_blank"):location.href=s.link)}))})).catch((function(e){console.log(e)}))}},{key:"doValidation",value:function(e){var t=this;console.log("good",e),this.setState({pendingSend:!0},(function(){t.postForm(e)}))}},{key:"fetchForm",value:function(){var e=this;this.state.uiSchema||c.default.get(this.state.pathGet,{cancelToken:new E((function(e){b=e}))}).then((function(t){e.setState({isLoaded:!0,schema:JSON.parse(t.data.fields)})}))}},{key:"componentDidMount",value:function(){var e=this;if(this.state.pathGet&&this.fetchForm(),"view"===this.props.mode){var t=this.state.cta;t&&(t.tpl="BtnBootstrapSubmit",t.onAction=function(t){e.refBtnSubmit.current&&e.refBtnSubmit.current.click()},g("https://www.google.com/recaptcha/api.js","js","recaptcha").then((function(){e.setState({cta:t})})))}}},{key:"componentWillMount",value:function(){console.log("props",this.props)}},{key:"componentWillUnmount",value:function(){b&&"function"==typeof b&&b()}},{key:"renderHiddenBtnSubmit",value:function(){return l.default.createElement("button",{ref:this.refBtnSubmit,type:"submit",className:"d-none"})}},{key:"renderBtnSubmit",value:function(e,t,n){var r=this.props,a=r.prefixCss,o=r.mode,i=r.onAction,s=this.state,u=s.cta,c=s.pendingSend;return n&&(u.class=u.class+" "+n),c?l.default.createElement("i",{className:"fas fa-spinner fa-pulse"}):l.default.createElement("div",{className:!1!==e?"mt-2":""},l.default.createElement(f.default,{prefixCss:a,mode:o,cta:u,style:t,onAction:i}))}},{key:"mepFull",value:function(e,t,n,a,o){var u=this,c=this.props,f=(c.mode,c.prefixCss),d=(c.onAction,this.state),p=d.schema,m=d.uiSchema,h=d.widgets;d.showErrorRecaptcha;return l.default.createElement("div",{key:"mepFull"},!e&&a&&this.renderMap(a),l.default.createElement(i.default,r({title:t},this.props),l.default.createElement("div",{className:_(f,"row")},l.default.createElement("div",{className:_(f,"col-12 col-md-12",e&&"order-2")},l.default.createElement("div",null,l.default.createElement(s.default,{schema:p,onError:w("errors"),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0,uiSchema:m,widgets:h,FieldTemplate:function(e){return l.default.createElement(S,r({useOnlyUiTitle:u.props.useOnlyUiTitle},e))}},this.renderHiddenBtnSubmit()),l.default.createElement("div",{className:"text-right"},this.renderBtnSubmit()))))),e&&this.renderMap(a))}},{key:"mepOnlyMap",value:function(e,t){var n={},a="mx-auto",o=r({},this.props);return this.props.ui.mapFullWdithScreen&&(n={marginLeft:"-15px",marginRight:"-15px"},o.containerCss="container-fluid",a=""),l.default.createElement(i.default,r({key:"mepOnlyMap",title:e},o),l.default.createElement("div",{className:a,style:n},this.renderMap(t,null,{minHeight:"500px",border:"0px",width:"100%"})))}},{key:"mepNewsletter",value:function(e){var t=this,n=this.props,a=(n.mode,n.prefixCss,n.onAction,this.state),o=a.schema,u=a.uiSchema,c=a.widgets,f=a.keyForm,d=r({Email:{classNames:"","ui:placeholder":"Entrez votre adresse email"}},u);return l.default.createElement(i.default,r({key:"mepNewsletter-"+f,title:e},this.props),l.default.createElement("div",{style:{maxWidth:"500px"},className:"mx-auto"},l.default.createElement("div",{className:"input-group mt-4"},l.default.createElement(s.default,{className:"rjsf form-newsletter",schema:o,uiSchema:d,onError:w("errors"),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0,widgets:c,FieldTemplate:function(e){var n=e.id,r=e.classNames,a=(e.label,e.help,e.required,e.rawErrors),o=(e.description,e.errors,e.children);return l.default.createElement("div",{className:r+" "},o,a&&a.length>0&&l.default.createElement(j,{errors:a}),"root_Email"===n&&l.default.createElement("div",{className:"text-center"},t.renderBtnSubmit(!0,null,"btn-block")))}},this.renderHiddenBtnSubmit()))))}},{key:"mepStack",value:function(e,t,n,a,o){var u,c=this,f=this.props,d=(f.mode,f.prefixCss),p=(f.onAction,f.ui),m=this.state,h=m.schema,b=m.uiSchema,y=m.widgets,g=(m.showErrorRecaptcha,a&&a.src&&p.map);return l.default.createElement(i.default,r({key:"mepStack",title:t},this.props),l.default.createElement("div",{className:_(d,"row")},l.default.createElement("div",{className:_(d,"col-12","col-md-6",!g&&"mx-auto",e&&"order-2")},l.default.createElement("div",null,l.default.createElement(s.default,(v(u={schema:h,uiSchema:b,onError:w("errors"),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0},"uiSchema",b),v(u,"widgets",y),v(u,"FieldTemplate",(function(e){return l.default.createElement(S,r({useOnlyUiTitle:c.props.useOnlyUiTitle},e))})),u),this.renderHiddenBtnSubmit()),l.default.createElement("div",{className:"text-right"},this.renderBtnSubmit()))),g&&l.default.createElement("div",{className:_(d,"col-12 col-md-6",e&&"order-1")},this.renderMap(a))))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null},r=this.state.cta;if(n&&r&&n.cta.link!==r.link){var a=r;a.link=n.cta.link,this.setState({cta:a})}}},{key:"render",value:function(){var e=this.props,t=e.mep,n=e.blocks,r=(e.prefixCss,e.mode),a=e.onAction,o=e.ui,i=(e.onSend,this.state),s=i.mepRender,u=i.item,c=i.showSuccessMsg,f=i.openedModal,p=(n.find((function(e){return"title"===e.name}))||{title:null}).title,m=(n.find((function(e){return"description"===e.name}))||{description:null}).description,h=(n.find((function(e){return"cta"===e.name}))||{cta:null}).cta,v=(n.find((function(e){return"msgSuccess"===e.name}))||{msgSuccess:{txt:'<p style="text-align:center;">Votre message a bien été envoyé. Nous y répondrons dès que possible.</p>'}}).msgSuccess;return[s[t]&&s[t](p,m,o.map&&u,h)||s["stack-reverse"](p,m,o.map&&u,h),l.default.createElement("div",{className:c?"":"d-none",key:"success-msg"},l.default.createElement(y,{contentStyle:{color:"initial",margin:"5rem auto auto auto",background:"none",padding:0,border:0},open:f,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},l.default.createElement("div",{className:"modal-content"},l.default.createElement("div",{className:"modal-header border-0 pb-0"},l.default.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},l.default.createElement("span",{"aria-hidden":"true"},"×"))),l.default.createElement("div",{className:"modal-body pt-0"},l.default.createElement("div",null,"edit"===r&&l.default.createElement("div",{"data-name-block":"block-success-msg",style:{display:"inline-flex",width:"100%"}},l.default.createElement(d.default,{content:v.txt,block:{name:"msgSuccess",index:0,key:"msgSuccess"},fordiddenKeyboard:["split-block"],onAction:function(e){a({action:"evt_draft",params:e})}})),"view"===r&&l.default.createElement("div",{dangerouslySetInnerHTML:{__html:v.txt}}))))))]}}]),t}(o.Component),k=function(){var e=this;this.closeModal=function(){e.setState({showSuccessMsg:!1,openedModal:!1}),e.props.onCloseModal()},this.renderMap=function(t,n,r){var a=e.props,o=a.ui,i=a.onAction,s=(a.mode,r||{width:"100%",height:(n||300)+"px",border:"0px"});return o.map&&t.src&&l.default.createElement("div",null,l.default.createElement("div",{style:s,onClick:function(){i({action:"click_iframe"})}},l.default.createElement("iframe",{style:s,className:"embed-responsive-item d-block",src:t.src,allowtransparency:"true",allowFullScreen:!0})))}};O.defaultProps={autoAddUi:!0,resourceId:null,addEmail:!0,uiSchema:{Message:{"ui:widget":"textarea"}},url:null,urlSave:null,ui:{map:!0,mapFullWdithScreen:!1},schema:{title:"",description:"",type:"object",required:["Email","Message","Nom","Note"],properties:{Nom:{type:"string",title:"Nom",minLength:2},Email:{type:"string",format:"email",title:"Email"},Note:{type:"number",enum:[1,2,3,4,5],title:"Note"},Message:{type:"string",title:"Message",minLength:8}}},onCloseModal:function(){},onAction:function(){},prefixCss:"",mep:"stack-reverse",mode:"view",sectionCss:"",containerCss:"container",bg:{class:"bg-white",img:{path:"https://images.unsplash.com/photo-1509624776920-0fac24a9dfda?ixlib=rb-0.3.5&s=dd42a6d…&auto=format&fit=crop&w=1350&q=80",class:"img-fluid"}},redirection:!1,blocks:[{name:"cta",cta:{txt:"Nous contacter",css:"",class:"btn-primary",link:"/faire-un-site-gratuitement.php",tpl:"BtnBootstrap",visible:!0,icon:{active:!0,css:"far fa-envelope"}}},{name:"title",title:{txt:"<h1>Demande d'informations</h1>",class:"",visible:!0}},{name:"description",description:{txt:"Pour toutes vos questions, veuillez remplir le formulaire ci-dessous"}},{name:"media",item:{src:"https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q=paris&output=embed",address:"paris",tpl:"iframe",visible:!0}}],useOnlyUiTitle:!1,onSend:function(){}};var S=function(e){var t=e.id,n=e.classNames,r=e.label,a=e.help,o=e.required,i=e.rawErrors,s=e.description,u=(e.errors,e.children),c=e.displayLabel,f=e.hidden,d=e.useOnlyUiTitle?e.uiSchema["ui:title"]:r;return l.default.createElement("div",{className:n+" "},c&&!f&&l.default.createElement("label",{className:"control-label",htmlFor:t},d,d&&o?"*":null),s,u,i&&i.length>0&&l.default.createElement(j,{errors:i}),l.default.createElement("small",{className:"form-text text-muted"}," ",a))},j=function(e){var t=e.errors;return l.default.createElement("ul",{className:"list-unstyled mt-2"},t.map((function(e,t){return l.default.createElement("li",{key:t,className:"text-danger"}," ",l.default.createElement(P,{msg:e})," ")})))},N=function(e){return l.default.createElement(m.default,{key:"captcha",sitekey:"6LcAZCkUAAAAAJ2XQcVz6M2qgiwypmqhT501lFvv",render:"explicit",hl:"fr",verifyCallback:function(t){(0,e.onChange)(t)},expiredCallback:function(t){(0,e.onChange)(t)}})},x={"is a required property":"Veuillez remplir ce champ",'should match format "email"':"Email non valide","should NOT be shorter than _X_ characters":"Veuillez allonger ce texte pour qu'il comporte au moins _X_ caractères","should NOT be longer than _X_ characters":"Veuillez réduire ce texte à _X_ caractères maximun"},P=function(e){var t=e.msg,n=t,r=n.match(/\d+/),a=0;return r&&(n=n.replace(r[0],"_X_"),a=r[0]),x[n]?x[n].replace("_X_",a):t};t.default=O},559:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=(r=o)&&r.__esModule?r:{default:r};var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseLeave=function(){n.setState({ratingPreview:0})},n.handleMouseOver=function(e){n.setState({ratingPreview:e+1})},n.handleClick=function(e){var t=n.props.onChange;n.setState({rating:e+1,ratingPreview:0},(function(){t(e+1)}))},n.state={stars:new Array(5).fill(5),rating:0,ratingPreview:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.stars,r=t.rating,a=t.ratingPreview;return l.default.createElement("span",{className:"mr-2 wrapper-stars",onMouseLeave:function(){return e.handleMouseLeave()}},n.map((function(t,n){return r&&n<r||a&&n<a?l.default.createElement("i",{key:n,className:"fas fa-star fa-2x cursor-pt",onMouseOver:function(){return e.handleMouseOver(n)},onClick:function(){return e.handleClick(n)}}):l.default.createElement("i",{key:n,className:"far fa-star fa-2x cursor-pt",onMouseOver:function(){return e.handleMouseOver(n)}})})))}}]),t}(o.PureComponent);t.default=i},560:function(e,t,n){var r=n(561);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(64)(r,a);r.locals&&(e.exports=r.locals)},561:function(e,t,n){(e.exports=n(63)(!1)).push([e.i,".rjsf #root_rgpd {\r\n  margin-right: 6px;\r\n}\r\n\r\n.radius-border-input-email input {\r\n  border-bottom-right-radius: 0;\r\n  border-top-right-radius: 0;\r\n}\r\n\r\n.rjsf.form-newsletter {\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n}\r\n\r\ndiv.field-error.has-error.has-danger .form-control {\r\n  border-color: var(--danger);\r\n  border-width: 1px;\r\n}\r\n",""])},602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(558),o=(r=a)&&r.__esModule?r:{default:r};t.default=o.default},710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=m(o),i=m(n(28)),s=m(n(602)),u=m(n(81)),c=m(n(289)),f=m(n(99)),d=m(n(462)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(711));function m(e){return e&&e.__esModule?e:{default:e}}var h=i.default._store.getEnv(),v=h.scheme,b=h.domain,y=h.subdomain,g=h.apiProd,E=h.domainApi,_=h.production;n(7).locale("fr");i.default._css;var w=i.default._Popup,O=i.default._loadScript,k=(v+"://"+(g?y:"form")+"."+(g?E:b)).replace("__API__","form"),S="/public/formulaire/__ID_FORM__/reponses",j=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.closeModal=function(){a.setState({modalIsOpen:!1})},a.onActionBtn=function(e){a.openModalAdd()},a.updateParamsUrl=function(e){var t=r({},a.state.paramsUrl);t[e.key]=e.value,a.loadItems(t,e.key+"_change")},a.FormReview=function(e){var t=a.state,r=t.isLoadedFormScript,o=t.propsForm,i=t.isLoadedFormSchema;return r&&i?l.default.createElement("div",null,l.default.createElement(n.FormRcpt,o)):l.default.createElement("div",{className:"text-center"},l.default.createElement("i",{className:"fas fa-spinner fa-spin"}))},a.btnAdd={name:"cta",tpl:"BtnBootstrap",type:"primary",class:"btn-primary",link:"",txt:"Laisser un avis",visible:!0,onAction:function(e){"edit"!=a.props.mode&&a.onActionBtn(e)}};var o=e.pathReviewsInWindow,i=e.idsChannels,u=e.reviews,c=!0;if(o){var f=a.getReviewData(o);u=f?f.reviews:{},c=!!f&&f.ui.comments}return a.state={canRender:c,isLoadedFormScript:!1,modalIsOpen:!1,cancelToken:null,forcePage:1,inLoading:!0,averageRating:3,nbRating:2,paramsUrl:{page:1},items:e.fake&&e.fakeItems||[],isLoadedFormSchema:!1,reviews:u,propsForm:{idsChannels:i,resourceId:e.resourceId,url:u.url,urlSave:u.urlSave,bg:{class:"bg-transparent"},ui:{map:!1},valPaddingB:2,valPaddingT:2,title:{visible:!1},mep:"full",blocks:[{name:"cta",cta:{txt:"Enregistrer",css:"",class:"btn-primary float-right",link:"",tpl:"BtnBootstrap",visible:!0}}],onSend:a.closeModal}},a.FormRcpt=s.default,S=S.replace("__ID_FORM__",u.id),a.refListing=l.default.createRef(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"findDeepValue",value:function(e,t,n){if(!e)return null;var r=t[n];return r?this.findDeepValue(e[r],t,n+1):e}},{key:"getReviewData",value:function(e){var t=e.split("::");return this.findDeepValue(window.__CFG_SITE,t,0)}},{key:"openModalAdd",value:function(){var e=this;if(s.default)this.setState({isLoadedFormScript:!0,modalIsOpen:!0});else{O(!1===_?"/assets/js/form-rcpt.min.js":v+"://editor."+b+"/assets/js/form-rcpt.min.js","js","form-rcpt").then((function(){e.FormRcpt=window.FormRcpt.default,e.setState({isLoadedFormScript:!0,modalIsOpen:!0})}))}this.state.isLoadedFormSchema||this.loadFormSchema()}},{key:"loadFormSchema",value:function(){var e=this,t=k+"/public/formulaire/"+this.state.reviews.id;f.default.get(t).then((function(t){e.setState((function(e){var n=e.propsForm;return{isLoadedFormSchema:!0,propsForm:r({},n,{schema:JSON.parse(t.data.fields)})}}))}))}},{key:"onActionPagination",value:function(e){var t=this;"page_change"===e.action&&this.setState({inLoading:!0},(function(){t.updateParamsUrl({key:"page",value:e.data.nextPage})}))}},{key:"loadItems",value:function(e,t){var n=this,a=k+S;"edit"==this.props.mode&&(a+="?no_cache=1");var o=this.props.resourceId,l=r({module_resource:o},e);f.default.get(a,{params:l}).then((function(r){var a=r.data.items,o=r.data,l=o.numItems,i=o.page,s=o.totalItems;a=n.transformItems(a),n.setState({items:a,numItems:l,page:i,totalItems:s,inLoading:!1,paramsUrl:e},(function(){if("page_change"===t){var e=n.refListing.current;if(e){var r=e.querySelector('[review-index="0"]');r&&$("html, body").animate({scrollTop:$(r).offset().top-55},750)}}}))})).catch((function(e){console.log("erreur!!",e)}))}},{key:"transformItems",value:function(e){return e.map((function(e){var t=JSON.parse(e.data),n=t.Nom,r=t.Note,a=t.Title,o=t.Message;return{title:a,name:n,rating:r,dateItem:e.created,msg:o}}))}},{key:"componentDidMount",value:function(){this.props.fake||!this.state.canRender?this.setState({inLoading:!1}):this.loadItems({page:1},"init")}},{key:"render",value:function(){var e=this,t=this.props,n=t.tpl,a=t.blocks,o=t.msgEmptyReponse,i=t.fake,s=t.ui,f=this.state,m=f.items,h=f.totalItems,v=f.numItems,b=f.forcePage,y=f.inLoading,g=(f.averageRating,f.nbRating,f.canRender),E=Math.ceil(h/v),_=b&&b-1||null,O=p[n]||p.Tpl01,k=(a&&a.find((function(e){return"title"===e.name}))||{title:null}).title,S=i?{pointerEvents:"none"}:{};return g?l.default.createElement(d.default,r({title:k},this.props),y&&l.default.createElement("div",{className:"text-center mx-auto"},l.default.createElement("i",{className:"fas fa-spinner fa-pulse"})),l.default.createElement("div",{className:y?"d-none":""},l.default.createElement("div",{className:"d-flex align-items-center mb-3","data-btn":"add-review"},l.default.createElement("span",{style:S},l.default.createElement(u.default,{cta:this.btnAdd}))),0===m.length&&l.default.createElement("div",null,"Aucun avis n'a encore été laissé ",o,", soyez le premier à laisser votre avis."),l.default.createElement("div",{ref:this.refListing},m.map((function(e,t){return l.default.createElement(O,{key:t,item:e,index:t,ui:s})}))),l.default.createElement("div",null,E>1&&l.default.createElement(c.default,{forcePage:_,pageCount:E,onAction:function(t){return e.onActionPagination(t)}})),l.default.createElement("div",null,l.default.createElement(w,{contentStyle:{color:"initial",margin:"auto auto auto",width:null,zIndex:1031,minWidth:"50%",background:"none",padding:0,border:0},open:this.state.modalIsOpen,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},l.default.createElement("div",{className:"modal-content"},l.default.createElement("div",{className:"modal-header"},l.default.createElement("h5",{className:"modal-title"},"Laissez un avis"),l.default.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},l.default.createElement("span",{"aria-hidden":"true"},"×"))),l.default.createElement("div",{className:"modal-body pt-0",style:{overflowY:"auto",overflowX:"hidden",padding:"0.2rem 1rem",maxHeight:"80vh"}},this.FormReview())))))):null}}]),t}(o.Component);j.defaultProps={mode:"view",tpl:"Tpl01",ui:{rating:!0,title:!0,msg:!0,dateFormat:"LL"},resourceId:null,reviews:{id:null,url:"",urlSave:""},blocks:[],msgEmptyReponse:"sur ce produit",fake:!1,fakeItems:null,pathReviewsInWindow:null},t.default=j},711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tpl03=t.Tpl02=t.Tpl01=void 0;var r=l(n(712)),a=l(n(713)),o=l(n(714));function l(e){return e&&e.__esModule?e:{default:e}}t.Tpl01=r.default,t.Tpl02=a.default,t.Tpl03=o.default},712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),i=(p(n(28)),p(n(514))),s=p(n(515)),u=p(n(516)),c=p(n(517)),f=p(n(518)),d=p(n(519));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(7).locale("fr");var v=function(e){function t(){return m(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=(e.item,e.index);e.ui;return l.default.createElement(i.default,{index:t},l.default.createElement("h6",{className:"mt-0 mb-0"},l.default.createElement(s.default,this.props),l.default.createElement(f.default,r({className:"d-inline"},this.props))),l.default.createElement("small",null,l.default.createElement(d.default,this.props),l.default.createElement(u.default,this.props)),l.default.createElement(c.default,this.props))}}]),t}(o.Component);t.default=v},713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),i=(p(n(28)),p(n(514))),s=p(n(515)),u=p(n(516)),c=p(n(517)),f=p(n(518)),d=p(n(519));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(7).locale("fr");var v=function(e){function t(){return m(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=(e.item,e.index);e.ui;return l.default.createElement(i.default,{index:t},l.default.createElement("div",{className:"d-flex"},l.default.createElement("div",{className:"d-flex flex-column"},l.default.createElement(d.default,this.props),l.default.createElement("small",null,l.default.createElement(u.default,this.props))),l.default.createElement(s.default,r({className:"ml-auto"},this.props))),l.default.createElement("strong",null,l.default.createElement(f.default,r({className:"mt-2"},this.props))),l.default.createElement(c.default,this.props))}}]),t}(o.Component);t.default=v},714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),i=(p(n(28)),p(n(514))),s=p(n(515)),u=p(n(516)),c=p(n(517)),f=p(n(518)),d=p(n(519));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(7).locale("fr");var v=function(e){function t(){return m(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=(e.item,e.index);e.ui;return l.default.createElement(i.default,{index:t},l.default.createElement("div",{className:"d-flex"},l.default.createElement("div",{className:"d-flex flex-column"},l.default.createElement(d.default,this.props),l.default.createElement("span",null,l.default.createElement("small",null,l.default.createElement(s.default,this.props),l.default.createElement(u.default,this.props))))),l.default.createElement("strong",null,l.default.createElement(f.default,r({className:"mt-2"},this.props))),l.default.createElement(c.default,this.props))}}]),t}(o.Component);t.default=v},816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(710),o=(r=a)&&r.__esModule?r:{default:r};t.default=o.default}}]);