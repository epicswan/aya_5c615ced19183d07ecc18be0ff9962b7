!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("UtilsRcpt"),require("BtnModeRcpt")):"function"==typeof define&&define.amd?define(["react","UtilsRcpt","BtnModeRcpt"],t):"object"==typeof exports?exports.MediaElementRcpt=t(require("react"),require("UtilsRcpt"),require("BtnModeRcpt")):e.MediaElementRcpt=t(e.React,e.UtilsRcpt,e.BtnModeRcpt)}("undefined"!=typeof self?self:this,function(e,t,a){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=2)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=i.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),u=n(c),m=a(4),f=n(m),d=a(5),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(d),g=a(1),b=n(g),h=b.default._getEmbedVideo,v=b.default._getEmbedMusic,y=function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showInputUrl:!1,typeInput:"video",linkToSet:e.item&&"iframe"===e.item.tpl&&e.item.srcOriginal||"",forms:{video:{placeholder:"Entrez l'URL de la vidéo",title:"Entrez l'URL de la vidéo Youtube, Vimeo, Dailymotion, etc...",action:"media_change_to_video"},music:{placeholder:"Entrez l'URL du lecteur audio",title:"Entrez l'URL du lecteur audio (Spotify,  Soundclound ou Youtube )",action:"media_change_to_music"},map:{placeholder:"Entrez la localisation",title:"Entrez la localisation",action:"media_change_to_map"}},propsBtnParams:{prefixCss:"we-",mode:"edit",showInputEditor:!1,editText:!1,cfgPopover:{pages:!0,link:!0,icon:!1,active:"pages",preferPlace:"above"},useIcon:!0,prefixBtn:"we-btn",useDesignCfg:!1,cta:{title:"Ajouter un lien sur l'image",txt:"",css:"we-btn-sm we-btn-secondary",link:"",icon:{active:!0,css:"fas fa-link fa-lg"},img:{height:"",path:""},visible:!0,order:0},onAction:function(e){return a.onActionParams(e)}}},a.setWrapperRef=a.setWrapperRef.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.cfgToolbar.visible&&document.addEventListener("mousedown",this.handleClickOutside);var e=this.props.item;if(e.img){var t=this.state.propsBtnParams;e.link&&(t.cta.link=e.link.link,t.cta.newOnglet="_blank"===e.link.target,this.setState({propsBtnParams:t}))}}},{key:"componentWillUnmount",value:function(){this.props.cfgToolbar.visible&&document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.showInputUrl(!1)}},{key:"onSubmitForm",value:function(e){e.preventDefault();var t=this.state,a=t.linkToSet,n=t.typeInput,i=t.forms,r=null;if("video"===n&&(r=h(a,{})),"music"===n&&(r=v(a,{})),"text"!==n&&"map"!==n||(r=a),"error"===r)return void alert("URL invalide ou plateforme non prise en charge par Wifeo.");var o=r;this.showInputUrl(!1);var l=i[n]&&i[n].action||"media_change_to_video";this.props.onAction({action:l,params:{url:o,srcOriginal:a}})}},{key:"showInputUrl",value:function(e,t){this.setState({showInputUrl:e,typeInput:t})}},{key:"onActionParams",value:function(e){var t=this,a=this.state.propsBtnParams;e&&e.params&&e.params.cta&&(a.cta=e.params.cta,this.setState({propsBtnParams:a},function(){var a={link:e.params.cta.link,target:e.params.cta.newOnglet?"_blank":"_self"};t.props.onAction({action:"change_params_media",params:a})}))}},{key:"getToolbar",value:function(e){var t=this,a=this.state,n=a.showInputUrl,i=a.typeInput,r=a.forms,o=a.propsBtnParams,s=this.props,c=s.cfgToolbar,m=s.onDelete,d="iframe"===e.tpl&&e.srcOriginal||"",p="we-btn we-btn-sm we-btn-secondary",g={margin:"0.10rem 0.25rem"},b=r[i];return"edit"===this.props.mode&&u.default.createElement("div",{style:{left:0,zIndex:n?5:4},className:"media_toolbar_actions we-d-flex we-justify-content-center"},u.default.createElement("div",{className:""},!n&&u.default.createElement("span",{className:"media_toolbar_actions_items"},c.image&&u.default.createElement("button",{style:g,title:"Ajouter une image",className:p,onClick:function(e){return t.props.onAction({action:"click_image",eventClick:e})}},u.default.createElement("i",{className:"fas fa-image fa-lg"})),c.video&&u.default.createElement("button",{style:g,title:"Ajouter une vidéo",className:p,onClick:function(){return t.showInputUrl(!0,"video")}},u.default.createElement("i",{className:"fas fa-video fa-lg"})),c.params&&e.img&&u.default.createElement("div",{style:l({},g,{display:"inline-block"})},u.default.createElement(f.default,o)),c.music&&u.default.createElement("button",{style:g,title:"Ajouter une musique ou une playlist",className:p,onClick:function(){return t.showInputUrl(!0,"music")}},u.default.createElement("i",{className:"fas fa-music fa-lg"})),c.imageSlide&&u.default.createElement("button",{style:g,title:"Ajouter une image supplémentaire",className:p,onClick:function(){return t.props.onAction({action:"add_image"})}},u.default.createElement("i",{className:"fas fa-plus fa-lg"})),c.map&&u.default.createElement("button",{style:g,title:"Ajouter une adresse",className:p,onClick:function(){return t.showInputUrl(!0,"map")}},u.default.createElement("i",{className:"fas fa-map-marked-alt fa-lg"})),c.trash&&u.default.createElement("button",{style:g,title:"Supprimer",className:p,onClick:function(){return m()}},u.default.createElement("i",{className:"fas fa-trash-alt fa-lg"})),c.custom&&c.custom.map(function(t,a){return u.default.createElement("button",{key:a,style:g,title:t.title,className:p+" "+t.btnCss,onClick:function(a){return t.onClick&&t.onClick(a,c.index,e)}},u.default.createElement("i",{className:t.iconCss}))})),n&&u.default.createElement("form",{ref:this.setWrapperRef,className:"we-w-100 we-d-flex we-flex-row we-justify-content-end media_toolbar_actions_items",onSubmit:function(e){return t.onSubmitForm(e)}},u.default.createElement("div",{className:"we-input-group"},u.default.createElement("input",{style:{borderColor:"#fff"},title:b.title,className:"we-form-control",type:"text",name:"",placeholder:b.placeholder,defaultValue:d,onChange:function(e){var a=e.target.value;t.setState({linkToSet:a})}}),u.default.createElement("button",{style:{cursor:"pointer"},type:"submit",className:"we-input-group-addon we-bg-white we-border-0"},u.default.createElement("i",{className:"we-btn-icon fas fa-check we-text-success"}))))))||null}},{key:"render",value:function(){var e=this.props,t=e.tpl,a=e.item,n=e.cfgToolbar,i=e.mode,r=p[a.tpl]||p[t]||p.img;return a&&a.visible?n.visible&&"view"!==i?u.default.createElement("span",{className:"d-block pos-rel w-100 h-100","data-media":a.tpl||t||"img"},this.getToolbar(a),u.default.createElement(r,this.props)):u.default.createElement(r,this.props):null}}]),t}(c.Component);y.defaultProps={mode:"view",tpl:"img",css:"",lazyload:!0,prefixCss:"",item:{},style:{},cfgToolbar:{visible:!1,image:!1,video:!1,music:!1,trash:!1},onAction:function(){},onDelete:function(){}},y.displayName="MediaElement",t.default=y},function(e,t){e.exports=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.iframe=t.imgLink=t.img=t.bgImg=t.bgImgLink=void 0;var i=a(0),r=n(i),o=a(1),l=n(o),s=l.default._css,c=t.bgImgLink=function(e){var t=e.item,a=e.css,n=e.children;return r.default.createElement("a",{className:a||"blog-image",href:t.link&&t.link.link,target:t.link&&t.link.target||"_self",style:{backgroundImage:"url('"+(t.img&&t.img.path)+"')",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"block"}},n)},u=t.bgImg=function(e){var t=e.item,a=e.css,n=e.onAction,i=e.children;return r.default.createElement("div",{onClick:function(e){n({action:"click_image",eventClick:e})},className:a+" "+(t.img.css||t.img.class||""),style:{backgroundImage:"url('"+(t.img&&t.img.path)+"')",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"block"}},i)},m=t.img=function(e){var t=e.item,a=e.css,n=e.onAction,i=e.onMouseMove,o=e.style,l=e.lazyload,s=t.img&&t.img.path||"",c=s&&"function"==typeof t.img.onloadImg?t.img.onloadImg:void 0;return r.default.createElement("img",{onMouseMove:i,alt:t.alt,onLoad:c,style:o,height:t.height,width:t.width,className:a+(l?" lazyload ":" ")+(t.img&&t.img.class||t.img&&t.img.css||""),src:s,onClick:function(e){n({action:"click_image",eventClick:e})},srcSet:l?"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==":t.srcSet,"data-expand":"300","data-srcset":t.srcSet||s+" 1x","data-sizes":"auto"})},f=t.imgLink=function(e){var t=e.item;return t.link&&t.link.link&&r.default.createElement("a",{href:t.link.link,target:t.link.target||"_blank"},m(e))||r.default.createElement("a",null,m(e))},d=t.iframe=function(e){var t=e.item,a=e.prefixCss,n=e.onAction;return r.default.createElement("div",{height:t.height,width:t.width,className:s(a,"embed-responsive",t.embedCss||"embed-responsive-16by9")+" "+(t.css||""),onClick:function(e){n({action:"click_iframe",eventClick:e})}},r.default.createElement("iframe",{className:s(a,"embed-responsive-item")+" lazyload","data-src":t.src,"data-expand":"300",allowtransparency:"true",allowFullScreen:!0}))};c.displayName="BgImgLink",u.displayName="BgImg",m.displayName="Img",f.displayName="ImgLink",d.displayName="Iframe"}])});