!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("UtilsRcpt"),require("axios"),require("BtnModeRcpt"),require("JSONSchemaForm"),require("moment"),require("ReactStripe"),require("SectionRcpt")):"function"==typeof define&&define.amd?define(["react","UtilsRcpt","axios","BtnModeRcpt","JSONSchemaForm","moment","ReactStripe","SectionRcpt"],t):"object"==typeof exports?exports.ShopCartRcpt=t(require("react"),require("UtilsRcpt"),require("axios"),require("BtnModeRcpt"),require("JSONSchemaForm"),require("moment"),require("ReactStripe"),require("SectionRcpt")):e.ShopCartRcpt=t(e.React,e.UtilsRcpt,e.axios,e.BtnModeRcpt,e.JSONSchemaForm,e.moment,e.ReactStripe,e.SectionRcpt)}("undefined"!=typeof self?self:this,function(e,t,a,n,o,r,s,i){return function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=8)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=r},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={visible:!1},a}return r(t,e),s(t,[{key:"formatPersoLabels",value:function(e,t,a){return l.default.createElement("tr",{key:t},l.default.createElement("td",{scope:"row"},l.default.createElement("small",null,l.default.createElement("b",{dangerouslySetInnerHTML:{__html:e.title}})),l.default.createElement("br",null),l.default.createElement("div",null,l.default.createElement("small",{dangerouslySetInnerHTML:{__html:e.data}}))))}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:function(){return e.setState({visible:!e.state.visible})}},!this.state.visible&&l.default.createElement("i",{className:"far fa-eye"}),this.state.visible&&l.default.createElement("i",{className:"far fa-eye-slash"}),"  ",this.props.btnName),this.state.visible&&l.default.createElement("div",null,l.default.createElement("table",{className:"table"},l.default.createElement("tbody",{className:"results_panier"},this.props.persos.map(function(t,a){return e.formatPersoLabels(t,a)})))))}}]),t}(i.Component);t.default=c},function(e,t){e.exports=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(9),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),u=n(d),m=a(10),f=n(m),p=a(4),h=(n(p),a(2)),v=n(h),b=a(11),g=n(b),y=a(12),E=n(y),_=a(13),I=n(_),S=a(14),N=n(S),k=a(16),C=n(k),w=a(17),x=n(w),O=a(18),M=n(O),T=a(19),A=n(T),L=a(3),P=n(L),F=a(1),j=n(F),R=a(5),B=n(R),D=a(20),q=n(D),U=a(7),G=a(21),V=a(22),H=n(V),J=j.default._getSrcSet,z=j.default._Popup,Y=j.default._debounce;a(23);var K,W=(v.default.CancelToken,j.default._store.getEnv()),Q=W.scheme,Z=W.domain,$=W.subdomain,X=W.apiProd,ee=W.domainApi,te=X?ee:Z,ae=X?$:"paiement",ne=X?$:"shop",oe=(Q+"://"+ae+"."+te).replace("__API__","paiement"),re=X?$:"api",se=(Q+"://"+re+"."+te).replace("__API__","platform"),ie=(Q+"://"+ne+"."+te).replace("__API__","shop"),le=[],ce=[{codeIso:"DE",nom:"Allemagne"},{codeIso:"AT",nom:"Autriche"},{codeIso:"BE",nom:"Belgique"},{codeIso:"CA",nom:"Canada"},{codeIso:"CN",nom:"Chine"},{codeIso:"ES",nom:"Espagne"},{codeIso:"FI",nom:"Finlande"},{codeIso:"FR",nom:"France (Hors DOM TOM)"},{codeIso:"GR",nom:"Grèce"},{codeIso:"IT",nom:"Italie"},{codeIso:"JP",nom:"Japon"},{codeIso:"LU",nom:"Luxembourg"},{codeIso:"NL",nom:"Pays-bas"},{codeIso:"PL",nom:"Pologne"},{codeIso:"PT",nom:"Portugal"},{codeIso:"CZ",nom:"République Tchèque"},{codeIso:"GB",nom:"Royaume-Uni"},{codeIso:"SE",nom:"Suède"},{codeIso:"CH",nom:"Suisse"},{codeIso:"DK",nom:"Danemark"},{codeIso:"US",nom:"Etats-Unis"},{codeIso:"HK",nom:"Hong-Kong"},{codeIso:"NO",nom:"Norvège"},{codeIso:"AU",nom:"Australie"},{codeIso:"SG",nom:"Singapour"},{codeIso:"IE",nom:"Irlande"},{codeIso:"NZ",nom:"Nouvelle-Zélande"},{codeIso:"KR",nom:"Corée du Sud"},{codeIso:"IL",nom:"Israel"},{codeIso:"ZA",nom:"Afrique du Sud"},{codeIso:"NG",nom:"Nigeria"},{codeIso:"CI",nom:"CÃ´te d'Ivoire"},{codeIso:"TG",nom:"Togo"},{codeIso:"BO",nom:"Bolivie"},{codeIso:"MU",nom:"Ile Maurice"},{codeIso:"RO",nom:"Roumanie"},{codeIso:"SK",nom:"Slovaquie"},{codeIso:"DZ",nom:"AlgÃ©rie"},{codeIso:"AS",nom:"Samoa AmÃ©ricaines"},{codeIso:"AD",nom:"Andorre"},{codeIso:"AO",nom:"Angola"},{codeIso:"AI",nom:"Anguilla"},{codeIso:"AG",nom:"Antigua et Barbuda"},{codeIso:"AR",nom:"Argentine"},{codeIso:"AM",nom:"ArmÃ©nie"},{codeIso:"AW",nom:"Aruba"},{codeIso:"AZ",nom:"AzerbaÃ¯djan"},{codeIso:"BS",nom:"Bahamas"},{codeIso:"BH",nom:"BahreÃ¯n"},{codeIso:"BD",nom:"Bangladesh"},{codeIso:"BB",nom:"Barbade"},{codeIso:"BY",nom:"BÃ©larus"},{codeIso:"BZ",nom:"Belize"},{codeIso:"BJ",nom:"BÃ©nin"},{codeIso:"BM",nom:"Bermudes"},{codeIso:"BT",nom:"Bhoutan"},{codeIso:"BW",nom:"Botswana"},{codeIso:"BR",nom:"BrÃ©sil"},{codeIso:"BN",nom:"BrunÃ©i Darussalam"},{codeIso:"BF",nom:"Burkina Faso"},{codeIso:"MM",nom:"Burma (Myanmar)"},{codeIso:"BI",nom:"Burundi"},{codeIso:"KH",nom:"Cambodge"},{codeIso:"CM",nom:"Cameroun"},{codeIso:"CV",nom:"Cap-Vert"},{codeIso:"CF",nom:"Centrafricaine, RÃ©publique"},{codeIso:"TD",nom:"Tchad"},{codeIso:"CL",nom:"Chili"},{codeIso:"CO",nom:"Colombie"},{codeIso:"KM",nom:"Comores"},{codeIso:"CD",nom:"Congo, RÃ©p. DÃ©m."},{codeIso:"CG",nom:"Congo, RÃ©p."},{codeIso:"CR",nom:"Costa Rica"},{codeIso:"HR",nom:"Croatie"},{codeIso:"CU",nom:"Cuba"},{codeIso:"CY",nom:"Chypre"},{codeIso:"DJ",nom:"Djibouti"},{codeIso:"DM",nom:"Dominica"},{codeIso:"DO",nom:"RÃ©publique Dominicaine"},{codeIso:"TL",nom:"Timor oriental"},{codeIso:"EC",nom:"Ã‰quateur"},{codeIso:"EG",nom:"Ã‰gypte"},{codeIso:"SV",nom:"El Salvador"},{codeIso:"GQ",nom:"GuinÃ©e Ã‰quatoriale"},{codeIso:"ER",nom:"Ã‰rythrÃ©e"},{codeIso:"EE",nom:"Estonie"},{codeIso:"ET",nom:"Ã‰thiopie"},{codeIso:"FK",nom:"Falkland,  ÃŽles"},{codeIso:"FO",nom:"FÃ©roÃ©,  ÃŽles"},{codeIso:"FJ",nom:"Fidji"},{codeIso:"GA",nom:"Gabon"},{codeIso:"GM",nom:"Gambie"},{codeIso:"GE",nom:"GÃ©orgie"},{codeIso:"GH",nom:"Ghana"},{codeIso:"GD",nom:"Grenade"},{codeIso:"GL",nom:"Groenland"},{codeIso:"GI",nom:"Gibraltar"},{codeIso:"GP",nom:"Guadeloupe"},{codeIso:"GU",nom:"Guam"},{codeIso:"GT",nom:"Guatemala"},{codeIso:"GG",nom:"Guernesey"},{codeIso:"GN",nom:"GuinÃ©e"},{codeIso:"GW",nom:"GuinÃ©e-Bissau"},{codeIso:"GY",nom:"Guyana"},{codeIso:"HT",nom:"HaÃƒÂ®ti"},{codeIso:"HM",nom:"Heard,  ÃŽle et Mcdonald,  ÃŽles"},{codeIso:"VA",nom:"Saint-Siege (Ã‰tat de la CitÃ© du Vatican)"},{codeIso:"HN",nom:"Honduras"},{codeIso:"IS",nom:"Islande"},{codeIso:"IN",nom:"Inde"},{codeIso:"ID",nom:"IndonÃ©sie"},{codeIso:"IR",nom:"Iran"},{codeIso:"IQ",nom:"Iraq"},{codeIso:"IM",nom:"Man,  ÃŽle de"},{codeIso:"JM",nom:"Jamaique"},{codeIso:"JE",nom:"Jersey"},{codeIso:"JO",nom:"Jordanie"},{codeIso:"KZ",nom:"Kazakhstan"},{codeIso:"KE",nom:"Kenya"},{codeIso:"KI",nom:"Kiribati"},{codeIso:"KP",nom:"CorÃ©e, RÃ©p. Populaire DÃ©m. de"},{codeIso:"KW",nom:"KoweÃ¯t"},{codeIso:"KG",nom:"Kirghizistan"},{codeIso:"LA",nom:"Laos"},{codeIso:"LV",nom:"Lettonie"},{codeIso:"LB",nom:"Liban"},{codeIso:"LS",nom:"Lesotho"},{codeIso:"LR",nom:"LibÃ©ria"},{codeIso:"LY",nom:"Libyenne, Jamahiriya Arabe"},{codeIso:"LI",nom:"Liechtenstein"},{codeIso:"LT",nom:"Lituanie"},{codeIso:"MO",nom:"Macao"},{codeIso:"MK",nom:"MacÃ©doine"},{codeIso:"MG",nom:"Madagascar"},{codeIso:"MW",nom:"Malawi"},{codeIso:"MY",nom:"Malaisie"},{codeIso:"MV",nom:"Maldives"},{codeIso:"ML",nom:"Mali"},{codeIso:"MT",nom:"Malte"},{codeIso:"MH",nom:"Marshall,  ÃŽles"},{codeIso:"MQ",nom:"Martinique"},{codeIso:"MR",nom:"Mauritanie"},{codeIso:"HU",nom:"Hongrie"},{codeIso:"YT",nom:"Mayotte"},{codeIso:"MX",nom:"Mexique"},{codeIso:"FM",nom:"MicronÃ©sie"},{codeIso:"MD",nom:"Moldova"},{codeIso:"MC",nom:"Monaco"},{codeIso:"MN",nom:"Mongolie"},{codeIso:"ME",nom:"MontÃ©nÃ©gro"},{codeIso:"MS",nom:"Montserrat"},{codeIso:"MA",nom:"Maroc"},{codeIso:"MZ",nom:"Mozambique"},{codeIso:"NA",nom:"Namibie"},{codeIso:"NR",nom:"Nauru"},{codeIso:"NP",nom:"NÃ©pal"},{codeIso:"AN",nom:"Antilles NÃ©erlandaises"},{codeIso:"NC",nom:"Nouvelle-CalÃ©donie"},{codeIso:"NI",nom:"Nicaragua"},{codeIso:"NE",nom:"Niger"},{codeIso:"NU",nom:"NiuÃ©"},{codeIso:"NF",nom:"Norfolk,  ÃŽle"},{codeIso:"MP",nom:"Mariannes du Nord,  ÃŽles"},{codeIso:"OM",nom:"Oman"},{codeIso:"PK",nom:"Pakistan"},{codeIso:"PW",nom:"Palaos"},{codeIso:"PS",nom:"Palestinien OccupÃ©, Territoire"},{codeIso:"PA",nom:"Panama"},{codeIso:"PG",nom:"Papouasie-Nouvelle-GuinÃ©e"},{codeIso:"PY",nom:"Paraguay"},{codeIso:"PE",nom:"PÃ©rou"},{codeIso:"PH",nom:"Philippines"},{codeIso:"PN",nom:"Pitcairn"},{codeIso:"PR",nom:"Porto Rico"},{codeIso:"QA",nom:"Qatar"},{codeIso:"RE",nom:"RÃ©union,  ÃŽle de la"},{codeIso:"RU",nom:"Russie, FÃ©dÃ©ration de"},{codeIso:"RW",nom:"Rwanda"},{codeIso:"BL",nom:"Saint-BarthÃ©lemy"},{codeIso:"KN",nom:"Saint-Kitts-et-Nevis"},{codeIso:"LC",nom:"Sainte-Lucie"},{codeIso:"MF",nom:"Saint-Martin"},{codeIso:"PM",nom:"Saint-Pierre-et-Miquelon"},{codeIso:"VC",nom:"Saint-Vincent-et-Les Grenadines"},{codeIso:"WS",nom:"Samoa"},{codeIso:"SM",nom:"Saint-Marin"},{codeIso:"ST",nom:"Sao TomÃ©-et-Principe"},{codeIso:"SA",nom:"Arabie Saoudite"},{codeIso:"SN",nom:"SÃ©nÃ©gal"},{codeIso:"RS",nom:"Serbie"},{codeIso:"SC",nom:"Seychelles"},{codeIso:"SL",nom:"Sierra Leone"},{codeIso:"SI",nom:"SlovÃ©nie"},{codeIso:"SB",nom:"Salomon,  ÃŽles"},{codeIso:"SO",nom:"Somalie"},{codeIso:"GS",nom:"GÃ©orgie du Sud et les  ÃŽles Sandwich du Sud"},{codeIso:"LK",nom:"Sri Lanka"},{codeIso:"SD",nom:"Soudan"},{codeIso:"SR",nom:"Suriname"},{codeIso:"SJ",nom:"Svalbard et  ÃŽle Jan Mayen"},{codeIso:"SZ",nom:"Swaziland"},{codeIso:"SY",nom:"Syrienne"},{codeIso:"TW",nom:"TaÃ¯wan"},{codeIso:"TJ",nom:"Tadjikistan"},{codeIso:"TZ",nom:"Tanzanie"},{codeIso:"TH",nom:"ThaÃ¯lande"},{codeIso:"TK",nom:"Tokelau"},{codeIso:"TO",nom:"Tonga"},{codeIso:"TT",nom:"TrinitÃ©-et-Tobago"},{codeIso:"TN",nom:"Tunisie"},{codeIso:"TR",nom:"Turquie"},{codeIso:"TM",nom:"TurkmÃ©nistan"},{codeIso:"TC",nom:"Turks et Caiques,  ÃŽles"},{codeIso:"TV",nom:"Tuvalu"},{codeIso:"UG",nom:"Ouganda"},{codeIso:"UA",nom:"Ukraine"},{codeIso:"AE",nom:"Ã‰mirats Arabes Unis"},{codeIso:"UY",nom:"Uruguay"},{codeIso:"UZ",nom:"OuzbÃ©kistan"},{codeIso:"VU",nom:"Vanuatu"},{codeIso:"VE",nom:"Venezuela"},{codeIso:"VN",nom:"Vietnam"},{codeIso:"VG",nom:" ÃŽles Vierges Britanniques"},{codeIso:"VI",nom:" ÃŽles Vierges des Ã‰tats-Unis"},{codeIso:"WF",nom:"Wallis et Futuna"},{codeIso:"EH",nom:"Sahara Occidental"},{codeIso:"YE",nom:"YÃ©men"},{codeIso:"ZM",nom:"Zambie"},{codeIso:"ZW",nom:"Zimbabwe"},{codeIso:"AL",nom:"Albanie"},{codeIso:"AF",nom:"Afghanistan"},{codeIso:"AQ",nom:"Antarctique"},{codeIso:"BA",nom:"Bosnie-HerzÃ©govine"},{codeIso:"BV",nom:"Bouvet,  ÃŽle"},{codeIso:"IO",nom:"OcÃ©an Indien, Territoire Britannique de L'"},{codeIso:"BG",nom:"Bulgarie"},{codeIso:"KY",nom:"CaÃ¯mans,  ÃŽles"},{codeIso:"CX",nom:"Christmas,  ÃŽle"},{codeIso:"CC",nom:"Cocos (Keeling),  ÃŽles"},{codeIso:"CK",nom:"Cook,  ÃŽles"},{codeIso:"GF",nom:"Guyane FranÃ§aise"},{codeIso:"PF",nom:"PolynÃ©sie FranÃ§aise"},{codeIso:"TF",nom:"Terres Australes FranÃ§aises"},{codeIso:"AX",nom:"Ãƒâ€¦land,  ÃŽles"}],de=null,ue=function(e){function t(e){r(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return me.call(a),a.state={url_seller:"https://seller.domain.com",user_uid:a.props.user_uid,shopModule:null,blogModule:null,paiementModule:null,memberModule:null,user_email:"",devise:{id:1,intitule:"Euro",codeIso:"EUR",sign:"€"},step:a.props.step,plugin:{id:0},orderItems:a.props.order.items?a.props.order.items:[],discounts:a.props.order.discounts?a.props.order.discounts:[],total:a.props.order.totalTtc,subtotal:a.props.order.subtotal,customer:a.props.order.customer,address:a.props.order.customer?a.props.order.customer.address:null,addressL:a.props.order.customer?a.props.order.customer.address:null,addressId:null,addressLId:null,livraison:null,livraison_metadata:null,paysAuth:[],paysFact:ce,bearer:{},order:a.props.order,uid:a.props.uid,magasin_id:a.props.magasinId,site_id:null,schema:a.props.schema,error:null,isLoaded:!0,canPay:!1,pathGet:a.props.url,sites:[],pathRecap:oe+"/api/factures/infos",cancelToken:null,sameAddress:!0,noSameAddressBox:!1,options:[],globalErrors:[],coupon_code:"",isTotalLoaded:!0,splitItems:[],keepSplitIndex:0,modalIsOpen:!1,modalPaymentNotActivedIsOpen:!1,siteToUpgrade:null,planSelected:null,sitesLoaded:!1,hasNdd:!1,showGlobalLoader:!1,firstInitResume:!0,cgvAccepted:!1},a.onIdentificationSuccess=a.onIdentificationSuccess.bind(a),a.onFacturationSuccess=a.onFacturationSuccess.bind(a),a.onLivraisonSuccess=a.onLivraisonSuccess.bind(a),a.onIdentificationFail=a.onIdentificationFail.bind(a),a.onPaiementSelected=a.onPaiementSelected.bind(a),a.onTrancheSelected=a.onTrancheSelected.bind(a),a.createPaiement=a.createPaiement.bind(a),a.onAfterModeLivraison=a.onAfterModeLivraison.bind(a),a.parseJwt=a.parseJwt.bind(a),a.removeItemFromCart=a.removeItemFromCart.bind(a),a.trancheFormat=a.trancheFormat.bind(a),a.optionsFormat=a.optionsFormat.bind(a),a.FacturationSelection=a.FacturationSelection.bind(a),a.sameAddress=a.sameAddress.bind(a),a.onOptionSelected=a.onOptionSelected.bind(a),a.setQtyToAdd=a.setQtyToAdd.bind(a),a.getCountryName=a.getCountryName.bind(a),a.manageCartValidity=a.manageCartValidity.bind(a),a.closeModal=a.closeModal.bind(a),a.closeModalPaymentNotActived=a.closeModalPaymentNotActived.bind(a),a.onSplitSelected=a.onSplitSelected.bind(a),a.splitCart=a.splitCart.bind(a),a.removeDiscountCart=a.removeDiscountCart.bind(a),a.removeOptionCart=a.removeOptionCart.bind(a),a.resetErrors=a.resetErrors.bind(a),a.showSiteCard=a.showSiteCard.bind(a),a.checkCart=a.checkCart.bind(a),a.onDidMountResume=a.onDidMountResume.bind(a),a.hasDownload=a.hasDownload.bind(a),a}return i(t,e),c(t,[{key:"onDidMountResume",value:function(){var e=this;this.state.firstInitResume&&this.setState({firstInitResume:!1},function(){e.checkCart(function(){e.checkFormule()})})}},{key:"checkFormule",value:function(){var e=JSON.parse(localStorage.getItem("cart_items"))?JSON.parse(localStorage.getItem("cart_items")):[],t=[],a=null,n=!1;for(var o in e)"cart-option"==e[o].catalog_item&&t.push(e[o].id),"formule"==e[o].catalog_item&&this.props.wifeoCart&&(localStorage.removeItem("currentUser"),n=!!(["domain_renew","domain_transfert","domain_create"].indexOf(e[o].sku)+1),n&&this.fetchCountriesNdd(),a="string"==typeof e[o].formuleGroupe?JSON.parse(e[o].formuleGroupe):e[o].formuleGroupe);this.setState({options:t,planSelected:a,hasNdd:n})}},{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("cart_items"))?JSON.parse(localStorage.getItem("cart_items")):[];if("final"!=this.props.step){var t=0,a=0;for(var n in e)t+=e[n].totalTtc,a+=e[n].totalTtc;var o=null,r=null,s=null,i=null;if(void 0!==window.__UID_SITE){var l=window.__UID_SITE.filter(function(e){return"membership"==e.nom});l.length>0&&(i=l[0].uid);var c=window.__UID_SITE.filter(function(e){return"paiement"==e.nom});c.length>0&&(s=c[0].distant_id);var d=window.__UID_SITE.filter(function(e){return"shop"==e.nom});d.length>0&&(o=d[0].distant_id);var u=window.__UID_SITE.filter(function(e){return"blog"==e.nom});u.length>0&&(r=u[0].distant_id)}var m={id:1,intitule:"Euro",codeIso:"EUR",sign:"€"};void 0!==window.__CFG_SITE&&window.__CFG_SITE.shop.commun&&window.__CFG_SITE.shop.commun.devise&&(m=window.__CFG_SITE.shop.commun.devise),this.setState({total:t,subtotal:a,orderItems:e,devise:m,magasin_id:o,blogModule:r,paiementModule:s,memberModule:i}),void 0!==window.NavBarHeader&&window.NavBarHeader.setState({menuItemsCart:e})}else this.getFacture(),localStorage.removeItem("cart_items"),void 0!==window.NavBarHeader&&window.NavBarHeader.setState({menuItemsCart:[]});this.state.step}},{key:"fetchCountriesNdd",value:function(){var e=this,t=localStorage.getItem("currentUser")?localStorage.getItem("currentUser"):"";v.default.defaults.headers.common.Authorization="Bearer "+t,v.default.get(se+"/public/ndd/country").then(function(t){e.setState({countriesNdd:t.data.data&&t.data.data.filter(function(e){return"yes"==e.cee||14==e.id||54==e.id})})})}},{key:"setCouponCode",value:function(){}},{key:"resetErrors",value:function(){this.setState({globalErrors:[]})}},{key:"showErrors",value:function(e){void 0!==e&&e.response&&401===e.response.status&&void 0!==e.response.data.errors&&this.setState({globalErrors:e.response.data.errors})}},{key:"getCountryName",value:function(e){var t="",a=ce.filter(function(t){return t.codeIso==e});return 1==a.length&&(t=a[0].nom),t}},{key:"setQtyToAdd",value:function(e,t){var a=this,n=parseInt(e||1,10);t.metadata&&t.metadata.length>0?this.debounceCheckMetaAndCart(n,t,function(){a.updateItemsAndCheckCart(n,t)}):this.updateItemsAndCheckCart(n,t)}},{key:"updateItemsAndCheckCart",value:function(e,t){var a=this,n=this.state.orderItems;if(t.perso_id)for(var o in n)t.perso_id==n[o].perso_id&&(n[o].quantity=e);else for(var o in n)t.id==n[o].id&&(n[o].quantity=e);this.setState({orderItems:n},function(){a.debounceCheckCart()})}},{key:"FacturationSelection",value:function(e){this.setState({sameAddress:Boolean(e)})}},{key:"getFacture",value:function(){this.setState({isLoaded:!1});var e=new URL(window.location.href),t={num_c:e.searchParams.get("num_c"),num_c_k:e.searchParams.get("num_c_k")},a=Object.entries(t).map(function(e){return e.join("=")}).join("&"),n=localStorage.getItem("currentUser");if(!n)return!1;var o=this.parseJwt(n),r=localStorage.getItem("currentUser")?"Bearer "+localStorage.getItem("currentUser"):"",s=this;v.default.post(this.state.pathRecap+"?"+a,{uid:o.username},{headers:{Authorization:r,"Content-Type":"application/json"}}).then(function(e){e.data?e.data.number&&s.setState({order:e.data,isLoaded:!0,orderItems:e.data.items,discounts:e.data.discounts,total:e.data.totalTtc,subtotal:e.data.subtotal}):alert("Une erreur est survenue!!")}).catch(function(e){s.showErrors(e)})}},{key:"parseJwt",value:function(e){var t=e.split(".")[1],a=t.replace("-","+").replace("_","/");return JSON.parse(window.atob(a))}},{key:"checkMetaAndCart",value:function(e,t,a){var n=this,o=e,r=t.metadata.find(function(e){return["ndd_create","ndd_renew","ndd_transfer"].indexOf(e.ndd_action)>-1}),s=10;if(r){var i=r.ndd_action,l=r.domain_name;"ndd_renew"===i?this.setState({showGlobalLoader:!0},function(){var e={domain_name:l,quantite:o,ndd_action:i};v.default.post(se+"/public/ndds/valides/quantites",e,{headers:{"Content-Type":"application/json"}}).then(function(){n.setState({showGlobalLoader:!1},function(){a()})}).catch(function(e){e.response.data.max_renew&&(s=e.response.data.max_renew,alert("Vous pouvez acheter au maximum jusqu'à "+s+" an(s).")),n.setState({showGlobalLoader:!1})})}):"ndd_create"===i&&o<=10||"ndd_transfer"===i&&1==o?a():alert("Vous pouvez acheter au maximum jusqu'à "+s+" an(s).")}else a()}},{key:"checkCart",value:function(e){var t=this;this.setState({isTotalLoaded:!1,isLoaded:!1}),"panier"==this.state.step&&this.setState({isTotalLoaded:!1,isLoaded:!0});var a={site_uid:this.props.uid,magasin_id:this.state.magasin_id,items:this.state.orderItems,options:this.state.options,coupon_code:this.state.coupon_code};this.setState({showGlobalLoader:!0},function(){var n=t;v.default.post(ie+"/public/shop/factures",a,{headers:{"Content-Type":"application/json"}}).then(function(t){n.isCartStillValid(t.data)?(localStorage.setItem("cart_items",JSON.stringify(t.data.invoice.items)),void 0!==window.NavBarHeader&&window.NavBarHeader.setState({menuItemsCart:t.data.invoice.items}),n.setState({orderItems:t.data.invoice.items,discounts:t.data.invoice.discounts,subtotal:t.data.invoice.subtotal,total:t.data.invoice.totalTtc,isTotalLoaded:!0,isLoaded:!0,showGlobalLoader:!1},function(){"function"==typeof e&&e()})):n.setState({showGlobalLoader:!1},function(){n.manageCartValidity()})}).catch(function(e){n.setState({showGlobalLoader:!1},function(){n.showErrors(e)})})})}},{key:"isCartStillValid",value:function(e){var t=e.invoice.items,a=0;for(var n in t)"formule"==t[n].catalog_item&&a++,"product"==t[n].catalog_item&&a++;return 0!=a}},{key:"manageCartValidity",value:function(){alert("les produits ne sont plus disponibles"),localStorage.setItem("cart_items",JSON.stringify([])),this.setState({step:"panier",orderItems:[]})}},{key:"buildExclusionItems",value:function(e){var t=new Array;e.length>=2&&(t=new Array(e.length));for(var a=JSON.parse(JSON.stringify(this.state.orderItems)),n=0;n<e.length;n++)for(var o=0;o<a.length;o++)a[o].id==e[n]&&(t.length>=2?t[n]=a[o]:t.push(a[o]),a.splice(o,1));var r=[];t.forEach(function(e){r.push([e])}),a.length>0&&r.push(a),this.setState({splitItems:r})}},{key:"onIdentificationSuccess",value:function(e){var t=this;localStorage.setItem("currentUser",e.token);JSON.stringify({token:e.token});void 0!==window.NavBarHeader&&window.NavBarHeader.setState({showLogin:!0});var a=this.parseJwt(e.token),n={user_uid:a.username,site_uid:this.props.uid,magasin_id:this.state.magasin_id,items:this.state.orderItems,options:this.state.options,coupon_code:this.state.coupon_code};this.setState({isLoaded:!1},function(){var o=t;v.default.post(ie+"/public/shop/factures",n,{headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}}).then(function(t){o.setState({isLoaded:!0},function(){if(o.isCartStillValid(t.data))if(0==t.data.produitsALivrer.length&&0==t.data.hasMatchingTranches)if(t.data.availableTranches.length>0)a.username&&o.setState({user_uid:a.username,user_email:e.email,bearer:"Bearer "+e.token,paysAuth:t.data.paysAuth,step:3});else if(o.props.wifeoCart){var n=t.data.invoice.items.filter(function(e){return"formule"!=e.catalog_item});if(0==n.length){var r=t.data.invoice.discounts.filter(function(e){return 1==e.is_free_delivery});r.length>0&&o.setState({discounts:[]})}a.username&&(o.loadSites(),o.setState({user_uid:a.username,user_email:e.email,paysAuth:t.data.paysAuth,bearer:"Bearer "+e.token,step:2,sameAddress:!1,noSameAddressBox:!0}))}else a.username&&o.setState({user_uid:a.username,user_email:e.email,paysAuth:t.data.paysAuth,bearer:"Bearer "+e.token,step:5,sameAddress:!1,noSameAddressBox:!0});else void 0!==t.data.availableTransporteurs&&void 0!==t.data.availableTransporteurs.transporteurs&&(t.data.availableTransporteurs.exclus.length>0?(o.setState({modalIsOpen:!0}),o.buildExclusionItems(t.data.availableTransporteurs.exclus)):a.username&&o.setState({user_uid:a.username,user_email:e.email,paysAuth:t.data.paysAuth,bearer:"Bearer "+e.token,step:3}));else o.manageCartValidity()})}).catch(function(e){o.setState({isLoaded:!0},function(){o.showErrors(e)})})})}},{key:"loadSites",value:function(){var e=localStorage.getItem("currentUser")?"Bearer "+localStorage.getItem("currentUser"):"",t=this;v.default.get(se+"/api/sites/me",{headers:{Authorization:e,"Content-Type":"application/json"}}).then(function(e){var a=e.data;a.reverse(),t.setState({sites:a,sitesLoaded:!0})}).catch(function(e){t.showErrors(e)})}},{key:"onFacturationSuccess",value:function(e,t){var a=localStorage.getItem("currentUser")?"Bearer "+localStorage.getItem("currentUser"):"",n=this;delete e.id;var o=e.birth_date;e.birth_date&&(e.birth_date=(0,B.default)(e.birth_date).format("YYYY/MM/DD")),e.association_date&&(e.association_date=(0,B.default)(e.association_date).format("YYYY/MM/DD"));var r=n.props.wifeoCart?"user":"membership",s=X?$:r,i=(Q+"://"+s+"."+te).replace("__API__",r),l=i+"/api/addresses";v.default.post(l,e,{headers:{Authorization:a,"Content-Type":"application/json"}}).then(function(t){n.setState({address:e,addressId:t.data.id,step:6})}).catch(function(a){"function"==typeof t&&t(a),e.birth_date=o,n.showErrors(a)})}},{key:"onLivraisonSuccess",value:function(e){var t=localStorage.getItem("currentUser")?"Bearer "+localStorage.getItem("currentUser"):"",a=this;delete e.id;var n=e.birth_date;e.birth_date&&(e.birth_date=(0,B.default)(e.birth_date).format("YYYY/MM/DD")),e.association_date&&(e.association_date=(0,B.default)(e.association_date).format("YYYY/MM/DD"));var o=a.props.wifeoCart?"user":"membership",r=X?$:o,s=(Q+"://"+r+"."+te).replace("__API__",o),i=s+"/api/addresses";v.default.post(i,e,{headers:{Authorization:t,"Content-Type":"application/json"}}).then(function(t){a.setState({addressL:e,addressLId:t.data.id,step:4})}).catch(function(t){e.birth_date=n,a.showErrors(t)})}},{key:"onIdentificationFail",value:function(e){alert("Identification impossible. Vérifier vos accès. ")}},{key:"optionsPaiementFormat",value:function(e){return u.default.createElement("span",{key:e.id}," ",u.default.createElement("img",{src:e.logo,style:{height:"30px",width:"30px"}})," ",e.moyen_paiement_officiel.label," ")}},{key:"splitFormat",value:function(e,t){function a(e,t){function a(e){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(2)}var r=null;void 0!==e.promos&&e.promos.length>0&&(r=e.promos[0]);var s=r?"<del>"+a(e.totalTtcBeforeDiscount)+n.sign+"</del>":"",i=r?'<span class="badge badge-danger">-'+parseFloat(r.value).toFixed(2)+(1==r.is_percent?"%":n.sign)+"</span>":"",l="";if(e.metadata,e.image_url){var c,d=null,m="";if("{"===e.image_url.charAt(0)){var f=JSON.parse(e.image_url);d=J(f),m=f[160]||f.default}else m=e.image_url;l=u.default.createElement("img",(c={className:"img img-fluid lazyload",srcSet:d,src:m,sizes:"20px"},o(c,"src",e.image_url),o(c,"style",{width:"20px"}),c))}return u.default.createElement("tr",{key:e.id},u.default.createElement("td",{scope:"row"},l),u.default.createElement("td",null,u.default.createElement("b",null," ",e.name)," ",""),u.default.createElement("td",null,a(e.unit_costTtc),n.sign," ",u.default.createElement("br",null),u.default.createElement("span",{dangerouslySetInnerHTML:{__html:i}})),u.default.createElement("td",null,e.quantity," x"),u.default.createElement("td",{className:"text-right"},a(e.totalTtcBeforeCoupon),n.sign," ",u.default.createElement("br",null),u.default.createElement("span",{dangerouslySetInnerHTML:{__html:s}})))}var n=this.currency;return u.default.createElement("div",{className:"table-responsive",key:t},u.default.createElement("table",{className:"table"},e.map(function(e,t){return u.default.createElement("tbody",{key:t},a(e,t))})))}},{key:"optionsFormat",value:function(e){var t=e.prixHt,a=0;void 0!==e.groupeRegleTaxe&&(a=e.groupeRegleTaxe.tempTaux);var n=1+a/100,o=t*n;o=parseFloat(Math.round(100*parseFloat(o))/100).toFixed(2);var r="";return e.freeAfter>0&&(r="Gratuit à partir de "+e.freeAfter+" "+this.state.devise.sign),u.default.createElement("span",{key:e.id}," ",u.default.createElement("img",{src:e.imageUrl,style:{height:"30px",width:"30px"}})," ",e.titre," ",o," ",this.state.devise.sign," ",u.default.createElement("p",null,u.default.createElement("small",null,u.default.createElement("small",null,e.description))),u.default.createElement("p",null,u.default.createElement("small",null,u.default.createElement("small",null," ",r))))}},{key:"trancheFormat",value:function(e,t){var a=parseFloat(e.prixHt*t).toFixed(2),n=void 0!==e.fdpOffertsAPartirDe&&parseFloat(e.fdpOffertsAPartirDe)<999999999,o="";n&&(o=u.default.createElement("small",null,"Gratuit à partir de"," ",parseFloat(Math.round(100*parseFloat(e.fdpOffertsAPartirDe))/100).toFixed(2)," ",this.state.devise.sign));return a=0==a?"":a+" "+this.state.devise.sign,parseFloat(this.state.total)>parseFloat(e.fdpOffertsAPartirDe)&&(a=u.default.createElement("small",null,u.default.createElement("small",null,"OFFERT")),o=""),u.default.createElement("span",{key:e.id,style:{cursor:"pointer"}}," ",u.default.createElement("img",{src:e.logo,style:{height:"30px",width:"30px"}})," ",e.nom," ",a,u.default.createElement("br",null),o)}},{key:"onPaiementSelected",value:function(e){this.setState({canPay:!0,plugin:{id:e.moyen_paiement_officiel.id}})}},{key:"onOptionSelected",value:function(e){var t=this,a=e;this.setState({options:a},function(){t.checkCart()})}},{key:"onSplitSelected",value:function(e){this.setState({keepSplitIndex:e})}},{key:"splitCart",value:function(){var e=this,t=this.state.splitItems[this.state.keepSplitIndex];void 0!==t&&this.setState({orderItems:t,modalIsOpen:!1},function(){e.checkCart()})}},{key:"sameAddress",value:function(e){this.setState({address:this.state.addressL,addressId:this.state.addressLId,step:6})}},{key:"onAfterModeLivraison",value:function(){this.setState({isLoaded:!1});var e={user_uid:this.state.user_uid,site_uid:this.state.site,magasin_id:this.state.magasin_id,items:this.state.orderItems,address_livraison:this.state.addressLId,livraison:this.state.livraison,livraison_metadata:this.state.livraison_metadata,options:this.state.options,coupon_code:this.state.coupon_code},t=this;v.default.post(ie+"/public/shop/factures",e,{headers:{"Content-Type":"application/json"}}).then(function(e){t.isCartStillValid(e.data)?t.setState({step:5,isLoaded:!0,orderItems:e.data.invoice.items,discounts:e.data.invoice.discounts,total:e.data.invoice.totalTtc,subtotal:e.data.invoice.subtotal}):t.manageCartValidity()}).catch(function(e){t.showErrors(e)})}},{key:"onTrancheSelected",value:function(e){var t=null;e.collectingPoint&&(t={collectingPoint:e.collectingPoint,postNumber:e.postNumber,presta:e.presta}),this.setState({livraison_metadata:t,livraison:e.id})}},{key:"createPaiement",value:function(){if(["PRO","PREMIUM"].indexOf(window.__PLAN_SITE)<0)return void this.setState({modalPaymentNotActivedIsOpen:!0});this.setState({isLoaded:!1});var e={plugin_id:this.state.plugin.id,user_uid:this.state.user_uid,site_uid:this.state.site,magasin_id:this.state.magasin_id,paiement_id:this.state.paiementModule,items:this.state.orderItems,address:this.state.addressId,livraison_metadata:this.state.livraison_metadata,address_livraison:this.state.addressLId,livraison:this.state.livraison,options:this.state.options,coupon_code:this.state.coupon_code};this.props.wifeoCart&&this.state.siteToUpgrade&&void 0!==this.state.siteToUpgrade.id&&(e.siteToUpgrade=this.state.siteToUpgrade.id);var t=this;v.default.post(ie+"/public/shop/factures",e,{headers:{"Content-Type":"application/json"}}).then(function(a){a.data.redirect?9==e.plugin_id?(de=(0,G.loadStripe)(JSON.parse(a.data.redirect).public_key),setTimeout(function(){t.setState({isLoaded:!0,stripe_client_secret:JSON.parse(a.data.redirect).client_secret,redirect_after_pay:JSON.parse(a.data.redirect).redirect_after_pay,step:7})},150)):(localStorage.setItem("cart_items",JSON.stringify([])),location.href=a.data.redirect):alert("Une erreur est survenue!!")}).catch(function(e){t.showErrors(e)})}},{key:"greetingsFinal",value:function(){if(this.state.order.customer){var e="",t="<br><br>Un email de confirmation vous a été envoyé à <b>"+this.state.order.customer.email+"</b>.",a=" Vous pouvez vous connecter à votre espace membre pour consulter l'état de votre commande.",n=this.state.order.totalTtc>0?this.arrondi(this.state.order.totalTtc,2):"";switch(this.state.order.paiement.plugin_id){case 5:var o=this.state.order.paiement.metadata,e="Merci de nous faire parvenir votre chèque suivant les modalités suivantes : <br>- Montant du chèque : <b>"+n+" "+this.state.order.currency_iso+"</b><br>- Référence de commande à inscrire au dos du chèque : <b>"+this.state.order.order_number+"</b><br>- Ordre du chèque : <b>"+o.nom_societe+"</b><br>- Adresse d'expédition du chèque : <b>"+o.nom_societe+", "+o.adresse+", "+o.code_postal+" "+o.ville+", "+o.pays+"</b>."+t+a;break;case 6:var o=this.state.order.paiement.metadata,e="Merci de nous faire parvenir votre virement suivant les modalités suivantes : <br>- Montant du virement : <b>"+n+" "+this.state.order.currency_iso+"</b><br>- Référence de commande à indiquer dans les infos de virement : <b>"+this.state.order.order_number+"</b><br>- Coordonnées bancaires pour le virement : <br>Titulaire du compte : <b>"+o.titulaire+"</b><br>Banque : <b>"+o.banque+"</b><br>IBAN : <b>"+o.iban+"</b><br>BIC : <b>"+o.bic+"</b>"+t+a;break;case 7:var o=this.state.order.paiement.metadata,e="Merci de vous rendre à l'adresse suivante avec votre paiement de <b>"+n+" "+this.state.order.currency_iso+"</b> en espèces et la référence de votre commande (<b>"+this.state.order.order_number+"</b>) :<br><b>"+o.nom_societe+", "+o.adresse+", "+o.code_postal+" "+o.ville+", "+o.pays+"</b>."+t+a;break;case 8:var o=this.state.order.paiement.metadata,e="Merci de nous faire parvenir votre virement suivant les modalités suivantes : <br>- Montant du virement : <b>"+n+" "+this.state.order.currency_iso+"</b><br>- Référence de commande à indiquer dans les infos de virement : <b>"+this.state.order.order_number+"</b><br>- Coordonnées bancaires pour le virement : <br>Titulaire du compte : <b>"+o.titulaire+"</b><br>Banque : <b>"+o.banque+"</b><br>IBAN : <b>"+o.iban+"</b><br>BIC : <b>"+o.bic+"</b>"+t+a;break;default:e="Votre paiement est en cours de traitement et votre commande a été enregistrée."+t+a}}return u.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})}},{key:"arrondi",value:function(e,t){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(t)}},{key:"thumbUrl",value:function(e){var t="https://editor.wifeosite.com/assets/img/wifeo_banner.png";return e.thumb?"53195f944d3200d82c9ca1fad3534ac6fe48eda9.jpeg"==e.thumb?t:e.thumb:t}},{key:"removeOrder",value:function(){}},{key:"onBlurCode",value:function(e){this.setState({coupon_code:e.target.value})}},{key:"removeOptionCart",value:function(e){var t=this,a=this.state.orderItems;for(var n in a)a[n].id==e&&a.splice(n,1);var o=this.state.options;for(var r in o)o[r]==e&&o.splice(r,1);this.setState({orderItems:a,options:o},function(){t.checkCart()})}},{key:"removeDiscountCart",value:function(){var e=this;this.setState({coupon_code:"",discounts:[]},function(){e.checkCart()})}},{key:"removeItemFromCart",value:function(e){var t=this,a=this.state.orderItems;for(var n in a)a[n].id==e&&a.splice(n,1);a.length>0?this.setState({orderItems:a},function(){t.checkCart()}):this.setState({orderItems:a}),localStorage.setItem("cart_items",JSON.stringify(a)),void 0!==window.NavBarHeader&&window.NavBarHeader.setState({menuItemsCart:a})}},{key:"upgradeSite",value:function(e){console.log("Site To Upgrade!!",e),this.setState({siteToUpgrade:e,step:5,sameAddress:!1,noSameAddressBox:!0})}},{key:"productToOrderItem",value:function(e,t){var a=parseFloat(1.2*e.prixHt),n=a*t-e.prixHt*t;return{id:e.id,object:null,catalog_item:"product",is_variation:e.isVariation,type:null,name:e.titre,description:e.description,quantity:t,sku:e.reference,unit_costTtc:a,unit_costHt:e.prixHt,totalTtc:a*t,totalHt:e.prixHt*t,totalTtcBeforeDiscount:a*t,totalHtBeforeDiscount:e.prixHt*t,totalDiscountHt:null,totalDiscountTtc:null,totalOptionsTtc:null,totalOptionsHt:null,totalTax:n,object_url:null,image_url:e.imageUrl,discountable:!1,discounts:[],taxable:null,taxes:[],metadata:""}}},{key:"createOrder",value:function(e,t,a){var n=JSON.parse(localStorage.getItem("cart_items"))?JSON.parse(localStorage.getItem("cart_items")):[],o=this.productToOrderItem(le[e],a),r=!1,s=0,i=0;for(var l in n)n[l].id==o.id&&(r=!0,n[l]=this.productToOrderItem(le[e],parseFloat(n[l].quantity)+1));r||n.push(o);for(var c in n)s+=n[c].totalTtc,i+=n[c].totalTtc;void 0!==window.NavBarHeader&&window.NavBarHeader.setState({menuItemsCart:n}),this.setState({orderItems:n,step:1,total:s,subtotal:i}),localStorage.setItem("cart_items",JSON.stringify(n))}},{key:"componentWillUnmount",value:function(){K&&"function"==typeof K&&K()}},{key:"hasDownload",value:function(){var e=!1;for(var t in this.state.orderItems)"product"==this.state.orderItems[t].catalog_item&&this.state.orderItems[t].is_virtual&&(e=!0);return e}},{key:"showSiteCard",value:function(e,t){var a=this,n=[];return n.FREE=1,n.PRO=2,n.PREMIUM=3,e.plan&&(e.plan.name,this.state.planSelected[0].nom),e.plan&&n[e.plan.name]>n[this.state.planSelected[0].nom]?null:this.state.hasNdd&&e.plan&&"FREE"===e.plan.name?null:u.default.createElement("div",{key:t,className:"col-12 col-sm-12 col-md-6 col-lg-4 mb-4"},u.default.createElement("div",{className:"card h-100 "},e.plan&&"PRO"==e.plan.name&&u.default.createElement("div",{className:"ribbon yellow"},u.default.createElement("span",null,"PRO")),e.plan&&"PREMIUM"==e.plan.name&&u.default.createElement("div",{className:"ribbon blue"},u.default.createElement("span",null,"PREMIUM")),u.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return a.upgradeSite(e)},style:{cursor:"pointer"}},u.default.createElement("img",{className:"card-img-top image-site",src:this.thumbUrl(e),alt:"Card image cap",style:{height:"195px",objectFit:"cover"}})),u.default.createElement("div",{className:"card-body"},u.default.createElement("p",{className:"card-text"},u.default.createElement("strong",null,e.domains[0].name)),u.default.createElement("p",{className:"card-text"},e.site_name),u.default.createElement("a",{href:"#",onClick:function(){return a.upgradeSite(e)},className:"btn btn-block btn-primary",style:{color:"white"}},u.default.createElement("i",{className:"fas fa-rocket"})," BOOSTEZ CE SITE"))))}},{key:"render",value:function(){var e=this,t=this.state,a=t.orderItems,n=t.discounts,o=t.total,r=t.subtotal,s=t.isLoaded,i=t.customer,c=t.address,d=t.addressL,m=t.uid,p=t.step,h=t.canPay,v=t.url_seller,b=t.order,y=t.sites,_=t.paiementModule,S=t.memberModule,k=(t.magasin_id,t.globalErrors),w=t.hasNdd,O=t.showGlobalLoader,T=t.cgvAccepted,L=this.props,F=(L.prefixClass,L.sectionClassName),j=L.bg,R=(L.blocks,L.mode,L.logo),B=(this.doValidation,this.onIdentificationSuccess,this.onIdentificationFail,this.onFacturationSuccess,this.splitFormat),D=(this.splitCart,"A quel site associer ce "+(w?"nom de domaine":"plan")+" ?");return u.default.createElement(f.default,this.props,u.default.createElement("div",{className:"container-fluid col-12 "+j.class+" "+F},""!=j.img.path&&u.default.createElement("img",{src:j.img.path,className:j.img.class}),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"container my-7"},this.props.show_title&&u.default.createElement("div",{className:"col-md-12 text-center"},u.default.createElement("br",null),u.default.createElement("div",null,u.default.createElement("h1",null," ",u.default.createElement("img",{src:R,className:"img_logo_boutique",height:"50px",style:{border:"1px solid #e7e7e7"}})," ",v)),u.default.createElement("br",null),u.default.createElement("br",null)),u.default.createElement("div",null,k.length>0&&u.default.createElement("div",{className:"alert alert-danger",role:"alert"},u.default.createElement("i",{className:"far fa-frown"}),u.default.createElement("button",{type:"button",className:"close",onClick:function(){e.resetErrors()},"aria-label":"Close"},u.default.createElement("span",{"aria-hidden":"true"},"×")),u.default.createElement("div",null,k.map(function(e,t){return u.default.createElement("span",{key:t},e.msg)})))),2===p&&u.default.createElement("div",null,u.default.createElement("h1",null,D),u.default.createElement("br",null),this.state.sitesLoaded&&0==y.length&&u.default.createElement("div",null,u.default.createElement("div",{className:"alert alert-danger",role:"alert"},u.default.createElement("i",{className:"far fa-frown"})," ",u.default.createElement("small",null,"Vous n'avez aucun site. Vous devez d'abord créer un site avant de commander un plan."))),this.state.sitesLoaded&&y.length>0&&u.default.createElement("div",{className:"d-flex row justify-content-center my-flex-container"},y.map(function(t,a){return e.showSiteCard(t,a)})),!this.state.sitesLoaded&&u.default.createElement("div",{className:"panier_loader"},u.default.createElement("div",{align:"center"},u.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),u.default.createElement("span",{className:"sr-only"},"Loading...")),u.default.createElement("div",{className:"front_h2",style:{marginTop:"20px"},align:"center"},"Chargement en cours ..."))),2!==p&&u.default.createElement("div",null,"panier"!==p&&u.default.createElement("div",{className:"d-flex row justify-content-center my-flex-container"},u.default.createElement("div",{className:"p-2 col-md-6 ",style:{background:"white"}},u.default.createElement("div",{className:"col-md-12  justify-content-end",style:{boxShadow:"2px 0 5px -5px #333"}},!s&&u.default.createElement("div",{className:"panier_loader"},u.default.createElement("div",{align:"center"},u.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),u.default.createElement("span",{className:"sr-only"},"Loading...")),u.default.createElement("div",{className:"front_h2",style:{marginTop:"20px"},align:"center"},"Chargement en cours ...")),s&&u.default.createElement("div",{id:"content_panier"},"final"!=p&&u.default.createElement("h2",null,"Votre Panier"),"final"==p&&u.default.createElement("h2",null,"Votre Commande"),a.length>0&&u.default.createElement(I.default,{canRemove:this.state.step<3,removeItem:this.removeItemFromCart,devise:this.state.devise.sign,orderItems:a,discounts:n,total:o,subtotal:r}),0==a.length&&u.default.createElement("div",null,"Votre Panier ne contient aucun article...")))),u.default.createElement("div",{className:"p-2 col-md-6 justify-content-start",style:{background:"white"}},u.default.createElement("div",{className:"col-md-12  justify-content-start"},1===p&&u.default.createElement("div",null,a.length>0&&u.default.createElement("div",null,s&&u.default.createElement("div",null,u.default.createElement("h2",null,"Informations client"),u.default.createElement(E.default,{wifeoCart:this.props.wifeoCart,customer:i,onIdentificationSuccess:this.onIdentificationSuccess,onIdentificationFail:this.onIdentificationFail,uid:S})))),3===p&&u.default.createElement("div",null,a.length>0&&u.default.createElement("div",null,u.default.createElement("h2",null,"Adresse de Livraison"),u.default.createElement(g.default,{wifeoCart:this.props.wifeoCart,paysAuth:this.state.paysAuth,address:d,onFacturationSuccess:this.onLivraisonSuccess}))),4===p&&u.default.createElement("div",null,a.length>0&&u.default.createElement("div",null,u.default.createElement("h2",null,"Mode de Livraison"),u.default.createElement("div",{className:"card col-md-12"},u.default.createElement("div",{className:"card-body"},u.default.createElement("h5",{className:"card-title"},"Adresse de Livraison"),this.state.addressL.company_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},this.state.addressL.company_name)," "),this.state.addressL.association_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},this.state.addressL.association_name)," "),!this.state.addressL.company_name&&!this.state.addressL.association_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},this.state.addressL.gender?"Mme":"Mr"," "," ",this.state.addressL.firstname," "," ",this.state.addressL.name)," "),u.default.createElement("p",{className:"card-text"},u.default.createElement("small",null,this.state.addressL.address," ",u.default.createElement("br",null),this.state.addressL.address2&&u.default.createElement("span",null,this.state.addressL.address2,u.default.createElement("br",null)),this.state.addressL.postal_code," "," ",this.state.addressL.town," ",u.default.createElement("br",null),this.getCountryName(this.state.addressL.country))))),u.default.createElement("br",null),u.default.createElement(A.default,l({},this.state,{uid:m,paiementId:_,optionsFormatting:this.trancheFormat,onAfterModeLivraison:this.onAfterModeLivraison,onSelected:this.onTrancheSelected})))),5===p&&u.default.createElement("div",null,a.length>0&&u.default.createElement("div",null,u.default.createElement("h2",null,"Adresse de Facturation"),0==this.state.noSameAddressBox&&u.default.createElement("div",null,u.default.createElement("ul",{className:"list-group"},u.default.createElement("li",{className:"list-group-item",onClick:function(){return e.FacturationSelection(1)},style:{cursor:"pointer",border:!0===this.state.sameAddress?"2px solid lightblue":"1px solid lightgrey"}},u.default.createElement("div",{className:"form-check-inline"},u.default.createElement("label",{className:"form-check-label"},u.default.createElement("input",{type:"radio",className:"form-check-input",checked:!0===this.state.sameAddress,onChange:function(){},name:"optradio"}),"Identique à l'adresse de livraison"))),u.default.createElement("li",{className:"list-group-item",onClick:function(){return e.FacturationSelection(0)},style:{cursor:"pointer",border:!1===this.state.sameAddress?"2px solid lightblue":"1px solid lightgrey"}},u.default.createElement("div",{className:"form-check-inline"},u.default.createElement("label",{className:"form-check-label"},u.default.createElement("input",{type:"radio",className:"form-check-input",checked:!1===this.state.sameAddress,onChange:function(){},name:"optradio"}),"Différente de l'adresse de livraison")))),u.default.createElement("br",null)),!1===this.state.sameAddress&&u.default.createElement(g.default,{wifeoCart:this.props.wifeoCart,paysAuth:this.state.paysFact,address:c,hasNdd:this.state.hasNdd,countriesNdd:this.state.countriesNdd,onFacturationSuccess:this.onFacturationSuccess}),!0===this.state.sameAddress&&u.default.createElement("div",{className:"text-right"},u.default.createElement(P.default,{cta:{txt:"Continuer",class:"btn-primary",link:"/",visible:!0,onAction:function(){e.sameAddress()}}})))),6===p&&s&&u.default.createElement("div",null,u.default.createElement("h2",null,"Mode de Paiement"),u.default.createElement(x.default,{total:this.state.total,uid:m,paiementId:_,optionsFormatting:this.optionsPaiementFormat,onSelected:this.onPaiementSelected}),u.default.createElement("br",null),u.default.createElement("div",{className:"col-md-12"},u.default.createElement("div",{className:"form-check"},u.default.createElement("input",{type:"checkbox",className:"form-check-input",onClick:function(){e.setState({cgvAccepted:!e.state.cgvAccepted})}}),u.default.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"J'ai lu et accepté les",u.default.createElement("a",{href:"/cgv",target:"_blank"}," conditions générales de vente."))),!T&&u.default.createElement("div",{className:"text-right"},u.default.createElement(P.default,{cta:{txt:"Payer",class:"btn-primary disabled",link:"/",visible:!0,onAction:function(){}}})," "),T&&u.default.createElement("div",{className:"text-right"},h&&u.default.createElement(P.default,{cta:{txt:"Payer",class:"btn-primary",link:"/",visible:!0,onAction:function(){e.createPaiement()}}})))),7===p&&s&&u.default.createElement("div",null,u.default.createElement("h2",null,"Payer ma commande"),u.default.createElement(U.Elements,{stripe:de},u.default.createElement(U.ElementsConsumer,null,function(t){var a=t.stripe,n=t.elements;return u.default.createElement(H.default,{stripe:a,elements:n,parent:e.state})})),u.default.createElement("br",null)),"final"===p&&u.default.createElement("div",null,b.customer.address&&u.default.createElement("div",null,u.default.createElement("h2",null,"Merci !"),u.default.createElement("p",null,"Votre commande porte le numéro"," ",b.order_number),u.default.createElement("div",{className:"card col-md-12"},u.default.createElement("div",{className:"card-body"},u.default.createElement("h5",{className:"card-title"},"Votre commande est confirmée!"),u.default.createElement("div",{className:"card-text"},u.default.createElement("small",null,this.greetingsFinal())))),u.default.createElement("br",null),this.hasDownload()&&[u.default.createElement("div",{className:"card col-md-12"},u.default.createElement("div",{className:"card-body"},u.default.createElement("h5",{className:"card-title"},"Téléchargements"),u.default.createElement("div",{className:"card-text"},u.default.createElement("small",null,"Une fois votre paiement confirmé, connectez-vous à votre compte et allez dans “Mes télechargements” pour télécharger votre produit."),u.default.createElement("div",{className:"mt-3 text-center"},u.default.createElement("a",{className:" btn btn-success btn-block",href:"/espace_reserve"},u.default.createElement("div",null,u.default.createElement("i",{className:"fas fa-download","aria-hidden":"true"})," Mes Téléchargements")))))),u.default.createElement("br",null)],u.default.createElement("div",{className:"card col-md-12"},u.default.createElement("div",{className:"card-body row"},u.default.createElement("div",{className:"col-md-6"},u.default.createElement("h5",{className:"card-title"},"Adresse de Facturation"),b.customer.address.company_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},b.customer.address.company_name)," "),!b.customer.address.company_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},b.customer.address.gender?"Mme":"Mr"," "," ",b.customer.address.firstname," "," ",b.customer.address.name)," "),b.customer.address.association_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},b.customer.address.association_name)," "),!b.customer.address.company_name&&!b.customer.address.association_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},b.customer.address.gender?"Mme":"Mr"," "," ",b.customer.address.firstname," "," ",b.customer.address.name)," "),u.default.createElement("p",{className:"card-text"},u.default.createElement("small",null,b.customer.address.address," ",u.default.createElement("br",null),b.customer.address.address2&&u.default.createElement("span",null,b.customer.address.address2,u.default.createElement("br",null)),b.customer.address.postal_code," "," ",b.customer.address.town," ",u.default.createElement("br",null),this.getCountryName(b.customer.address.country)))),b.delivery&&u.default.createElement("div",{className:"col-md-6"},u.default.createElement("h5",{className:"card-title"},"Adresse de Livraison"),b.delivery.address.company_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},b.delivery.address.company_name)," "),b.delivery.address.association_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},b.delivery.address.association_name)," "),!b.delivery.address.company_name&&!b.delivery.address.association_name&&u.default.createElement("small",null,u.default.createElement("p",{className:"card-text"},b.delivery.address.gender?"Mme":"Mr"," "," ",b.delivery.address.firstname," "," ",b.delivery.address.name)," "),u.default.createElement("p",{className:"card-text"},u.default.createElement("small",null,b.delivery.address.address," ",u.default.createElement("br",null),b.delivery.address.address2&&u.default.createElement("span",null,b.delivery.address.address2,u.default.createElement("br",null)),b.delivery.address.postal_code," "," ",b.delivery.address.town," ",u.default.createElement("br",null),this.getCountryName(b.delivery.address.country)))))),u.default.createElement("br",null),u.default.createElement("div",{className:"card col-md-12"},u.default.createElement("div",{className:"card-body"},u.default.createElement("h5",{className:"card-title"},"Mode de Paiement"),u.default.createElement("p",{className:"card-text"},u.default.createElement("small",null," ",b.paiement.name," ")))),u.default.createElement("br",null),this.props.btn_final&&u.default.createElement("div",{className:"text-right"},u.default.createElement("a",{href:this.props.btn_final.link,className:"btn btn-primary"},this.props.btn_final.text)))),this.props.termsUrl&&s&&a.length>0&&u.default.createElement("div",{className:"text-center"},u.default.createElement("p",null,u.default.createElement("small",null,u.default.createElement("a",{href:this.props.termsUrl||"/shop/conditions-generales-de-vente",target:"_blank",rel:"noopener noreferrer"},"Cliquez ici"),"  pour en savoir plus sur notre politique de confidentialité et le traitement de vos données personnelles"))))))),"panier"===p&&u.default.createElement("div",{className:"d-flex row justify-content-center my-flex-container"},u.default.createElement("div",{className:"p-2 col-md-12 ",style:{background:"white"}},u.default.createElement("div",{className:"col-md-12  justify-content-end"},u.default.createElement("div",{className:"card col-md-12",style:O?{opacity:.55}:{}},u.default.createElement("div",{className:"card-body"},u.default.createElement("h2",{className:"card-title"},"Votre Panier"),u.default.createElement("div",{className:"card-text"},!s&&u.default.createElement("div",{className:"panier_loader"},u.default.createElement("div",{align:"center"},u.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),u.default.createElement("span",{className:"sr-only"},"Loading...")),u.default.createElement("div",{className:"front_h2",style:{marginTop:"20px"},align:"center"},"Chargement en cours ...")),s&&u.default.createElement("div",{id:"content_panier"},a.length>0&&u.default.createElement("div",null,u.default.createElement(N.default,{canRemove:"true",removeItem:this.removeItemFromCart,devise:this.state.devise.sign,orderItems:a,discounts:n,total:o,subtotal:r,setQtyToAdd:this.setQtyToAdd,onDidMount:this.onDidMountResume}),u.default.createElement("div",{className:"row "},!this.props.wifeoCart&&u.default.createElement("div",{className:"pt-2 col-md-6 ",style:{background:"white"}},u.default.createElement(q.default,{options:this.state.options,uid:m,magasinId:this.state.magasin_id,optionsFormatting:this.optionsFormat,onSelected:this.onOptionSelected})),this.props.wifeoCart&&u.default.createElement("div",{className:"pt-2 col-md-6 "}," "),this.state.isTotalLoaded&&u.default.createElement("div",{className:"pt-2 col-md-6 ",style:{background:"white"}},u.default.createElement("br",null),u.default.createElement("div",{className:"input-group mb-3"},u.default.createElement("input",{type:"text",onBlur:this.onBlurCode.bind(this),className:"form-control",placeholder:"CODE DE REDUCTION : C6ZN5MGQEO"}),u.default.createElement("div",{className:"input-group-append"},u.default.createElement("span",{className:"input-group-text",style:{cursor:"pointer"},onClick:function(){e.state.coupon_code&&e.checkCart()}},"OK"))),u.default.createElement(C.default,{canRemove:this.state.step<4,removeItem:this.removeItemFromCart,devise:this.state.devise.sign,removeOptionCart:this.removeOptionCart,removeDiscountCart:this.removeDiscountCart,orderItems:a,discounts:n,total:o,subtotal:r})),!this.state.isTotalLoaded&&u.default.createElement("div",{className:"pt-2 col-md-6 ",style:{background:"white"}},u.default.createElement("div",{align:"center"},u.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),u.default.createElement("span",{className:"sr-only"},"Loading...")))),u.default.createElement("br",null),this.state.isTotalLoaded&&u.default.createElement("div",{className:"text-right"},u.default.createElement(P.default,{cta:{txt:"Valider mon panier",class:"btn-primary",link:"/",visible:!0,onAction:function(){e.setState({step:1})}}}))),0==a.length&&u.default.createElement("div",null,"Votre Panier ne contient aucun article...")))))),O&&u.default.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},u.default.createElement("i",{className:"fas fa-spinner fa-pulse fa-3x"}))))))),u.default.createElement(z,{contentStyle:{color:"initial",margin:"1rem auto auto auto",background:"none",padding:0,border:0},open:this.state.modalPaymentNotActivedIsOpen,onClose:this.closeModalPaymentNotActived,modal:!0,closeOnDocumentClick:!0},u.default.createElement("div",{className:"modal-content"},u.default.createElement("div",{className:"modal-header"},u.default.createElement("h5",{className:"modal-title"},"Oops !"),u.default.createElement("button",{type:"button",className:"close",onClick:this.closeModalPaymentNotActived,"data-dismiss":"modal","aria-label":"Close"},u.default.createElement("span",{"aria-hidden":"true"},"×"))),u.default.createElement("div",{className:"modal-body pt-0",style:{maxHeight:"80vh",overflowY:"auto"}},u.default.createElement("br",null),u.default.createElement("div",{className:"alert alert-info",role:"alert"},"Nous ne pouvons pas accepter les paiements en ligne. Veuillez nous contacter pour terminer vos achats. Merci."),u.default.createElement("div",{className:"btn btn-info",onClick:this.closeModalPaymentNotActived},"Ok")))),u.default.createElement(z,{contentStyle:{color:"initial",margin:"1rem auto auto auto",background:"none",padding:0,border:0},open:this.state.modalIsOpen,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},u.default.createElement("div",{className:"modal-content"},u.default.createElement("div",{className:"modal-header"},u.default.createElement("h5",{className:"modal-title"},"Pas de transporteur commun entre vos produits"),u.default.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},u.default.createElement("span",{"aria-hidden":"true"},"×"))),u.default.createElement("div",{className:"modal-body pt-0",style:{maxHeight:"80vh",overflowY:"auto"}},u.default.createElement("br",null),u.default.createElement("div",{className:"alert alert-info",role:"alert"},u.default.createElement("small",null,"Les produits ne peuvent pas etre envoyés avec le meme transporteur. Selectionner les produits que vous souhaitez conserver pour cette commande. Vous devrez faire une autre commande pour les autres produits.")),u.default.createElement(M.default,{items:this.state.splitItems,currency:this.state.devise,optionsFormatting:B,onSelected:this.onSplitSelected})),u.default.createElement("div",{className:"modal-footer"},u.default.createElement("div",{className:"text-right col-12"},u.default.createElement("button",{className:"btn btn-primary",onClick:function(){e.splitCart()}},"Modifier mon panier"))))))}}]),t}(d.Component),me=function(){var e=this;this.debounceCheckCart=Y(function(){e.checkCart()},750),this.debounceCheckMetaAndCart=Y(function(){e.checkMetaAndCart.apply(e,arguments)},750),this.closeModal=function(){e.setState({modalIsOpen:!1})},this.closeModalPaymentNotActived=function(){e.setState({modalPaymentNotActivedIsOpen:!1})}};ue.defaultProps={wifeoCart:!1,prefixClass:"",logo:"https://assets-cdn.github.com/images/modules/logos_page/Octocat.png",mode:"view",sectionClassName:"",bg:{class:"bg-white",img:{path:"",class:""}},show_title:!1,master_mode:!1,uid:"B14F8619-5B10-4D54-9B79-A503F7EB7DA7",user_uid:null,step:"panier",magasinId:1,order:{paiement:{plugin_id:null},customer:{address:null}}},t.default=ue},function(e,t){e.exports=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),u=a(4),m=n(u),f=a(2),p=n(f),h=a(1),v=n(h),b=a(5),g=n(b),y=a(3),E=n(y),_=p.default.CancelToken,I=v.default._store.getEnv(),S=I.scheme,N=I.domain,k=I.subdomain,C=I.apiProd,w=I.domainApi,x=C?k:"membership",O=C?k:"user",M=C?w:N,T=(S+"://"+x+"."+M).replace("__API__","membership"),A=(S+"://"+O+"."+M).replace("__API__","user"),L=function(e){return console.log.bind(console,e)},P=[],F=[],j=[],R=[],B=function(e){var t="33",a="";if(e.value&&"string"==typeof e.value){"+"===e.value.charAt(0)&&e.value.replace("+","");var n=e.value.split(".");2===n.length&&(t=n[0],a=n[1])}return d.default.createElement("div",null,d.default.createElement("div",{className:"input-group mb-1"},d.default.createElement("div",{className:"input-group-prepend"},d.default.createElement("span",{className:"input-group-text",id:"addon-indicatif"},"+")),d.default.createElement("input",{type:"text",className:"form-control","aria-label":"Indicatif telephone",name:"Indicatif telephone","aria-describedby":"addon-indicatif",style:{maxWidth:"70px"},value:t,required:e.required,onChange:function(t){e.onChange(t.target.value+"."+a)}}),d.default.createElement("div",{className:"input-group-prepend input-group-append"},d.default.createElement("div",{className:"input-group-text",id:"addon-dot"},".")),d.default.createElement("input",{type:"text",className:"form-control","aria-label":"Telephone","aria-describedby":"addon-dot",value:a,required:e.required,onChange:function(a){return e.onChange(t+"."+a.target.value)},minLength:"9"})),d.default.createElement("div",null,d.default.createElement("small",null,d.default.createElement("em",null,"Exemple : +33.125459514"))))},D=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));for(var n in a.props.paysAuth){var s=a.props.paysAuth[n].codeIso,i=a.props.paysAuth[n].nom;F.includes(i)||F.push(i),P.includes(s)||P.push(s)}var l=a.props.particulierForm.schema,c=a.props.entrepriseForm.schema,d=a.props.associationForm.schema;if(a.props.hasNdd){j=F,R=P,P=[],F=[],a.props.countriesNdd.forEach(function(e,t){P[t]=e.code,F[t]=e.name_fr}),l.definitions.Pays.enum=P,l.definitions.Pays.enumNames=F,c.definitions.Pays.enum=P,c.definitions.Pays.enumNames=F,d.definitions.Pays.enum=P,d.definitions.Pays.enumNames=F;var u=["birth_date","birth_postal_code","birth_town","birth_country"],m=[{birth_date:{type:"string",title:"Date de naissance",format:"date"}},{birth_postal_code:{type:"string",title:"Code Postal du lieu de naissance",minLength:5}},{birth_town:{type:"string",title:"Ville du lieu de naissance",minLength:3}},{birth_country:{title:"Pays du lieu de naissance",type:"string",enum:R,enumNames:j}}],f=["name","firstname"],p=[{firstname:{type:"string",title:"Prénom",minLength:3}},{name:{type:"string",title:"Nom",minLength:3}}],h=["firstname","name"],v=[{siret:{type:"string",title:"Siret",minLength:3}},{firstname:{type:"string",title:"Prénom",minLength:3}},{name:{type:"string",title:"Nom",minLength:3}}];for(var b in u)l.required.push(u[b]);for(var g in f)c.required.unshift(f[g]);for(var y in h)d.required.unshift(h[y]);for(var E in m)l.properties[Object.entries(m[E])[0][0]]=Object.entries(m[E])[0][1];for(var _ in p)c.properties[Object.entries(p[_])[0][0]]=Object.entries(p[_])[0][1];for(var I in v)d.properties[Object.entries(v[I])[0][0]]=Object.entries(v[I])[0][1]}return a.state={schema1:l,schema2:c,schema3:d,mesAddresses:[],mode:"facturation",formData:{},isCompany:1,isMme:!1,companyForm:!1,adresseLoaded:!1,pathSaveRegister:a.props.wifeoCart?A+"/register_":T+"/register_",inLoadingBtns:!1},a.doRegisterValidation=a.doRegisterValidation.bind(a),a.prefillData=a.prefillData.bind(a),a.formChanged=a.formChanged.bind(a),a}return s(t,e),l(t,[{key:"fetchForm",value:function(){var e=this,t=localStorage.getItem("currentUser")?localStorage.getItem("currentUser"):"";p.default.defaults.headers.common.Authorization="Bearer "+t,p.default.get((this.props.wifeoCart?A:T)+"/api/addresss/me",{cancelToken:new _(function(e){i=e})}).then(function(t){var a=[];for(var n in t.data)P.includes(t.data[n].country)&&a.push(t.data[n]);e.setState({mesAddresses:a,adresseLoaded:!0})})}},{key:"componentDidMount",value:function(){this.fetchForm()}},{key:"CustomFieldTemplate",value:function(e){var t=e.id,a=e.classNames,n=e.label,o=e.help,r=e.required,s=e.description,i=(e.errors,e.children);e.displayLabel;return d.default.createElement("div",{className:a},d.default.createElement("label",{htmlFor:t},n,r?"*":null),s,i,o)}},{key:"doRegisterValidation",value:function(e,t){this.validate(e,this.state.pathSaveRegister)}},{key:"formChanged",value:function(e,t){this.refs[t]&&(this.refs[t].className="was-validated")}},{key:"validate",value:function(e,t){var a=this,n=e.formData;n.gender=this.state.isMme,this.setState({inLoadingBtns:!0},function(){a.props.onFacturationSuccess(n,function(){a.setState({inLoadingBtns:!1})})})}},{key:"onCompanyClick",value:function(e){this.setState({isCompany:e})}},{key:"onMrClick",value:function(e){this.setState({isMme:e})}},{key:"prefillData",value:function(e){var t=e.target.value,a={};for(var n in this.state.mesAddresses)this.state.mesAddresses[n].id==t&&(a=this.state.mesAddresses[n]);var o=1;void 0!==a.association_name?o=3:void 0!==a.siret&&(o=2),a.association_date&&(a.association_date=(0,g.default)(a.association_date,"YYYY-MM-DD").format("YYYY-MM-DD")),a.birth_date&&(a.birth_date=(0,g.default)(a.birth_date,"YYYY-MM-DD").format("YYYY-MM-DD")),this.setState({formData:JSON.parse(JSON.stringify(a)),isCompany:o,isMme:a.gender})}},{key:"renderSubmitBtn",value:function(){return this.state.inLoadingBtns?d.default.createElement("i",{className:"fas fa-spinner fa-pulse"}):d.default.createElement(E.default,{cta:{txt:"Continuer",class:"btn-primary",link:"/",visible:!0,tpl:"BtnBootstrapSubmit"}})}},{key:"render",value:function(){var e=this,t=this.props.hasNdd,a=this.state,n=(a.schema2Validate,a.schema1Validate,a.schema3Validate,a.schema2),o=a.schema1,r=a.schema3,s=(a.companyForm,a.isCompany),i=a.isMme,l=a.formData,c=a.mesAddresses,u=a.adresseLoaded,f=(a.inLoadingBtns,this.doRegisterValidation),p=(this.flipMode,this.CustomFieldTemplate),h=["name","firstname"];1!=s?h.push("siret","*"):h.push("*");var v=t?{telephone:{"ui:widget":"CustomPhoneWidget"},"ui:order":h}:void 0;return d.default.createElement("div",{className:"col-md-12"},c.length>0&&d.default.createElement("div",{className:"form-group"},d.default.createElement("select",{id:"disabledSelect",className:"form-control",onChange:this.prefillData},d.default.createElement("option",{value:""},"Sélectionner une adresse enregistrée"),c.map(function(e,t){return d.default.createElement("option",{key:t,value:e.id},e.address," ",e.postal_code," ",e.town," ",e.country)}))),!u&&d.default.createElement("div",{className:"panier_loader"},d.default.createElement("div",{align:"center"},d.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),d.default.createElement("span",{className:"sr-only"},"Loading..."))),u&&d.default.createElement("div",null,d.default.createElement("div",{className:"btn-group col-md-12 ",role:"group","aria-label":"First group",style:{padding:"0px"}},d.default.createElement("button",{type:"button",onClick:function(){return e.onCompanyClick(1)},className:"col-md-6 btn btn-outline-primary "+(1==s?"active":"")},"Particulier"),d.default.createElement("button",{type:"button",onClick:function(){return e.onCompanyClick(2)},className:"col-md-6  btn btn-outline-primary "+(2==s?"active":"")},"Entreprise"),d.default.createElement("button",{type:"button",onClick:function(){return e.onCompanyClick(3)},className:"col-md-6  btn btn-outline-primary "+(3==s?"active":"")},"Association")),d.default.createElement("br",null),d.default.createElement("br",null),(1==s||t)&&d.default.createElement("div",{className:"btn-group col-md-12",role:"group","aria-label":"First group",style:{padding:"0px"}},d.default.createElement("button",{type:"button",onClick:function(){return e.onMrClick(!1)},className:"col-md-6 btn btn-outline-primary "+(i?"":"active")},"Mr"),d.default.createElement("button",{type:"button",onClick:function(){return e.onMrClick(!0)},className:"col-md-6  btn btn-outline-primary "+(i?"active":"")},"Mme")),1==s&&d.default.createElement("div",{ref:"form1"},d.default.createElement(m.default,{schema:o,onChange:function(t){return e.formChanged(t,"form1")},FieldTemplate:p,formData:l,onError:L("errors"),onSubmit:f,showErrorList:!1,liveValidate:!0,uiSchema:v,widgets:{CustomPhoneWidget:B}},d.default.createElement("div",{className:"text-right"},this.renderSubmitBtn()))),2==s&&d.default.createElement("div",{ref:"form2"},d.default.createElement(m.default,{schema:n,onChange:function(t){return e.formChanged(t,"form2")},FieldTemplate:p,formData:l,onError:L("errors"),onSubmit:f,showErrorList:!1,liveValidate:!0,uiSchema:v,widgets:{CustomPhoneWidget:B}},d.default.createElement("div",{className:"text-right"},this.renderSubmitBtn()))),3==s&&d.default.createElement("div",{ref:"form3"},d.default.createElement(m.default,{schema:r,onChange:function(t){return e.formChanged(t,"form3")},FieldTemplate:p,formData:l,onError:L("errors"),onSubmit:f,showErrorList:!1,liveValidate:!0,uiSchema:v,widgets:{CustomPhoneWidget:B}},d.default.createElement("div",{className:"text-right"},this.renderSubmitBtn())))))}}]),t}(c.Component);D.defaultProps={prefixClass:"",wifeoCart:!1,mode:"view",sectionClassName:"",bg:{class:"bg-white",img:{path:"",class:""}},master_mode:!1,particulierForm:{type:"login",schema:{title:"",description:"",type:"object",required:["name","firstname","address","postal_code","town","telephone","country"],definitions:{Pays:{title:"Pays",type:"string",enum:P,enumNames:F,uniqueItems:!0}},properties:{name:{type:"string",title:"Nom",minLength:3},firstname:{type:"string",title:"Prénom",minLength:3},address:{type:"string",title:"Adresse",minLength:0},address2:{type:"string",title:"Suite de l'adresse",minLength:0},postal_code:{type:"string",title:"Code Postal",minLength:1},town:{type:"string",title:"Ville",minLength:3},telephone:{type:"string",title:"Téléphone",minLength:10},country:{$ref:"#/definitions/Pays",title:"Pays"}}}},entrepriseForm:{type:"register",schema:{title:"",description:"",type:"object",required:["company_name","siret","tvaIntra","address","postal_code","town","telephone","country"],definitions:{Pays:{title:"Pays",type:"string",enum:P,enumNames:F}},properties:{company_name:{type:"string",title:"Nom de l'entreprise",minLength:3,default:""},siret:{type:"string",title:"Siret de la société",minLength:3},tvaIntra:{type:"string",title:"Numéro de TVA Intracommunautaire",minLength:3},address:{type:"string",title:"Adresse",minLength:0},address2:{type:"string",title:"Suite de l'adresse",minLength:0},postal_code:{type:"string",title:"Code Postal",minLength:1},town:{type:"string",title:"Ville",minLength:3},telephone:{type:"string",title:"Téléphone",minLength:10},country:{$ref:"#/definitions/Pays",title:"Pays"}}}},associationForm:{type:"register",schema:{title:"",description:"",type:"object",required:["association_name","address","postal_code","town","telephone","country","association_date","association_page"],definitions:{Pays:{title:"Pays",type:"string",enum:P,enumNames:F}},properties:{association_name:{type:"string",title:"Nom de l'association",minLength:3,default:""},association_date:{type:"string",title:"Date de publication au journal officiel",format:"date"},association_page:{type:"string",title:"Numéro de page de la publication au journal officiel"},address:{type:"string",title:"Adresse",minLength:0},address2:{type:"string",title:"Suite de l'adresse",minLength:0},postal_code:{type:"string",title:"Code Postal",minLength:1},town:{type:"string",title:"Ville",minLength:3},telephone:{type:"string",title:"Téléphone",minLength:10},country:{$ref:"#/definitions/Pays",title:"Pays"}}}}},t.default=D},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),u=a(4),m=n(u),f=a(2),p=n(f),h=a(1),v=n(h),b=a(3),g=n(b),y=(p.default.CancelToken,v.default._store.getEnv()),E=y.scheme,_=y.domain,I=y.subdomain,S=y.apiProd,N=y.domainApi,k=S?I:"membership",C=(E+"://"+k+"."+(S?N:_)).replace("__API__","membership"),w=function(e){return console.log.bind(console,e)},x=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=C;a.props.wifeoCart&&(n=n.replace("membership","user"));var s=n+"/register_",i=n+"/login_";a.props.wifeoCart&&(s=n+"/register",i=n+"/login_check");var l="",c=window.__UID_SITE.filter(function(e){return"membership"==e.nom});return c.length>0&&(l=c[0].uid),a.state={schema1:a.props.loginForm.schema,schema2:a.props.registerForm.schema,uid:l,loginForm:!1,error:null,bearer:{},isLoaded:!1,inLoadingBtns:!1,pendingRequest:!1,pathGoogleLogin:n+"/check_google_login",pathGoogleRegister:n+"/register_with_google",pathFacebookLogin:n+"/check_facebook_login",pathFacebookRegister:n+"/register_with_facebook",pathSaveLogin:i,pathSaveRegister:s,cancelToken:null},a.doLoginValidation=a.doLoginValidation.bind(a),a.doRegisterValidation=a.doRegisterValidation.bind(a),a.flipMode=a.flipMode.bind(a),a}return s(t,e),l(t,[{key:"doRegisterValidation",value:function(e,t){this.validate(e,this.state.pathSaveRegister)}},{key:"doLoginValidation",value:function(e){this.validate(e,this.state.pathSaveLogin)}},{key:"CustomFieldTemplate",value:function(e){var t=e.id,a=e.classNames,n=e.label,o=e.help,r=e.required,s=e.description,i=(e.errors,e.children);return d.default.createElement("div",{className:a},d.default.createElement("label",{htmlFor:t},n,r?"*":null),s,i,o)}},{key:"validate",value:function(e,t){if(!this.state.inLoadingBtns){var a={data:e.formData};a={_username:e.formData.email,_password:e.formData.password,_channel:2},this.props.wifeoCart||(a._uid=this.state.uid);var n=this;this.setState({inLoadingBtns:!0},function(){p.default.post(t,a,{headers:{"Content-Type":"application/json"}}).then(function(e){n.setState({inLoadingBtns:!1},function(){n.props.onIdentificationSuccess({token:e.data.token,email:a._username})})}).catch(function(e){n.setState({inLoadingBtns:!1},function(){n.props.onIdentificationFail(e)})})})}}},{key:"forgetPwd",value:function(){void 0!==window.NavBarHeader&&window.NavBarHeader.setState({action:"show_modal_pwd_reset"})}},{key:"fbRegister",value:function(){this.setState({pendingRequest:!0});var e=this,t=this.state.pathFacebookRegister;this.state.loginForm||(t=this.state.pathFacebookLogin),FB.login(function(a){if("connected"===a.status){var n=a&&a.authResponse&&a.authResponse.accessToken;p.default.post(t,{accessToken:n},{headers:{"Content-Type":"application/json"}}).then(function(t){e.setState({pendingRequest:!1,pwdHasChanged:!0}),e.onIdentificationSuccess(t.data,{_username:Math.round(Date.now()/1e3)})}).catch(function(t){e.loadGoogleAssets(),e.setState({pendingRequest:!1},function(){e.onIdentificationFail(t)})})}else e.loadGoogleAssets(),e.setState({pendingRequest:!1},function(){e.onIdentificationFail({})})},{scope:"public_profile,email"})}},{key:"flipMode",value:function(){this.setState({loginForm:!this.state.loginForm})}},{key:"onIdentificationSuccess",value:function(e,t){localStorage.setItem("currentUser",e.token);JSON.stringify({token:e.token});this.props.onIdentificationSuccess({token:e.token,email:t._username});this.parseJwt(e.token)}},{key:"onIdentificationFail",value:function(e){var t=this;this.setState({inLoadingBtns:!1},function(){t.props.onIdentificationFail(e)})}},{key:"loadFacebookAssets",value:function(){!function(e,t,a){var n,o=e.getElementsByTagName(t)[0];e.getElementById(a)||(n=e.createElement(t),n.id=a,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:"564839460792327",xfbml:!0,version:"v6.0"}),FB.AppEvents.logPageView()}}},{key:"loadGoogleAssets",value:function(){var e=this.state.pathGoogleLogin,t=this.state.pathGoogleRegister,a=this;$(document).ready(function(){function n(n){r.attachClickHandler(n,{},function(n){a.state.loginForm?o(n,t):o(n,e)},function(e){a.setState({pendingRequest:!1},function(){a.onIdentificationFail(e),a.loadGoogleAssets()})})}function o(e,t){a.setState({pendingRequest:!0});var n=e.getBasicProfile(),o=e.getAuthResponse().id_token;p.default.post(t,{token:o,email:n.getEmail()},{headers:{"Content-Type":"application/json"}}).then(function(e){a.setState({pendingRequest:!1,pwdHasChanged:!0}),a.onIdentificationSuccess(e.data,{_username:n.getEmail()})}).catch(function(e){a.setState({pendingRequest:!1},function(){a.onIdentificationFail(e),a.loadGoogleAssets()})})}var r={};!function(){gapi.load("auth2",function(){r=gapi.auth2.init({client_id:"1070825060405-vk9q6sv2h4au1i5d9fi2v6miib51g4u7.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile"}),n(a.state.loginForm?document.getElementById("googleRegister"):document.getElementById("googleLogin"))})}()})}},{key:"componentDidMount",value:function(){this.props.wifeoCart&&(this.loadGoogleAssets(),this.loadFacebookAssets()),this.state.pathGet}},{key:"componentWillUnmount",value:function(){i&&"function"==typeof i&&i()}},{key:"render",value:function(){var e=this,t=this.props,a=(t.prefixClass,t.sectionClassName),n=t.bg,o=(t.blocks,t.mode,t.uiSchema),r=this.state,s=r.schema2,i=r.schema1,l=r.loginForm,c=r.inLoadingBtns,u=r.pendingRequest,f=this.doLoginValidation,p=this.doRegisterValidation,h=this.CustomFieldTemplate;return d.default.createElement("section",null,d.default.createElement("div",{className:"container-fluid col-12 "+n.class+" "+a},""!=n.img.path&&d.default.createElement("img",{src:n.img.path,className:n.img.class}),d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"container my-7"},!l&&d.default.createElement("div",null,this.props.wifeoCart&&d.default.createElement("div",null,d.default.createElement(g.default,{cta:{txt:" Continuer avec Facebook",class:"btn-light btn-outline-secondary btn-block px-4",link:"/",visible:!0,tpl:"BtnBootstrap",icon:{active:!0,css:"fab fa-facebook-f",color:"#445b8f"},type:"reset",onAction:function(){e.fbRegister()}}}),d.default.createElement(g.default,{cta:{id:"googleLogin",txt:" Continuer avec Google",class:"btn-light btn-outline-secondary btn-block px-4",link:"/",visible:!0,tpl:"BtnBootstrap",icon:{active:!0,css:"fab fa-google",color:"#ce5542"},type:"reset",onAction:function(){}}}),d.default.createElement("br",null),d.default.createElement("div",{className:"login-choice"}," ",d.default.createElement("span",null," ou "))),d.default.createElement(m.default,{schema:s,FieldTemplate:h,onError:w("errors"),onSubmit:f,showErrorList:!1,liveValidate:!0,uiSchema:o},d.default.createElement("div",{className:"mb-1"},d.default.createElement("button",{type:"button",onClick:function(){return e.forgetPwd()},className:"btn btn-link btn-sm"},"Mot de passe oublié ?")),d.default.createElement("div",{className:"text-right"},!c&&[d.default.createElement("button",{key:"0",type:"button",className:"btn btn-link",onClick:this.flipMode},"M'inscrire")," ",d.default.createElement(g.default,{key:"2",cta:{txt:"Continuer",class:"btn-primary",link:"/",visible:!0,tpl:"BtnBootstrapSubmit"}})]||d.default.createElement("i",{className:"fas fa-spinner fa-pulse"})))),l&&d.default.createElement("div",null,this.props.wifeoCart&&!u&&d.default.createElement("div",null,d.default.createElement(g.default,{cta:{txt:" S'inscrire avec Facebook",class:"btn-light btn-outline-secondary btn-block px-4",link:"/",visible:!0,tpl:"BtnBootstrap",icon:{active:!0,css:"fab fa-facebook-f",color:"#445b8f"},type:"reset",onAction:function(){e.fbRegister()}}})," ",d.default.createElement(g.default,{cta:{id:"googleRegister",txt:" S'inscrire avec Google",class:"btn-light btn-outline-secondary btn-block px-4",link:"/",visible:!0,tpl:"BtnBootstrap",icon:{active:!0,css:"fab fa-google",color:"#ce5542"},type:"reset",onAction:function(){}}}),d.default.createElement("br",null),d.default.createElement("div",{className:"login-choice"}," ",d.default.createElement("span",null," ou "))),d.default.createElement(m.default,{schema:i,FieldTemplate:h,onError:w("errors"),onSubmit:p,showErrorList:!1,liveValidate:!0,uiSchema:o},d.default.createElement("div",{className:"text-right"},!c&&[d.default.createElement("button",{key:"0",type:"button",className:"btn btn-link",onClick:this.flipMode},"J'ai déjà un compte")," ",d.default.createElement(g.default,{key:"2",cta:{txt:"M'inscrire et Continuer",class:"btn-primary",link:"/",visible:!0,tpl:"BtnBootstrapSubmit"}})]||d.default.createElement("i",{className:"fas fa-spinner fa-pulse"}))))))))}}]),t}(c.Component);x.defaultProps={prefixClass:"",wifeoCart:!1,mode:"view",sectionClassName:"",bg:{class:"bg-white",img:{path:"",class:""}},master_mode:!1,loginForm:{type:"login",schema:{title:"",description:"",type:"object",required:["email","password"],properties:{email:{type:"string",format:"email",title:"Email"},password:{type:"string",title:"Mot de Passe",minLength:5}}}},registerForm:{type:"register",schema:{title:"",description:"",type:"object",required:["email","password"],properties:{email:{type:"string",format:"email",title:"Email"},password:{type:"string",title:"Mot de Passe",minLength:5}}}},uiSchema:{password:{"ui:widget":"password"}}},t.default=x},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),c=n(l),d=a(1),u=n(d),m=a(6),f=n(m),p=u.default._getSrcSet,h=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderItems:a.props.orderItems,discounts:a.props.discounts,currency:a.props.devise,total:a.props.total,subtotal:a.props.subtotal},a.renderDeliveryOrOptions=a.renderDeliveryOrOptions.bind(a),a.recapCommandeDiscount=a.recapCommandeDiscount.bind(a),a}return s(t,e),i(t,[{key:"arrondi2c",value:function(e){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(2)+""+this.state.currency}},{key:"arrondi2ch",value:function(e){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(2)}},{key:"renderDeliveryOrOptions",value:function(e,t,a){return c.default.createElement("tr",{key:a},c.default.createElement("td",{scope:"row"},c.default.createElement("b",null,e.name),c.default.createElement("br",null),c.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),c.default.createElement("td",{className:"text-right"}," ",this.arrondi2c(e.totalTtc)))}},{key:"recapCommandeDiscount",value:function(e,t,a){if(0==t){var n=1==e.is_percent?"%":this.state.currency;return c.default.createElement("tr",{key:a},c.default.createElement("td",{scope:"row"},c.default.createElement("b",null,"CODE DE REDUCTION: "),c.default.createElement("br",null)," ",e.coupon),c.default.createElement("td",{className:"text-right"}," ",!e.is_free_delivery&&c.default.createElement("span",{className:"badge badge-danger"},"-",e.value,n),e.is_free_delivery&&c.default.createElement("span",{className:"badge badge-danger"},"Livraison Offerte")))}return c.default.createElement("tr",{key:a},c.default.createElement("td",{scope:"row"}),c.default.createElement("td",{className:"text-right"}))}},{key:"removeItemCart",value:function(e){this.props.removeItem(e)}},{key:"recapCommandeProd",value:function(e,t){var a=this,n=null;void 0!==e.promos&&e.promos.length>0&&(n=e.promos[0]);var o=n?"<del>"+this.arrondi2c(e.totalTtcBeforeDiscount)+'</del><br><span class="badge badge-danger">-'+parseFloat(n.value).toFixed(2)+(1==n.is_percent?"%":this.state.currency)+"</span>":"",r=void 0,s=void 0,i=void 0,l=Math.round((new Date).getTime()/1e3);e.catalog_item;var d="/shop/";e.is_formation&&(d="/formation/");var u=c.default.createElement("a",{href:d+e.object_url},e.name);if("formule"==e.catalog_item&&(u=e.name),e.image_url){var m=null,h="";if("{"===e.image_url.charAt(0)){var v=JSON.parse(e.image_url);m=p(v),h=v[160]||v.default}else h=e.image_url;s=c.default.createElement("img",{className:"img img-fluid lazyload",srcSet:m,src:h,sizes:"50px",style:{width:"50px"}}),e.object_url&&(i=c.default.createElement("a",{href:d+e.object_url},s))}if(e.metadata){if("formule"==e.catalog_item&&Array.isArray(e.metadata)&&e.metadata.length>0)for(var b in e.metadata)null!=typeof e.metadata[b].domain_name&&(r=c.default.createElement("span",null,"www. ",e.metadata[b].domain_name),e.metadata[b].ndd_action&&(i=null));if("product"==e.catalog_item&&Array.isArray(e.metadata)&&e.metadata.length>0)for(var g in e.metadata)void 0!==e.metadata[g].personnalisation_friendly&&(r=c.default.createElement(f.default,{btnName:"Personnalisation",persos:e.metadata[g].personnalisation_friendly,key:l}," "))}var y=c.default.createElement("span",null,c.default.createElement("b",null," ",e.name),c.default.createElement("br",null),c.default.createElement("span",null,r));e.object_url&&(y=c.default.createElement("span",null,c.default.createElement("b",null," ",u),c.default.createElement("br",null),c.default.createElement("span",null,r)));var E=0,_=0;return void 0!==e.totalTtcBeforeCoupon?E=this.arrondi2c(e.totalTtcBeforeCoupon):(e.discounts.length>0&&(_=e.discounts[0].totalTtc),E=this.arrondi2c(e.totalTtc+parseFloat(_))),c.default.createElement("tr",{key:e.id},c.default.createElement("td",{scope:"row"},i||s,c.default.createElement("span",{className:"badge badge-secondary",style:{left:"10px",position:"absolute",marginTop:"-10px"}},e.quantity)),c.default.createElement("td",null,y),c.default.createElement("td",{dangerouslySetInnerHTML:{__html:o}}),c.default.createElement("td",{className:"text-right"},E),this.props.canRemove&&c.default.createElement("td",null,c.default.createElement("i",{className:"fas fa-trash-alt",onClick:function(){return a.removeItemCart(e.id)}})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.orderItems,n=t.discounts,o=t.subtotal,r=t.total;return c.default.createElement("div",null,c.default.createElement("table",{className:"table"},c.default.createElement("tbody",{className:"results_panier"},a.filter(function(e){return"formule"===e.catalog_item}).map(function(t,a){return e.recapCommandeProd(t,a)}),a.filter(function(e){return"product"===e.catalog_item}).map(function(t,a){return e.recapCommandeProd(t,a)}))),c.default.createElement("table",{className:"table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null," SOUS TOTAL :"),c.default.createElement("th",{className:"subtotal text-right"},this.arrondi2c(o)))),c.default.createElement("tbody",{className:"after_sstotal"},a.filter(function(e){return"cart-option"===e.catalog_item}).map(function(t,a){return e.renderDeliveryOrOptions(t,a,"a-"+a)}),n.map(function(t,a){return e.recapCommandeDiscount(t,a,"b-"+a)}),a.filter(function(e){return"delivery"===e.catalog_item}).map(function(t,a){return e.renderDeliveryOrOptions(t,a,"c-"+a)}))),c.default.createElement("table",{className:"table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{style:{border:"none"}},"TOTAL :"),c.default.createElement("th",{style:{border:"none"},className:"total text-right"},this.arrondi2c(r))))))}}]),t}(l.Component);t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),c=n(l),d=a(1),u=n(d),m=a(15),f=n(m),p=a(6),h=n(p),v=u.default._getSrcSet,b=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderItems:a.props.orderItems,discounts:a.props.discounts,currency:a.props.devise,total:a.props.total,subtotal:a.props.subtotal},a}return s(t,e),i(t,[{key:"arrondi2c",value:function(e){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(2)+""+this.state.currency}},{key:"arrondi2ch",value:function(e){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(2)}},{key:"removeItemCart",value:function(e){this.props.removeItem(e)}},{key:"recapCommandeProd",value:function(e,t){var a=this,n=null,o={mep:{slider:"left"},price:!0,reference:!0,categories:!1,tags:!1,quantitySelector:!0,navigation:!1,socialLinks:!0,btnAddToBasket:!0,refUnit:!1,remainingStock:!1,fabricant:!1,fournisseurs:!1,comments:!1,styleAttributs:"btn"};void 0!==e.promos&&e.promos.length>0&&(n=e.promos[0]);var r=n?"<del>"+this.arrondi2c(e.totalTtcBeforeDiscount)+"</del>":"",s=n?'<span class="badge badge-danger">-'+parseFloat(n.value).toFixed(2)+(1==n.is_percent?"%":this.state.currency)+"</span>":"",i=void 0,l=void 0,d=void 0,u=!0,m=Math.round((new Date).getTime()/1e3),p="/shop/";e.is_formation&&(p="/formation/");var b=c.default.createElement("a",{href:p+e.object_url},e.name);if("formule"==e.catalog_item&&(b=e.name),e.image_url){var g=null,y="";if("{"===e.image_url.charAt(0)){var E=JSON.parse(e.image_url);g=v(E),y=E[160]||E.default}else y=e.image_url;l=c.default.createElement("img",{className:"img img-fluid lazyload",srcSet:g,src:y,sizes:"50px",style:{width:"50px"}}),e.object_url&&(d=c.default.createElement("a",{href:p+e.object_url},l))}if(e.metadata){if("formule"==e.catalog_item&&Array.isArray(e.metadata)&&e.metadata.length>0)for(var _ in e.metadata)null!=typeof e.metadata[_].domain_name&&(i=c.default.createElement("span",null,"www. ",e.metadata[_].domain_name),e.metadata[_].ndd_action&&(d=null,u="ndd_transfer"!==e.metadata[_].ndd_action));if("product"==e.catalog_item&&Array.isArray(e.metadata)&&e.metadata.length>0)for(var I in e.metadata)void 0!==e.metadata[I].personnalisation_friendly&&(i=c.default.createElement(h.default,{btnName:"Personnalisation",persos:e.metadata[I].personnalisation_friendly,key:m}," "))}e.is_virtual&&(u=!1);var S=c.default.createElement("span",null,c.default.createElement("b",null," ",e.name),c.default.createElement("br",null),c.default.createElement("span",null,i));e.object_url&&(S=c.default.createElement("span",null,c.default.createElement("b",null," ",b),c.default.createElement("br",null),c.default.createElement("span",null,i)));var N=0,k=0;return void 0!==e.totalTtcBeforeCoupon?N=this.arrondi2c(e.totalTtcBeforeCoupon):(e.discounts.length>0&&(k=e.discounts[0].totalTtc),N=this.arrondi2c(e.totalTtc+parseFloat(k))),c.default.createElement("tr",{key:t},c.default.createElement("td",{scope:"row"},d||l),c.default.createElement("td",null,S),c.default.createElement("td",null,this.arrondi2c(e.unit_costTtc)," ",c.default.createElement("br",null),c.default.createElement("span",{dangerouslySetInnerHTML:{__html:s}})),u&&c.default.createElement("td",null,c.default.createElement(f.default,{ui:o,status:{quantitySelector:"visible"},actions:{setQtyToAdd:function(e,t){a.props.setQtyToAdd(e,t)}},product:e,qty:e.quantity})),!u&&c.default.createElement("td",null),c.default.createElement("td",{className:"text-right"},N," ",c.default.createElement("br",null),c.default.createElement("span",{dangerouslySetInnerHTML:{__html:r}})),this.props.canRemove&&c.default.createElement("td",null,c.default.createElement("i",{className:"fas fa-trash-alt",onClick:function(){return a.removeItemCart(e.id)}})))}},{key:"componentDidMount",value:function(){this.props.onDidMount()}},{key:"render",value:function(){var e=this,t=this.props,a=t.orderItems;t.discounts,t.subtotal,t.total;return c.default.createElement("div",null,c.default.createElement("table",{className:"table"},c.default.createElement("tbody",{className:"results_panier"},a.filter(function(e){return"formule"===e.catalog_item}).map(function(t,a){return e.recapCommandeProd(t,a)}),a.filter(function(e){return"product"===e.catalog_item}).map(function(t,a){return e.recapCommandeProd(t,a)}))))}}]),t}(l.Component);b.defaultProps={onDidMount:function(){}},t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(e){var t=e.product,a=e.actions,n=e.qty,r=e.ui,s=e.status.quantitySelector,i={width:(n&&n.toString().length>2?n.toString().length+3:4)+"ch"},l=function(){var e=parseFloat(n)-1;a.setQtyToAdd(parseFloat(e)>=1?parseFloat(e):1,t)},c=function(){a.setQtyToAdd(parseFloat(n)+1,t)},d=function(e){var n=e.target.validity.valid,o=e.target.value;a.setQtyToAdd(n&&0!=o?o:null,t)};return r.quantitySelector&&r.btnAddToBasket&&"visible"===s&&o.default.createElement("div",{id:"form-qty-selector",className:"form-inline mb-3"},o.default.createElement("div",{className:"input-group ml-2 pprcpt-qty-selector"},o.default.createElement("div",{className:"input-group-prepend cursor-pt",onClick:l},o.default.createElement("div",{className:"input-group-text bg-white px-2"},o.default.createElement("i",{className:"fas fa-minus"}))),o.default.createElement("input",{type:"text",pattern:"[0-9]*","data-step":"1","data-min":"1","data-max":"",name:"quantity",value:n,onChange:d,title:"Quantité",className:"form-control text-center px-2",size:"1",style:i}),t.unite&&o.default.createElement("div",{className:"input-group-append"},o.default.createElement("div",{className:"input-group-text bg-white px-2"},t.unite)),o.default.createElement("div",{className:"input-group-append cursor-pt",onClick:c},o.default.createElement("div",{className:"input-group-text bg-white px-2"},o.default.createElement("i",{className:"fas fa-plus"})))))||null};t.default=r},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderItems:a.props.orderItems,discounts:a.props.discounts,currency:a.props.devise,total:a.props.total,subtotal:a.props.subtotal},a.renderDeliveryOrOptions=a.renderDeliveryOrOptions.bind(a),a.recapCommandeDiscount=a.recapCommandeDiscount.bind(a),a}return r(t,e),s(t,[{key:"arrondi2c",value:function(e){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(2)+""+this.state.currency}},{key:"arrondi2ch",value:function(e){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(2)}},{key:"removeOptionCart",value:function(e){this.props.removeOptionCart(e)}},{key:"removeDiscountCart",value:function(){this.props.removeDiscountCart()}},{key:"renderDeliveryOrOptions",value:function(e,t){return l.default.createElement("tr",{key:t},l.default.createElement("td",{scope:"row"},l.default.createElement("b",null,e.name),l.default.createElement("br",null),l.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),l.default.createElement("td",{className:"text-right"}," ",this.arrondi2c(e.totalTtc)))}},{key:"recapCommandeDiscount",value:function(e,t){var a=this;if(0==t){var n=1==e.is_percent?"%":this.state.currency;return l.default.createElement("tr",{key:t},l.default.createElement("td",{scope:"row"},l.default.createElement("b",null,"CODE DE REDUCTION: "),l.default.createElement("br",null)," ",e.coupon),l.default.createElement("td",{className:"text-right"}," ",!e.is_free_delivery&&l.default.createElement("span",{className:"badge badge-danger"},"-",e.value,n),e.is_free_delivery&&l.default.createElement("span",{className:"badge badge-danger"},"Livraison Offerte"),l.default.createElement("span",{style:{cursor:"pointer"}}," ",l.default.createElement("i",{className:"fas fa-trash-alt",onClick:function(){return a.removeDiscountCart()}}))))}return l.default.createElement("tr",{key:t},l.default.createElement("td",{scope:"row"}),l.default.createElement("td",{className:"text-right"}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.orderItems,n=t.discounts,o=t.subtotal,r=t.total;return l.default.createElement("div",null,l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null," SOUS TOTAL :"),l.default.createElement("th",{className:"subtotal text-right"},this.arrondi2c(o)))),l.default.createElement("tbody",{className:"after_sstotal"},a.filter(function(e){return"cart-option"===e.catalog_item}).map(function(t,a){return e.renderDeliveryOrOptions(t,a,"a-"+a)}),n.map(function(t,a){return e.recapCommandeDiscount(t,a,"b-"+a)}),a.filter(function(e){return"delivery"===e.catalog_item}).map(function(t,a){return e.renderDeliveryOrOptions(t,a,"c-"+a)}))),l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{style:{border:"none"}},"TOTAL :"),l.default.createElement("th",{style:{border:"none"},className:"total text-right"},this.arrondi2c(r))))))}}]),t}(i.Component);t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),u=a(2),m=n(u),f=a(1),p=n(f),h=p.default._store.getEnv(),v=h.scheme,b=h.domain,g=h.subdomain,y=h.apiProd,E=h.domainApi,_=y?g:"paiement",I=(v+"://"+_+"."+(y?E:b)).replace("__API__","paiement"),S=m.default.CancelToken,N=(m.default.defaults.headers.common.Authorization,function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={title:"Mode de Paiement",items:[],selected_item:0,isLoaded:!1,Bearer:"",pathGetItems:I+"/magasins/"+a.props.paiementId+"/moyens"},a}return s(t,e),l(t,[{key:"fetchForm",value:function(){var e=this;m.default.get(this.state.pathGetItems,{cancelToken:new S(function(e){i=e})}).then(function(t){for(var a=[],n=e.props.total,o=0;o<t.data.length;o++)parseFloat(t.data[o].minimum_achat)<=parseFloat(n)&&a.push(t.data[o]);a.length>0&&e.props.onSelected(a[0]),e.setState({isLoaded:!0,items:a})})}},{key:"componentDidMount",value:function(){this.state.pathGetItems&&this.fetchForm()}},{key:"onChangeItem",value:function(e){this.setState({selected_item:e})}},{key:"itemSelection",value:function(e){this.setState({selected_item:e}),this.props.onSelected(this.state.items[e])}},{key:"doNothing",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=(t.title,t.selected_item),o=t.isLoaded;return d.default.createElement("div",{className:"col-md-12"},!o&&d.default.createElement("div",{className:"panier_loader"},d.default.createElement("div",{align:"center"},d.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),d.default.createElement("span",{className:"sr-only"},"Loading..."))),1==o&&0==a.length&&d.default.createElement("div",{className:"alert alert-danger",role:"alert"},d.default.createElement("small",null," ",d.default.createElement("i",{className:"far fa-frown"})," Malheureusement, aucun moyen de paiement n'est disponible pour le montant de votre commande."," ")),o&&d.default.createElement("ul",{className:"list-group"},a.map(function(t,a){return d.default.createElement("li",{key:a,className:"list-group-item",onClick:function(){return e.itemSelection(a)},style:{cursor:"pointer",border:n===a?"2px solid lightblue":"1px solid lightgrey"}},d.default.createElement("div",{className:"form-check-inline"},d.default.createElement("label",{className:"form-check-label"},d.default.createElement("input",{type:"radio",className:"form-check-input",value:a,onChange:e.doNothing,checked:n===a,name:"optradio"}),e.props.optionsFormatting(t))))})))}}]),t}(c.Component));t.default=N},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),c=n(l),d=a(2),u=n(d),m=a(1),f=n(m),p=f.default._store.getEnv(),h=p.scheme,v=p.domain,b=p.subdomain,g=p.apiProd,y=p.domainApi,E=g?b:"paiement",_=((h+"://"+E+"."+(g?y:v)).replace("__API__","form"),u.default.CancelToken,u.default.defaults.headers.common.Authorization,function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={items:[],selected_item:0,isLoaded:!0,Bearer:""},a}return s(t,e),i(t,[{key:"componentDidMount",value:function(){}},{key:"onChangeItem",value:function(e){this.setState({selected_item:e})}},{key:"itemSelection",value:function(e){this.setState({selected_item:e}),this.props.onSelected(e)}},{key:"doNothing",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.selected_item,n=t.isLoaded,o=this.props.items;return c.default.createElement("div",{className:"col-md-12"},!n&&c.default.createElement("div",{className:"panier_loader"},c.default.createElement("div",{align:"center"},c.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),c.default.createElement("span",{className:"sr-only"},"Loading..."))),n&&c.default.createElement("div",null,o.map(function(t,n){return c.default.createElement("div",{className:"mb-2",key:n},c.default.createElement("ul",{className:"list-group"},c.default.createElement("li",{className:"list-group-item",onClick:function(){return e.itemSelection(n)},style:{cursor:"pointer",border:a===n?"2px solid lightblue":"1px solid lightgrey"}},c.default.createElement("div",{className:"form-check-inline",style:{display:"block"}},c.default.createElement("label",{className:"form-check-label"},c.default.createElement("input",{type:"radio",className:"form-check-input",value:n,onChange:e.doNothing,checked:a===n,name:"optradio"}),c.default.createElement("b",null,"Transporteur ",n+1)),e.props.optionsFormatting(t,n)))))})))}}]),t}(l.Component));t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),c=n(l),d=a(2),u=n(d),m=a(1),f=n(m),p=a(3),h=n(p),v=f.default._store.getEnv(),b=v.scheme,g=v.domain,y=v.subdomain,E=v.apiProd,_=v.domainApi,I=E?y:"shop",S=(b+"://"+I+"."+(E?_:g)).replace("__API__","shop"),N=(u.default.CancelToken,u.default.defaults.headers.common.Authorization,function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={title:"Mode de Paiement",items:[],tvaMax:1,selected_item:0,isLoaded:!1,Bearer:"",canContinue:!1,ptRelaisLoading:!1},a}return s(t,e),i(t,[{key:"fetchForm",value:function(){this.setState({isLoaded:!1});var e={plugin_id:this.props.plugin.id,user_uid:this.props.user_uid,site_uid:this.props.site,magasin_id:this.props.magasin_id,items:this.props.orderItems,address_livraison:this.props.addressLId},t=this,a=localStorage.getItem("currentUser")?"Bearer "+localStorage.getItem("currentUser"):"";u.default.post(S+"/public/shop/factures",e,{headers:{Authorization:a,"Content-Type":"application/json"}}).then(function(e){var a=!1;void 0!==e.data.availableTransporteurs&&void 0!==e.data.availableTransporteurs.transporteurs&&e.data.availableTransporteurs.exclus.length;var n=t.checkIsRelais(e.data.availableTranches);n.length>0&&(t.props.onSelected(n[0]),a=!0),t.setState({isLoaded:!0,items:n,tvaMax:e.data.tvaMax,canContinue:a})}).catch(function(e){console.log(e)})}},{key:"checkIsRelais",value:function(e){return e.forEach(function(e){if(e.plugin&&3==e.plugin){e.presta="sendincloud";var t=e.info&&void 0!==e.info&&JSON.parse(e.info);t&&(e.isPtRelais=t&&t.isRelais,e.publicKey=t&&t.publicKey,e.countryCode=t&&t.countryCode)}}),e}},{key:"componentDidMount",value:function(){this.fetchForm()}},{key:"onChangeItem",value:function(e){this.setState({selected_item:e})}},{key:"onNextStep",value:function(){var e=this.state.items[this.state.selected_item];e&&e.isPtRelais?e.collectingPoint?this.props.onAfterModeLivraison():this.relaisOpen(this.state.selected_item):this.props.onAfterModeLivraison()}},{key:"openServicePointPicker",value:function(e,t,a,n,o,r,s){var i=this,l=i.state.items[e],c={apiKey:l.publicKey,country:t,postalCode:n,language:a,carriers:o,servicePointId:r,postNumber:s};i.setState({ptRelaisLoading:!0}),sendcloud.servicePoints.open(c,function(t,a){i.setState({selected_item:e}),l.collectingPoint=JSON.stringify(t,null,2),l.postNumber=a,sendcloud.servicePoints.close(),i.props.onSelected(l),i.setState({ptRelaisLoading:!1}),setTimeout(i.props.onAfterModeLivraison(),150)},function(e){sendcloud.servicePoints.close(),i.setState({ptRelaisLoading:!1}),e.forEach(function(e){console.log("Failure callback, reason: "+e)})})}},{key:"relaisOpen",value:function(e){if(!this.state.ptRelaisLoading){var t=(this.state.items[e],this.props.addressL&&this.props.addressL.postal_code?this.props.addressL.postal_code:"75001"),a=this.props.addressL&&this.props.addressL.country?this.props.addressL.country:"FR";this.openServicePointPicker(e,a,"fr-fr",t,null)}}},{key:"itemSelection",value:function(e){this.setState({selected_item:e});var t=this.state.items[e];t&&(t.collectingPoint=null,t.postNumber=null),t.isPtRelais?this.relaisOpen(e):this.props.onSelected(t)}},{key:"onReturnShop",value:function(){location.href="/"}},{key:"doNothing",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=(t.title,t.selected_item),o=t.isLoaded,r=t.tvaMax,s=t.canContinue,i=this.props.address;return c.default.createElement("div",null,!o&&c.default.createElement("div",{className:"panier_loader"},c.default.createElement("div",{align:"center"},c.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),c.default.createElement("span",{className:"sr-only"},"Loading..."))),1==o&&0==s&&c.default.createElement("div",{className:"alert alert-danger",role:"alert"},c.default.createElement("i",{className:"far fa-frown"}),c.default.createElement("small",null," ","Malheureusement, aucun transporteur n'est disponible pour votre adresse de livraison. Aucun de nos transporteurs ne couvre votre pays."," ")),o&&c.default.createElement("div",null,i&&c.default.createElement("div",{className:"col-sm-12 we-text-right"},c.default.createElement("address",null,c.default.createElement("strong",null,"Adresse de facturation :"),c.default.createElement("br",null),i.company_name?c.default.createElement("span",null,i.company_name):c.default.createElement("span",null,i.firstname," ",i.name),c.default.createElement("br",null),i.address,c.default.createElement("br",null),""!=i.addresse2&&c.default.createElement("p",null," ",i.addresse2),i.postal_code,", ",i.town,c.default.createElement("br",null),i.country)),c.default.createElement("ul",{className:"list-group"},a.map(function(t,a){return c.default.createElement("li",{key:a,className:"list-group-item",onClick:function(){return e.itemSelection(a)},style:{cursor:"pointer",border:n===a?"2px solid lightblue":"1px solid lightgrey"}},c.default.createElement("div",{className:"form-check-inline"},c.default.createElement("label",{className:"form-check-label"},c.default.createElement("input",{type:"radio",className:"form-check-input",value:a,onChange:e.doNothing,checked:n===a,name:"optradio"}),e.props.optionsFormatting(t,r))))})),c.default.createElement("br",null),s&&c.default.createElement("div",{className:"text-right"},c.default.createElement(h.default,{cta:{txt:"Continuer",class:"btn-primary",link:"/",visible:!0,onAction:function(){e.onNextStep()}}})),1==o&&0==s&&c.default.createElement("div",{className:"text-right"},c.default.createElement("button",{className:"btn btn-primary",onClick:this.onReturnShop},"Retour sur la boutique"))))}}]),t}(l.Component));t.default=N},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),u=a(2),m=n(u),f=a(1),p=n(f),h=p.default._store.getEnv(),v=h.scheme,b=h.domain,g=h.subdomain,y=h.apiProd,E=h.domainApi,_=y?g:"shop",I=(v+"://"+_+"."+(y?E:b)).replace("__API__","shop"),S=m.default.CancelToken,N=(m.default.defaults.headers.common.Authorization,function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={title:"Mode de Paiement",items:[],selected_item:a.props.options,isLoaded:!1,Bearer:"",pathGetItems:I+"/public/options/panier/"+a.props.magasinId},a}return s(t,e),l(t,[{key:"fetchForm",value:function(){var e=this;m.default.get(this.state.pathGetItems,{cancelToken:new S(function(e){i=e})}).then(function(t){e.setState({isLoaded:!0,items:t.data})})}},{key:"componentDidMount",value:function(){this.state.pathGetItems&&this.fetchForm()}},{key:"onChangeItem",value:function(e){this.setState({selected_item:[e]})}},{key:"itemSelection",value:function(e){var t=this.state.selected_item;if(t.includes(e.id))for(var a=0;a<t.length;a++)t[a]===e.id&&t.splice(a,1);else t.push(e.id);this.setState({selected_item:t}),this.props.onSelected(t)}},{key:"doNothing",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=(t.title,t.selected_item),o=t.isLoaded;return[a&&a.length>0&&[d.default.createElement("h5",{key:"0"},"Options Supplémentaires"),d.default.createElement("hr",{key:"1"})],d.default.createElement("div",{key:"1",className:"col-md-12"},!o&&d.default.createElement("div",{className:"panier_loader"},d.default.createElement("div",{align:"center"},d.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),d.default.createElement("span",{className:"sr-only"},"Loading..."))),o&&d.default.createElement("ul",{className:"list-group"},a.map(function(t,a){return d.default.createElement("li",{key:a,className:"list-group-item",onClick:function(){return e.itemSelection(t)},style:{cursor:"pointer",border:n.includes(t.id)?"2px solid lightblue":"1px solid lightgrey"}},d.default.createElement("div",{className:"form-check-inline"},d.default.createElement("label",{className:"form-check-label",style:{cursor:"pointer"}},n.includes(t.id)&&d.default.createElement("i",{className:"far fa-check-circle"}),!n.includes(t.id)&&d.default.createElement("i",{className:"far fa-circle"}),e.props.optionsFormatting(t))))})))]}}]),t}(c.Component));t.default=N},function(e,t,a){"use strict";function n(e){return o(e)||r(e)||s()}function o(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0});var i="https://js.stripe.com/v3",l=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,c="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",d=function(){for(var e=document.querySelectorAll('script[src^="'.concat(i,'"]')),t=0;t<e.length;t++){var a=e[t];if(l.test(a.src))return a}return null},u=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",a=document.createElement("script");a.src="".concat(i).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(a),a},m=function(e){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.5.0"})},f=null,p=function(e){return null!==f?f:f=new Promise(function(t,a){if("undefined"==typeof window)return void t(null);if(window.Stripe&&e&&console.warn(c),window.Stripe)return void t(window.Stripe);try{var n=d();n&&e?console.warn(c):n||(n=u(e)),n.addEventListener("load",function(){window.Stripe?t(window.Stripe):a(new Error("Stripe.js not available"))}),n.addEventListener("error",function(){a(new Error("Failed to load Stripe.js"))})}catch(e){return void a(e)}})},h=function(e,t){if(null===e)return null;var a=e.apply(void 0,n(t));return m(a),a},v=Promise.resolve().then(function(){return p(null)}),b=!1;v.catch(function(e){b||console.warn(e)});var g=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return b=!0,v.then(function(e){return h(e,t)})};t.loadStripe=g},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),c=a(7),d={iconStyle:"solid",hidePostalCode:!0,style:{base:{color:"#32325D",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#AAB7C4"}},invalid:{color:"#FA755A",iconColor:"#FA755A"}}},u=function(e){var t=e.label,a=e.id,n=e.type,o=e.placeholder,r=e.required,s=e.autoComplete,i=e.value,c=e.onChange;return l.default.createElement("div",{className:"form-group"},l.default.createElement("label",{htmlFor:a},t),l.default.createElement("input",{className:"form-control",id:a,type:n,placeholder:o,required:r,autoComplete:s,value:i,onChange:c}))},m=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={visible:!0,name:""},a.handleSubmit=a.handleSubmit.bind(a),a}return r(t,e),s(t,[{key:"arrondi2ch",value:function(e){return parseFloat(Math.round(100*parseFloat(e))/100).toFixed(2)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.stripe,n=t.elements;if(a&&n){var o=this;a.confirmCardPayment(o.props.parent.stripe_client_secret,{payment_method:{card:n.getElement(c.CardElement),billing_details:{name:o.state.name}}}).then(function(e){e.error?alert("Une erreur est survenue :"+e.error.message):"succeeded"===e.paymentIntent.status&&(o.setState({visible:!1}),location.href=o.props.parent.redirect_after_pay)})}}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{className:"py-2"},!this.state.visible&&l.default.createElement("div",{className:"panier_loader py-3"},l.default.createElement("div",{align:"center"},l.default.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),l.default.createElement("span",{className:"sr-only"},"Loading...")),l.default.createElement("div",{className:"front_h2",style:{marginTop:"20px"},align:"center"},"Redirection en cours ...")),this.state.visible&&l.default.createElement("form",{className:"Form",onSubmit:this.handleSubmit},l.default.createElement("div",{className:"form-group"},l.default.createElement(u,{className:"form-control",label:"Nom du titulaire de la carte",id:"name",type:"text",placeholder:"MR/MME NOM PRENOM",required:!0,autoComplete:"name",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})}})),l.default.createElement("div",{className:"form-group"},l.default.createElement("label",null,"Informations de votre carte (formulaire sécurisé) "),l.default.createElement("div",{id:"card-element",className:"form-control",style:{paddingTop:"0.035rem",paddingBottom:"0.035rem"}},l.default.createElement(c.CardElement,{options:d}))),l.default.createElement("button",{className:"btn btn-block btn-primary",disabled:!this.props.stripe},"Payer ",this.arrondi2ch(this.props.parent.total)," ",this.props.parent.devise.sign)))}}]),t}(l.default.Component);t.default=m},function(e,t,a){var n=a(24);"string"==typeof n&&(n=[[e.i,n,""]]);a(26)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,a){t=e.exports=a(25)(),t.push([e.i,'.ribbon span{font-size:14px;color:#fff;text-transform:uppercase;text-align:center;font-weight:700;line-height:20px;transform:rotate(-45deg);width:108px;display:block;background:rgba(0,161,255,.815);box-shadow:0 3px 10px -5px #000;position:absolute;top:18px;left:-28px}.ribbon span:before{left:0;border-left:3px solid rgba(250,225,0,.815);border-right:3px solid transparent;border-top:3px solid rgba(250,225,0,.815)}.ribbon span:after,.ribbon span:before{content:"";position:absolute;top:100%;z-index:-1;border-bottom:3px solid transparent}.ribbon span:after{right:0;border-right:3px solid rgba(250,225,0,.815);border-left:3px solid transparent}.blue span{background:rgba(0,161,255,.815)}.blue span:before{border-left-color:#1e5799;border-top-color:#1e5799}.blue span:after{border-right-color:#1e5799;border-top-color:#1e5799}.yellow span{background:rgba(245,201,7,.956)}.yellow span:before{border-left-color:#f0d645;border-top-color:#b8a81a}.yellow span:after{border-right-color:#f0d645;border-top-color:#b8a81a}.StripeElement--webkit-autofill{background:transparent!important}.StripeElement{width:100%;padding:11px 15px 11px 0}.login__container{max-width:390px;margin:1rem auto}.login__header{text-align:center}.btns-forget-pwd{display:inline-flex}.login-choice,.login-choice span{text-align:center;width:100%}.login-choice span{font:400 16px/1.5 Sailec-Regular,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;list-style:none;box-sizing:inherit;margin-bottom:0;font-family:Sailec-Regular;color:#5b6987;display:grid;font-size:16px;line-height:26px;align-items:center;grid-template-columns:minmax(20px,1fr) auto minmax(20px,1fr);grid-gap:19px}.login-choice span:after,.login-choice span:before{content:"";border-top:1px solid #e5e8ed}',""])},function(e,t,a){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t];a[2]?e.push("@media "+a[2]+"{"+a[1]+"}"):e.push(a[1])}return e.join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&n[s[0]]||(a&&!s[2]?s[2]=a:a&&(s[2]="("+s[2]+") and ("+a+")"),e.push(s))}},e}},function(e,t){function a(e,t){for(var a=0;a<e.length;a++){var n=e[a],o=m[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(l(n.parts[r],t))}else{for(var s=[],r=0;r<n.parts.length;r++)s.push(l(n.parts[r],t));m[n.id]={id:n.id,refs:1,parts:s}}}}function n(e){for(var t=[],a={},n=0;n<e.length;n++){var o=e[n],r=o[0],s=o[1],i=o[2],l=o[3],c={css:s,media:i,sourceMap:l};a[r]?a[r].parts.push(c):t.push(a[r]={id:r,parts:[c]})}return t}function o(e,t){var a=h(),n=g[g.length-1];if("top"===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function r(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function i(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function l(e,t){var a,n,o;if(t.singleton){var l=b++;a=v||(v=s(t)),n=c.bind(null,a,l,!1),o=c.bind(null,a,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=i(t),n=u.bind(null,a),o=function(){r(a),a.href&&URL.revokeObjectURL(a.href)}):(a=s(t),n=d.bind(null,a),o=function(){r(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function c(e,t,a,n){var o=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function d(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function u(e,t){var a=t.css,n=t.sourceMap;n&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([a],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var m={},f=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},p=f(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),h=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,b=0,g=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},void 0===t.singleton&&(t.singleton=p()),void 0===t.insertAt&&(t.insertAt="bottom");var o=n(e);return a(o,t),function(e){for(var r=[],s=0;s<o.length;s++){var i=o[s],l=m[i.id];l.refs--,r.push(l)}if(e){a(n(e),t)}for(var s=0;s<r.length;s++){var l=r[s];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete m[l.id]}}}};var y=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}()}])});