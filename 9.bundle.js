(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1260:function(e,t,n){var r=n(1261);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(80)(r,o);r.locals&&(e.exports=r.locals)},1261:function(e,t,n){(e.exports=n(79)(!1)).push([e.i,'.rjsf #root_rgpd {\r\n  margin-right: 6px;\r\n}\r\n\r\n.rjsf input[type="checkbox"],\r\n.rjsf input[type="radio"] {\r\n  margin-right: 6px;\r\n}\r\n\r\n.radius-border-input-email input {\r\n  border-bottom-right-radius: 0;\r\n  border-top-right-radius: 0;\r\n}\r\n\r\n.rjsf.form-newsletter {\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n}\r\n\r\ndiv.field-error.has-error.has-danger .form-control {\r\n  border-color: var(--danger);\r\n  border-width: 1px;\r\n}\r\n\r\n.we-dropdown-item.we-disabled {\r\n  pointer-events: none;\r\n}\r\n\r\n.wifeo-form-custom [contenteditable]:focus {\r\n  outline: 0px solid transparent;\r\n}\r\n.wifeo-form-custom textarea {\r\n  resize: none;\r\n}\r\n',""])},1262:function(e,t,n){var r=n(1263);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(80)(r,o);r.locals&&(e.exports=r.locals)},1263:function(e,t,n){(e.exports=n(79)(!1)).push([e.i,".icon-actions-form {\r\n  width: 36px;\r\n  text-align: center;\r\n}\r\n\r\n.hidden-title label.control-label {\r\n  visibility: hidden;\r\n}\r\n\r\n/* Extra small devices (phones, less than 768px) */\r\n/* .width-form-custom {\r\n  width: 60%;\r\n} */\r\n\r\n/* Small devices (tablets, 768px and up) */\r\n/* @media (min-width: 768px) { ... } */\r\n\r\n/* Medium devices (desktops, 992px and up) */\r\n/* @media (min-width: 992px) {\r\n  .width-form-custom {\r\n    width: 66%;\r\n  }\r\n} */\r\n\r\n/* Large devices (large desktops, 1200px and up) */\r\n/* @media (min-width: 1200px) {\r\n  .width-form-custom {\r\n    width: 76%;\r\n  }\r\n} */\r\n",""])},1275:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(729),i=n(778),l=n.n(i),s=n(17),c=n.n(s),u=n(238),p=n.n(u),d=n(58);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,n,r,a=y(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),w(v(t=a.call(this,e)),"handleMouseLeave",(function(){t.setState({ratingPreview:0})})),w(v(t),"handleMouseOver",(function(e){t.setState({ratingPreview:e+1})})),w(v(t),"handleClick",(function(e){var n=t.props.onChange;t.setState({rating:e+1,ratingPreview:0},(function(){n(e+1)}))})),t.state={stars:new Array(5).fill(5),rating:0,ratingPreview:0},t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.state,n=t.stars,r=t.rating,a=t.ratingPreview;return o.a.createElement("span",{className:"mr-2 wrapper-stars",onMouseLeave:function(){return e.handleMouseLeave()}},n.map((function(t,n){return r&&n<r||a&&n<a?o.a.createElement("i",{key:n,className:"fas fa-star ".concat("fa-2x cursor-pt"),onMouseOver:function(){return e.handleMouseOver(n)},onClick:function(){return e.handleClick(n)}}):o.a.createElement("i",{key:n,className:"far fa-star ".concat("fa-2x cursor-pt"),onMouseOver:function(){return e.handleMouseOver(n)}})})))}}])&&f(t.prototype,n),r&&f(t,r),i}(r.PureComponent),E=n(959),S=n.n(E);var k=c.a._css,O=function(e){var t=e.prefixCss,n=e.mode,r=e.onAction,a=e.useMarginT,i=e.style,l=e.btnCss,s=e.pendingSend,c=e.cta,u=e.btnAlign;if(l&&(c.class=c.class+" "+l),s)return o.a.createElement("i",{className:"fas fa-spinner fa-pulse"});var p,d,m,f="text-center";return"right"===u?f="text-right":"left"===u&&(f="text-left"),o.a.createElement("div",(p={className:!1!==a?"mt-2":""},d="className",m=k("",!1!==a&&"mt-2",f),d in p?Object.defineProperty(p,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[d]=m,p),o.a.createElement(It,{prefixCss:t,mode:n,cta:c,style:i,onAction:r}))},C=n(724),P=n(18),F=n.n(P);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,r,a=j(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={selectedField:null},t}return t=i,(n=[{key:"selected",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onAddFormItem(JSON.parse(JSON.stringify(this.props)))}},{key:"render",value:function(){var e=this;return o.a.createElement("button",{className:"we-dropdown-item",onClick:function(t){return e.selected(t)},style:{cursor:"pointer"}},this.props.labelMenu)}}])&&N(t.prototype,n),r&&N(t,r),i}(o.a.Component);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t,n,r,a=q(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={formItems:[],inputs:[],form:function(){}},t}return t=i,(n=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:""},this.props.inputs.map((function(t,n){return t.labelMenu!==e.props.exclude&&o.a.createElement(R,A({key:n},t,{onAddFormItem:e.props.onAddFormItem}))})))}}])&&L(t.prototype,n),r&&L(t,r),i}(r.Component);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $(this,n)}}function $(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=c.a._Popup,ee=c.a._reactSortableHoc.sortableHandle,te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(i,e);var t,n,r,a=K(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={placeholder:t.props.params.placeholder,label:t.props.params.label,helpText:t.props.params.helpText,params:t.props.params,required:t.props.params.required,popoverIsOpen:!1,showHelpText:!!t.props.params.helpText,showFormUI:!1,canSort:!0},t.handleChangeLabel=t.handleChangeLabel.bind(Q(t)),t.ctrlContentLabel=t.ctrlContentLabel.bind(Q(t)),t.handleChangePlaceholder=t.handleChangePlaceholder.bind(Q(t)),t.handleChangeRequired=t.handleChangeRequired.bind(Q(t)),t.handleSubmit=t.handleSubmit.bind(Q(t)),t.onDelete=t.onDelete.bind(Q(t)),t.onPositionDown=t.onPositionDown.bind(Q(t)),t.onChangeType=t.onChangeType.bind(Q(t)),t.onAddOption=t.onAddOption.bind(Q(t)),t.onPositionUp=t.onPositionUp.bind(Q(t)),t.showHelpText=t.showHelpText.bind(Q(t)),t.onAddFormItem=t.onAddFormItem.bind(Q(t)),t.refLabel=o.a.createRef(),t.refHelpText=o.a.createRef(),t.limitations={lengthField:{max:350}},t}return t=i,(n=[{key:"handleChangeLabel",value:function(){var e=this.refLabel.current.textContent,t=J({},this.props.params);t.label=e,this.props.onUpdateField(t)}},{key:"handleChangePlaceholder",value:function(e){var t=this,n=e.target.value;this.setState({placeholder:n},(function(){var e=J({},t.props.params);e.placeholder=n,t.props.onUpdateField(e)}))}},{key:"handleChangeRequired",value:function(e){var t=this,n=e.target.checked;this.setState({required:n},(function(){var e=J({},t.props.params);e.required=n,t.props.onUpdateField(e)}))}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"onPositionUp",value:function(){this.props.onPositionUp()}},{key:"showHelpText",value:function(){var e=this;this.setState({showHelpText:!this.state.showHelpText},(function(){if(e.state.showHelpText){var t=J({},e.props.params);e.props.initHelpText(t)}else{var n=J({},e.props.params);n.helpText="",e.props.onUpdateField(n)}}))}},{key:"onPositionDown",value:function(){this.props.onPositionDown()}},{key:"onChangeType",value:function(){this.setState({showFormUI:!0})}},{key:"onAddOption",value:function(){this.props.onAddOption()}},{key:"onUpdateField",value:function(){this.props.onUpdateField()}},{key:"onDelete",value:function(){this.canDeleteItem()&&this.props.onDelete()}},{key:"getValueSelectedSelect",value:function(){var e=this.props.params;return(e.options.find((function(e){return!0===e.selected}))||e.options[0]).label}},{key:"onAddFormItem",value:function(e){this.props.onReplace(e)}},{key:"canDeleteItem",value:function(){return-1===["Email"].indexOf(this.props.params.name)}},{key:"ctrlContentLabel",value:function(e){this.refLabel.current.textContent.length===this.limitations.lengthField.max&&8!=e.keyCode&&e.preventDefault()}},{key:"ctrlContentPlaceholder",value:function(e){}},{key:"render",value:function(){var e=this,t=this.state,n=t.label,r=(t.helpText,t.placeholder),a=t.params,i=t.required,l=t.popoverIsOpen,s=t.showHelpText,c=t.showFormUI,u=t.canSort,p=this.onDelete,d=this.onPositionDown,m=this.onPositionUp,f=this.onAddOption,h=this.onAddFormItem,y=this.props,b=y.data,v=y.index,g=y.formItems,w=y.ui,x=s?"fas fa-eye":"fas fa-eye-slash",E=-1===["radio","checkbox"].indexOf(a.type),S=this.canDeleteItem(),k=S?{}:{cursor:"not-allowed"},O=ee((function(){return o.a.createElement("div",{title:"Modifier l'ordre",style:{margin:"auto 6px auto 0px"},className:"we-btn we-btn-sm we-btn-secondary we-p-0"},o.a.createElement("i",{className:"far fa-arrows-alt",style:{lineHeight:"1.5",padding:".25rem .5rem",cursor:"move"}}))}));return o.a.createElement("div",{className:""},o.a.createElement("div",{className:""},o.a.createElement("div",{className:"".concat(E?"we-w-100":"we-d-flex"),style:!E&&{position:"relative",marginBottom:"1rem",paddingTop:"5px"}||null},u&&!E&&o.a.createElement(O,null),o.a.createElement("div",W({ref:this.refLabel,onInput:this.handleChangeLabel,className:"we-text-left we-font-weight-bold we-w-100",contentEditable:!0,dangerouslySetInnerHTML:{__html:n},style:{visibility:!1===w.label?"hidden":"visible"},onPaste:this.ctrlContentLabel,onKeyDown:this.ctrlContentLabel,onKeyPress:function(e){13===e.which&&e.preventDefault()}},"onPaste",(function(){setTimeout((function(){e.refLabel.current.innerHTML=e.refLabel.current.textContent}),0)}))),o.a.createElement("div",{className:"we-d-flex",style:E&&{position:"relative"}||null},u&&E&&o.a.createElement(O,null),E&&-1===["date","select","textarea"].indexOf(a.type)&&o.a.createElement("input",{type:"text",className:"we-form-control we-w-100",value:r,onChange:this.handleChangePlaceholder,maxLength:this.limitations.lengthField.max}),E&&"date"===a.type&&o.a.createElement("input",{type:"date",className:"we-form-control we-w-100",disabled:!0}),E&&"select"===a.type&&o.a.createElement("div",{className:"we-w-100 pos-rel"},o.a.createElement("select",{type:"text",className:"we-form-control we-w-100",value:this.getValueSelectedSelect(),style:{background:"white"},disabled:!0},o.a.createElement("option",null,this.getValueSelectedSelect()))),E&&"textarea"===a.type&&o.a.createElement("textarea",{rows:"2",className:"we-form-control we-w-100",value:r,onChange:this.handleChangePlaceholder}),o.a.createElement("div",{className:"we-d-flex we-text-black we-align-items-center"},o.a.createElement(Z,{open:l,onClose:function(){e.setState({popoverIsOpen:!1,showFormUI:!1})},contentStyle:{color:"initial",width:"250px",zIndex:"1015"},overlayStyle:{zIndex:"1"},trigger:o.a.createElement("div",{className:"btn ml-2 mr-2 test",style:{width:"32px",height:"32px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.25)",backgroundColor:"#ffffff",borderRadius:"50%"}},o.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",borderRadius:"50%"}},o.a.createElement("i",{className:"we-text-black fas fa-ellipsis-v"}))),position:["bottom center","top center","left center","right center"],mouseLeaveDelay:250,closeOnDocumentClick:!0},o.a.createElement("div",{className:"we-text-left"},!c&&o.a.createElement("div",{style:{textAlign:"left"}},S&&o.a.createElement("span",null,o.a.createElement("label",{className:"we-dropdown-item ".concat(S?"":"we-disabled"),htmlFor:"checkbox-required-".concat(a.name),style:{}},o.a.createElement("i",{className:"icon-actions-form far fa-star"})," ","Champ obligatoire"," ",o.a.createElement("div",null,o.a.createElement("input",{id:"checkbox-required-".concat(a.name),type:"checkbox",style:{margin:"0px 0px 0px 5px"},className:"we-form-check-input",checked:i,onChange:this.handleChangeRequired})))),o.a.createElement("button",{className:"we-dropdown-item",type:"button",onClick:this.showHelpText},o.a.createElement("i",{className:"icon-actions-form ".concat(x)})," ","Afficher aide"),a.options&&!1!==a.canAddOption&&o.a.createElement("button",{className:"we-dropdown-item",type:"button",onClick:f},o.a.createElement("i",{className:"icon-actions-form fas fa-plus"})," ","Ajouter une option"),0!==v&&o.a.createElement("button",{className:"we-dropdown-item",type:"button",onClick:m},o.a.createElement("i",{className:"icon-actions-form fas fa-long-arrow-alt-up"})," ","Déplacer vers le haut"),g.length-1!==v&&o.a.createElement("button",{className:"we-dropdown-item",type:"button",onClick:d},o.a.createElement("i",{className:"icon-actions-form fas fa-long-arrow-alt-down"})," ","Déplacer vers le bas"),S&&o.a.createElement("span",{style:k},o.a.createElement("button",{className:"we-dropdown-item",type:"button",onClick:this.onChangeType},o.a.createElement("i",{className:"icon-actions-form fas fa-exchange-alt"})," ","Remplacer le champ"))),c&&o.a.createElement("div",null,o.a.createElement("button",{className:"we-dropdown-item mb-2",type:"button",style:{color:"#519bda",cursor:"pointer"},onClick:function(){e.setState({showFormUI:!1})}},o.a.createElement("i",{className:"fas fa-chevron-left"})," Retour"),o.a.createElement(V,{inputs:b,form:[],onAddFormItem:h,exclude:a.labelMenu})))),o.a.createElement("div",{className:"we-btn we-mr-1",style:{width:"32px",height:"32px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.25)",backgroundColor:"#ffffff",visibility:S?"visible":"hidden"},onClick:p},o.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},o.a.createElement("i",{className:"fas fa-times-circle"}))),o.a.createElement("div",{style:{width:"32px",height:"32px",backgroundColor:"transparent",display:"inline-block",visibility:a.required?"visible":"hidden"}},o.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},o.a.createElement("i",{className:"fas fa-star"}))))))))}}])&&G(t.prototype,n),r&&G(t,r),i}(o.a.Component);function ne(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t,n,r){var o=-1,a=ne(e),i={};for(var l in a)a[l][r]===t[r]&&(o=l,i=a[l]);if(o>-1){var s=parseInt(o)+parseInt(n);s<0?s=0:s>=a.length&&(s=a.length);var c=a.slice();return c.splice(o,1),c.splice(s,0,i),c}return a}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ce(e,t,n[t])}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=he(e);if(t){var o=he(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=c.a._Popup,be=c.a._reactSortableHoc.sortableHandle,ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(i,e);var t,n,r,a=de(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={placeholder:t.props.params.placeholder,label:t.props.params.label,helpText:t.props.params.helpText,params:t.props.params,required:t.props.params.required,popoverIsOpen:!1,showHelpText:!!t.props.params.helpText,canSort:!0},t.handleChangeLabel=t.handleChangeLabel.bind(fe(t)),t.handleChangeSelected=t.handleChangeSelected.bind(fe(t)),t.onDelete=t.onDelete.bind(fe(t)),t.onPositionDown=t.onPositionDown.bind(fe(t)),t.onPositionUp=t.onPositionUp.bind(fe(t)),t.refLabel=o.a.createRef(),t.refHelpText=o.a.createRef(),t.setWrapperRef=t.setWrapperRef.bind(fe(t)),t.handleClickOutside=t.handleClickOutside.bind(fe(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){}},{key:"handleChangeSelected",value:function(e){e.target.checked;var t=se({},this.props.params),n=ie(this.props.parentParams.options);n.forEach((function(e){e.value===t.value?e.selected=void 0===e.selected||!e.selected:e.selected=!1}));var r=se({},this.props.parentParams,{options:n});this.props.onUpdateField(r,"selected")}},{key:"handleChangeLabel",value:function(){var e=this.refLabel.current.textContent,t=se({},this.props.params);t.label=e,this.onUpdateField(t,"handleChangeLabel")}},{key:"onPositionUp",value:function(){var e=se({},this.props.params),t=oe(ie(this.props.parentParams.options),e,-1,"value"),n=se({},this.props.parentParams,{options:t});this.props.onUpdateField(n)}},{key:"onPositionDown",value:function(){var e=se({},this.props.params),t=oe(ie(this.props.parentParams.options),e,1,"value"),n=se({},this.props.parentParams,{options:t});this.props.onUpdateField(n)}},{key:"onUpdateField",value:function(e,t){var n=ie(this.props.parentParams.options),r=n.findIndex((function(t){return t.value==e.value}));n[r]=e;var o=se({},this.props.parentParams,{options:n});this.props.onUpdateField(o,t)}},{key:"onDelete",value:function(){var e=ie(this.props.parentParams.options),t=this.props.params.value;for(var n in e)e[n].value===t&&e.splice(n,1);var r=se({},this.props.parentParams,{options:e});this.props.onUpdateField(r)}},{key:"render",value:function(){var e=this,t=this.state,n=t.label,r=(t.helpText,t.placeholder,t.params),a=(t.required,t.popoverIsOpen),i=t.canSort,l=this.props,s=l.parentParams,c=l.index,u=l.styleOption,p=l.inputUi,d=l.labelSelected,m=l.styleLabelSelected,f=this.onDelete,h=this.onPositionDown,y=this.onPositionUp,b=be((function(){return o.a.createElement("div",{title:"Modifier l'ordre",style:{margin:"auto 6px auto 0px"},className:"we-btn we-btn-sm we-btn-secondary we-p-0"},o.a.createElement("i",{className:"far fa-arrows-alt",style:{lineHeight:"1.5",padding:".25rem .5rem",cursor:"move"}}))}));return o.a.createElement("div",{ref:this.setWrapperRef},o.a.createElement("div",{style:{backgroundColor:"select"===s.type?"white":null}},o.a.createElement("div",{className:"we-d-flex we-text-black ".concat("select"===s.type?"":"we-align-items-center we-pb-2"," "),style:{position:"relative"}},i&&o.a.createElement(b,null),o.a.createElement("div",{ref:this.refLabel,onInput:this.handleChangeLabel,className:"we-text-left we-d-flex we-flex-column py-2 ".concat("select"!==s.type?"we-pl-4":"we-pl-2","  we-w-100"),style:u,contentEditable:!0,dangerouslySetInnerHTML:{__html:n},onKeyPress:function(e){13===e.which&&e.preventDefault()},onPaste:function(){setTimeout((function(){e.refLabel.current.innerHTML=e.refLabel.current.textContent}),0)}}),o.a.createElement("div",{className:"we-d-flex"},p,o.a.createElement("div",{className:"we-d-flex we-align-items-center"},o.a.createElement(ye,{open:a,contentStyle:{color:"initial",width:"240px",zIndex:"1015"},overlayStyle:{zIndex:"1"},trigger:o.a.createElement("div",{className:"we-btn we-ml-2 we-mr-2",style:{width:"32px",height:"32px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.25)",backgroundColor:"#ffffff",borderRadius:"50%"}},o.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",borderRadius:"50%"}},o.a.createElement("i",{className:"fas fa-ellipsis-v we-text-black"}))),position:["bottom center","top center","left center","right center"],mouseLeaveDelay:250,closeOnDocumentClick:!0},o.a.createElement("div",{style:{textAlign:"left"}},o.a.createElement("label",{className:"we-dropdown-item",htmlFor:"checkbox-required-".concat(r.value)},o.a.createElement("i",{className:"icon-actions-form far fa-heart",style:m})," ",d,o.a.createElement("div",null,o.a.createElement("input",{id:"checkbox-required-".concat(r.value),type:"checkbox",style:{margin:"0px 0px 0px 5px"},className:"we-form-check-input",checked:r.selected,onChange:this.handleChangeSelected}))),0!==c&&o.a.createElement("button",{className:"we-dropdown-item",type:"button",onClick:y},o.a.createElement("i",{className:"icon-actions-form fas fa-long-arrow-alt-up"})," ","Déplacer vers le haut"),s.options.length-1!==c&&o.a.createElement("button",{className:"we-dropdown-item",type:"button",onClick:h},o.a.createElement("i",{className:"icon-actions-form fas fa-long-arrow-alt-down"})," ","Déplacer vers le bas"))),o.a.createElement("div",{className:"we-btn we-mr-1",style:{width:"32px",height:"32px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.25)",backgroundColor:"#ffffff",visibility:s.options.length>1?"visible":"hidden"},onClick:f},o.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},o.a.createElement("i",{className:"fas fa-times-circle"}))),o.a.createElement("div",{style:{width:"32px",height:"32px",backgroundColor:"#ffffff",display:"inline-block",visibility:r.required?"visible":"hidden"}},o.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},o.a.createElement("i",{className:"fas fa-star"}))))))))}}])&&ue(t.prototype,n),r&&ue(t,r),i}(o.a.Component);ve.defaultProps={labelSelected:"Coché par défaut",styleLabelSelected:{paddingRight:"0px"}};var ge=ve;function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pe(e);if(t){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(i,e);var t,n,r,a=ke(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={helpText:t.props.params.helpText,showHelpText:!!t.props.params.helpText,showFormUI:!1},t.handleChangeHelpText=t.handleChangeHelpText.bind(Ce(t)),t.ctrlContent=t.ctrlContent.bind(Ce(t)),t.limitations={lengthField:{max:350}},t.refHelpText=o.a.createRef(),t}return t=i,(n=[{key:"ctrlContent",value:function(e){this.refHelpText.current.textContent.length===this.limitations.lengthField.max&&8!=e.keyCode&&e.preventDefault()}},{key:"handleChangeHelpText",value:function(){var e=this.refHelpText.current.textContent,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xe(e,t,n[t])}))}return e}({},this.props.params);t.helpText=e,this.props.onUpdateField(t)}},{key:"onUpdateField",value:function(){this.props.onUpdateField()}},{key:"render",value:function(){var e=this.state.helpText;return e&&o.a.createElement("small",{className:"form-text text-muted"},o.a.createElement("div",{ref:this.refHelpText,onInput:this.handleChangeHelpText,className:"we-text-left",contentEditable:!0,dangerouslySetInnerHTML:{__html:e},onPaste:this.ctrlContent,onKeyDown:this.ctrlContent}))||null}}])&&Ee(t.prototype,n),r&&Ee(t,r),i}(o.a.Component);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ae(e,t,n[t])}))}return e}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var o=De(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=c.a._reactSortableHoc,Me=Le.SortableContainer,qe=Le.SortableItem,He=Le.arrayMove,Be=(Le.sortableHandle,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(i,e);var t,n,r,a=Te(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ae(Re(t=a.call(this,e)),"onSortEnd",(function(e){var n=e.oldIndex,r=e.newIndex;if(n!==r){var o=Ne({},t.props.item,{options:He(t.props.item.options,n,r)});t.onUpdateField(o)}})),t.onDelete=t.onDelete.bind(Re(t)),t.onAddOption=t.onAddOption.bind(Re(t)),t.onPositionDown=t.onPositionDown.bind(Re(t)),t.onPositionUp=t.onPositionUp.bind(Re(t)),t.onUpdateField=t.onUpdateField.bind(Re(t)),t.initHelpText=t.initHelpText.bind(Re(t)),t.onSortEnd=t.onSortEnd.bind(Re(t)),t}return t=i,(n=[{key:"onDelete",value:function(){this.props.onDelete(this.props.item.name)}},{key:"onPositionUp",value:function(){this.props.onPositionUp(this.props.item,this.props.key)}},{key:"onPositionDown",value:function(){this.props.onPositionDown(this.props.item,this.props.key)}},{key:"onAddOption",value:function(){this.props.onAddOption(this.props.item,this.props.key)}},{key:"onUpdateField",value:function(e){this.props.onUpdateField(e)}},{key:"initHelpText",value:function(e){this.props.initHelpText(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.formItems,a=t.index,i=t.item,l=t.ui,s=this.onDelete,c=this.onPositionDown,u=this.onAddOption,p=this.onPositionUp,d=this.onUpdateField,m=this.initHelpText,f={position:"absolute",left:"39px",top:"14px"};return o.a.createElement("div",null,o.a.createElement(te,{key:i.name,index:a,formItems:r,params:i,onDelete:s,onPositionUp:p,onPositionDown:c,onAddOption:u,onUpdateField:d,initHelpText:m,data:n,onReplace:function(t){return e.props.onReplace(t,e.props.item)},ui:l,toggleSelect:function(){return e.toggleSelect()}}),"select"===i.type&&o.a.createElement(Me,{axis:"xy",useDragHandle:!0,distance:0,onSortEnd:this.onSortEnd},o.a.createElement("div",{className:"we-w-100"},i.options.map((function(t,n){return o.a.createElement(qe,{key:"options-sortable-".concat(n),index:n,sortIndex:n},o.a.createElement("div",null,o.a.createElement(ge,{key:t.value,index:n,params:Ne({},t),parentParams:i,onDelete:function(t){return e.props.onUpdateOpt({options:t},"onDelete")},onPositionUp:function(t){return e.props.onUpdateOpt({options:t},"onPositionUp")},onPositionDown:function(t){return e.props.onUpdateOpt({options:t},"onPositionDown")},onUpdateField:function(t,n){return e.props.onUpdateOpt({options:t},"onUpdateField",n)},styleOption:{borderLeft:"1px solid #ced4da",borderRight:"1px solid #ced4da",borderBottom:i.options.length-1===n?"1px solid #ced4da":void 0},labelSelected:"Choisie par défaut"})))})))),"radio"===i.type&&o.a.createElement(Me,{axis:"xy",useDragHandle:!0,distance:0,onSortEnd:this.onSortEnd},o.a.createElement("div",{className:"we-w-100"},i.options.map((function(t,n){return o.a.createElement(qe,{key:"options-sortable-".concat(n),index:n,sortIndex:n},o.a.createElement("div",null," ",o.a.createElement(ge,{key:t.value,index:n,params:Ne({},t),parentParams:i,onDelete:function(t){return e.props.onUpdateOpt({options:t},"onDelete")},onPositionUp:function(t){return e.props.onUpdateOpt({options:t},"onPositionUp")},onPositionDown:function(t){return e.props.onUpdateOpt({options:t},"onPositionDown")},onUpdateField:function(t,n){return e.props.onUpdateOpt({options:t},"onUpdateField",n)},styleOption:{},inputUi:o.a.createElement("input",{style:f,type:"radio",disabled:!0,checked:t.selected})})))})))),"checkbox"===i.type&&o.a.createElement(Me,{axis:"xy",useDragHandle:!0,distance:0,onSortEnd:this.onSortEnd},o.a.createElement("div",{className:"we-w-100"},i.options.map((function(t,n){return o.a.createElement(qe,{key:"options-sortable-".concat(n),index:n,sortIndex:n},o.a.createElement("div",null,o.a.createElement(ge,{key:t.value,index:n,params:Ne({},t),parentParams:i,onDelete:function(t){return e.props.onUpdateOpt({options:t},"onDelete")},onPositionUp:function(t){return e.props.onUpdateOpt({options:t},"onPositionUp")},onPositionDown:function(t){return e.props.onUpdateOpt({options:t},"onPositionDown")},onUpdateField:function(t,n){return e.props.onUpdateOpt({options:t},"onUpdateField",n)},styleOption:{},inputUi:o.a.createElement("input",{style:f,type:"checkbox",disabled:!0,checked:t.selected})})))})))),o.a.createElement(Fe,{key:"help-".concat(i.name),params:i,onUpdateField:d,initHelpText:m}))}}])&&_e(t.prototype,n),r&&_e(t,r),i}(o.a.Component));n(1262);function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||Je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(e){if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nt(e,t,n[t])}))}return e}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tt(e);if(t){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?et(e):t}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rt,ot=c.a._Popup,at=c.a._loadScript,it=c.a._debounce,lt=c.a._store.getEnv(),st=lt.scheme,ct=lt.domain,ut=lt.subdomain,pt=lt.apiProd,dt=lt.domainApi,mt=pt?dt:ct,ft=pt?ut:"form",ht="".concat(st,"://").concat(ft,".").concat(mt).replace("__API__","form"),yt=p.a.CancelToken,bt=c.a._css;n(1260);var vt=[{type:"email",labelMenu:"Email",label:"Votre Email",className:"form-control",name:"email-1522430032467",required:!1,placeholder:"email@example.com",helpText:"",minLength:1,maxLength:50},{type:"tel",labelMenu:"Numéro de téléphone",label:"Votre numéro de téléphone",className:"form-control",name:"textarea-1522430033284",required:!1,placeholder:"Votre numéro de téléphone",helpText:"",minLength:1,maxLength:50},{type:"text",labelMenu:"Adresse",label:"Adresse",className:"form-control",name:"text-1522430032467",required:!1,placeholder:"Votre adresse",helpText:"",minLength:1,maxLength:50},{type:"date",labelMenu:"Date",label:"Date",className:"form-control",name:"text-1522430032467",required:!1,placeholder:"",helpText:"",minLength:1,maxLength:50},{type:"url",labelMenu:"URL",label:"URL",className:"form-control",name:"text-1522430032467",required:!1,placeholder:"URL",helpText:"",minLength:1,maxLength:255},{type:"text",labelMenu:"Texte court",label:"Sujet",className:"form-control",name:"text-1522430032467",required:!1,placeholder:"motif, sujet, suggestion",helpText:"",minLength:1,maxLength:50},{type:"textarea",labelMenu:"Paragraphe",label:"Votre message",className:"form-control",name:"textarea-1522430033284",required:!1,placeholder:"Votre message",helpText:"",minLength:1,maxLength:500},{type:"number",labelMenu:"Numéro",label:"Numéro",className:"form-control",name:"textarea-1522430033284",required:!1,placeholder:"Votre numéro",helpText:"",minLength:1,maxLength:50},{type:"checkbox",labelMenu:"Case à cocher",label:"",className:"form-control",name:"select-1524474743499996",canAddOption:!1,options:[{label:"Option 1",value:"option-1",selected:!1}],required:!1,helpText:""},{type:"radio",labelMenu:"Choix unique",label:"Selectionner une formule",className:"form-control",name:"select-152243003499996",options:[{label:"Option 1",value:"option-1",selected:!0},{label:"Option 2",value:"option-2"},{label:"Option 3",value:"option-3"}],required:!1,helpText:""},{type:"checkbox",labelMenu:"Selection multiple",label:"Selectionner des formules",className:"form-control",name:"select-1524474743499996",options:[{label:"Option 1",value:"option-1",selected:!0},{label:"Option 2",value:"option-2"},{label:"Option 3",value:"option-3"}],required:!1,helpText:""},{type:"select",labelMenu:"Déroulant",label:"Selectionner une formule",className:"form-control",name:"select-1522430034076",options:[{label:"Option 1",value:"option-1",selected:!0},{label:"Option 2",value:"option-2"},{label:"Option 3",value:"option-3"}],required:!1,helpText:""}],gt=c.a._reactSortableHoc,wt=gt.SortableContainer,xt=gt.SortableItem,Et=gt.arrayMove,St=(gt.sortableHandle,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(s,e);var t,n,r,i=Ye(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),nt(et(t=i.call(this,e)),"onSortEnd",(function(e){var n=e.oldIndex,r=e.newIndex;n!==r&&t.setState((function(e){var t=e.formItems;return{formItems:Et(t,n,r)}}))})),nt(et(t),"sendUpdate",it((function(){t.props.onAction({action:"updatePropsForm",params:{props:t.props,state:t.cleanFormItemsInState(),schema:t.buildSchema(),uiSchema:t.buildUiSchema()}})}),1e3)),nt(et(t),"closeModal",(function(){t.setState({showSuccessMsg:!1,openedModal:!1}),t.props.onCloseModal()})),nt(et(t),"renderMap",(function(e,n,r){var a=t.props,i=a.ui,l=a.onAction,s=(a.mode,r||{width:"100%",height:"".concat(n||300,"px"),border:"0px"});return i.map&&e.src&&o.a.createElement("div",null,o.a.createElement("div",{style:s,onClick:function(){l({action:"click_iframe"})}},o.a.createElement("iframe",{style:s,className:"embed-responsive-item d-block",src:e.src,allowtransparency:"true",allowFullScreen:!0})))}));var n=JSON.parse(JSON.stringify(t.props.schema)),r={},a={};e.autoAddUi&&(r={ratingWidget:x,captcha:Ct},a={recaptcha:{"ui:widget":"captcha","ui:options":{label:!1}},Note:{"ui:widget":"ratingWidget"},"ui:order":["Email","*"]},n.properties.Nom&&a["ui:order"].unshift("Nom"));var l=(t.props.blocks.find((function(e){return"media"===e.name}))||{item:null}).item;e.addEmail&&(localStorage.getItem("currentUser")&&"edit"!==e.mode?(a["ui:order"]=a["ui:order"].filter((function(e){return"Email"!==e})),n.properties.Email&&(delete n.properties.Email,n.required=n.required.filter((function(e){return"Email"!==e})))):n.required.find((function(e){return"Email"===e}))||(n.required.push("Email"),n.properties.Email={type:"string",format:"email",title:"Email"}));return t.state={schema:n,widgets:r,uiSchema:Ke({},t.props.uiSchema,a),error:null,item:l||null,bearer:{},isLoaded:!1,pathGet:ht+"/public/formulaire/"+t.props.idForm,pathSave:ht+"/public/reponse/"+t.props.idForm,cancelToken:null,keyForm:1,cta:(t.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta,mepRender:{full:function(e,n,r,o){return t.mepFull(!1,e,n,r,o)},"full-reverse":function(e,n,r,o){return t.mepFull(!0,e,n,r,o)},stack:function(e,n,r,o){return t.mepStack(!1,e,n,r,o)},"stack-reverse":function(e,n,r,o){return t.mepStack(!0,e,n,r,o)},"only-map":function(e,n,r,o){return t.mepOnlyMap(e,r)}},pendingSend:!1,showSuccessMsg:!1,openedModal:!1,loadingFailed:!0,forms:[],formItems:t.initFormItems(t.props.formItems),idForm:1,idFormEdit:1,popoverIsOpen:!1},t.doValidation=t.doValidation.bind(et(t)),t.refBtnSubmit=o.a.createRef(),t.onUpdateField=t.onUpdateField.bind(et(t)),t.onAddFormItem=t.onAddFormItem.bind(et(t)),t.onDeleteFormItem=t.onDeleteFormItem.bind(et(t)),t.exportData=t.exportData.bind(et(t)),t.onPositionUpFormItem=t.onPositionUpFormItem.bind(et(t)),t.onPositionDownFormItem=t.onPositionDownFormItem.bind(et(t)),t.onAddOptionFormItem=t.onAddOptionFormItem.bind(et(t)),t.onReplaceFormItem=t.onReplaceFormItem.bind(et(t)),t.initHelpText=t.initHelpText.bind(et(t)),t.onUpdateOpt=t.onUpdateOpt.bind(et(t)),t.onSortEnd=t.onSortEnd.bind(et(t)),t.requestState=t.requestState.bind(et(t)),t.traverse=t.traverse.bind(et(t)),t.cleanStrings=t.cleanStrings.bind(et(t)),t.cleanFormItemsInState=t.cleanFormItemsInState.bind(et(t)),t.refPopup=o.a.createRef(),t.limitations={optionsByField:{max:15},fieldsByForm:{max:"FREE"!==window.__PLAN_SITE?20:10}},t}return t=s,(n=[{key:"exportData",value:function(){var e=[];for(var t in this.state.formItems){var n=this.state.formItems[t],r={label:n.label,required:n.required,name:n.name,helpText:n.helpText,placeholder:n.placeholder,className:n.className,options:n.options,multiple:n.multiple,type:n.type};e.push(r)}o=e,a=new FormData,Object.keys(o).forEach((function(e){return a.append(e,o[e])}));var o,a,i=this,l=this.state.bearer;p.a.post("http://form.wifeo.org/form/create",{items:e},{headers:{Authorization:l,"Content-Type":"application/json"}}).then((function(e){console.log(e),i.getFormulaires()})).catch((function(e){console.log(e)}))}},{key:"onAddressChange",value:function(e){var t="https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q="+encodeURI(e.target.value)+"&output=embed";this.setState({item:{src:t,address:e.target.value}}),this.props.onAction({action:"map_changed",params:this.state})}},{key:"postForm",value:function(e){var t=this,n=this.props,r=n.onSend,o=n.resourceId,a=n.idsChannels,i=a||[],l={data:e.formData,channels:i},s=(this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta;o&&(l.module_resource=o);var c={"Content-Type":"application/json"},u=localStorage.getItem("currentUser");u&&(c.Authorization="Bearer ".concat(u)),p.a.post(this.state.pathSave,l,{headers:c}).then((function(e){t.setState({pendingSend:!1,keyForm:t.state.keyForm+1,showSuccessMsg:!0,openedModal:!0},(function(){r(),!0===t.props.redirection&&(s.newOnglet?window.open("".concat(s.link),"_blank"):location.href=s.link)}))})).catch((function(e){console.log(e)}))}},{key:"doValidation",value:function(e){var t=this;this.setState({pendingSend:!0},(function(){t.postForm(e)}))}},{key:"fetchForm",value:function(){var e=this;p.a.get(this.state.pathGet+"?no_cache=1",{cancelToken:new yt((function(e){rt=e}))}).then((function(t){void 0!==JSON.parse(t.data.fields).schema&&F.a.unstable_batchedUpdates((function(){e.setState({isLoaded:!0,loadingFailed:!1,schema:JSON.parse(t.data.fields).schema,formItems:JSON.parse(t.data.fields).formItems,uiSchema:JSON.parse(t.data.fields).uiSchema})}))})).catch((function(t){e.setState({isLoaded:!0,loadingFailed:!0})}))}},{key:"componentDidMount",value:function(){var e=this;if(this.state.pathGet?this.props.integrated?this.props.staticForm?this.setState({isLoaded:!0,loadingFailed:!1,schema:this.props.staticForm.schema,formItems:this.props.staticForm.formItems,uiSchema:this.props.staticForm.uiSchema}):this.setState({loadingFailed:!0}):this.fetchForm():this.setState({loadingFailed:!0}),"view"===this.props.mode&&!this.props.externalCta){var t=this.state.cta;t&&(t.tpl="BtnBootstrapSubmit",t.onAction=function(t){e.refBtnSubmit.current&&e.refBtnSubmit.current.click()},at("https://www.google.com/recaptcha/api.js","js","recaptcha").then((function(){e.setState({cta:t})})))}}},{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){rt&&"function"==typeof rt&&rt()}},{key:"renderHiddenBtnSubmit",value:function(){return o.a.createElement("button",{ref:this.refBtnSubmit,type:"submit",className:"d-none"})}},{key:"renderBtnSubmit",value:function(e,t,n){var r=this.props,a=r.prefixCss,i=r.mode,l=r.onAction,s=this.state,c=s.cta,u=s.pendingSend;return n&&(c.class=c.class+" "+n),u?o.a.createElement("i",{className:"fas fa-spinner fa-pulse"}):o.a.createElement("div",{className:!1!==e?"mt-2":""},o.a.createElement(d.a,{prefixCss:a,mode:i,cta:c,style:t,onAction:l}))}},{key:"requestState",value:function(){var e=this.state,t=(e.schema,e.uiSchema,e.widgets,e.showErrorRecaptcha,e.loadingFailed),n=e.isLoaded;return o.a.createElement("div",null,n&&t&&o.a.createElement("div",{align:"center"},o.a.createElement("i",{className:"fa fa-times"}),o.a.createElement("span",null,"   Formulaire introuvable ou supprimé...")),t&&!n&&o.a.createElement("div",{align:"center"},o.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-fw"}),o.a.createElement("span",null,"  Chargement en cours...")))}},{key:"mepFull",value:function(e,t,n,r,i){var l=this.props,s=(l.mode,l.prefixCss),c=(l.onAction,l.btnAlign),u=this.state,p=(u.schema,u.uiSchema,u.widgets,u.showErrorRecaptcha,u.loadingFailed);return o.a.createElement("div",{key:"mepFull"},!e&&r&&this.renderMap(r),o.a.createElement(a.a,Ge({title:t},this.props),o.a.createElement("div",{className:bt(s,"row")},o.a.createElement("div",{className:bt(s,"col-12 col-md-12",e&&"order-2")},o.a.createElement("div",null,this.renderForm(),!p&&o.a.createElement("div",{className:"text-right"},o.a.createElement(O,{cta:i,btnAlign:c})),this.requestState())))),e&&this.renderMap(r))}},{key:"renderForm",value:function(){var e,t=this,n=this.props,r=n.ui,a=n.mode,i=this.state,s=i.schema,c=i.uiSchema,u=i.widgets,p=(i.showErrorRecaptcha,i.formItems),d=i.idFormEdit,m=(i.idForm,i.popoverIsOpen),f=(i.showSuccessMsg,i.openedModal,i.cta,i.isLoaded,i.loadingFailed),h=this.onAddFormItem,y=this.onDeleteFormItem,b=(this.exportData,this.onPositionUpFormItem),v=this.onPositionDownFormItem,g=this.onAddOptionFormItem,w=this.onReplaceFormItem,x=this.onUpdateField,E=this.initHelpText,S=this.onUpdateOpt;return"edit"===a&&!f&&o.a.createElement("div",{className:"wifeo-form-custom width-form-custom"},o.a.createElement("form",{className:"form-inline"},o.a.createElement(wt,{axis:"xy",useDragHandle:!0,distance:0,onSortEnd:this.onSortEnd},o.a.createElement("div",{className:"we-w-100"},p.map((function(e,t){return o.a.createElement(xt,{key:"form-edit-".concat(d,"-ctrl-sortable-").concat(t),index:t,sortIndex:t},o.a.createElement("div",{className:"we-w-100 we-text-center we-mb-3",key:"form-edit-".concat(d,"-ctrl-").concat(t)},o.a.createElement(Be,{item:e,formItems:p,index:t,onDelete:y,onAddOption:g,onPositionDown:v,onPositionUp:b,onReplace:w,onUpdateField:x,initHelpText:E,onUpdateOpt:S,data:vt,ui:r})))}))))),o.a.createElement("div",{className:"we-text-center we-my-5"},o.a.createElement(ot,{ref:this.refPopup,open:m,contentStyle:{color:"initial",width:"230px",zIndex:"1015"},overlayStyle:{zIndex:"1"},trigger:o.a.createElement("button",{className:"we-btn we-btn-secondary we-btn-sm"},o.a.createElement("i",{className:"fas fa-plus-circle"})," Ajouter un élément"),position:["bottom center","top center","left center","right center"],mouseLeaveDelay:250,closeOnDocumentClick:!0,onClose:function(){return t.togglePopover(!1)},onOpen:function(){return t.togglePopover(!0)}},o.a.createElement("div",{className:"we-text-left"},o.a.createElement(V,{inputs:vt,form:p,onAddFormItem:h})))))||!f&&o.a.createElement(l.a,{schema:s,onError:(e="errors",console.log.bind(console,e)),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0,uiSchema:c,widgets:u,FieldTemplate:function(e){return o.a.createElement(kt,Ge({useOnlyUiTitle:t.props.useOnlyUiTitle},e))}},this.renderHiddenBtnSubmit())}},{key:"mepOnlyMap",value:function(e,t){var n={},r="mx-auto",i=Ke({},this.props);return this.props.ui.mapFullWdithScreen&&(n={marginLeft:"-15px",marginRight:"-15px"},i.containerCss="container-fluid",r=""),o.a.createElement(a.a,Ge({key:"mepOnlyMap",title:e},i),o.a.createElement("div",{className:r,style:n},this.renderMap(t,null,{minHeight:"500px",border:"0px",width:"100%"})))}},{key:"initFormItems",value:function(e){var t=[];return this.props.addEmail?e.find((function(e){return"Email"===e.name}))||(t=[].concat(ze(e),[{type:"email",labelMenu:"Email",label:"Email",className:"form-control",name:"Email",required:!0,placeholder:"email@example.com",helpText:"",minLength:1,maxLength:75}])):t=ze(e),t}},{key:"onAddFormItem",value:function(e){var t=e;if(t.name=t.type+"_"+Object(C.a)(),this.state.formItems.length>=this.limitations.fieldsByForm.max)alert("Vous ne pouvez pas ajouter plus d'élément pour ce formulaire");else{var n=[].concat(ze(this.state.formItems),[t]);this.setState({formItems:n,popoverIsOpen:!1,idForm:this.state.idForm+1})}}},{key:"onReplaceFormItem",value:function(e,t){var n=Object.assign({},e);n.name=n.type+"_"+Object(C.a)();var r=ze(this.state.formItems),o=r.findIndex((function(e){return e.name==t.name}));r[o]=n,this.setState({formItems:r,popoverIsOpen:!1,idForm:this.state.idForm+1})}},{key:"onUpdateField",value:function(e,t){var n=this.state,r=n.idForm,o=n.idFormEdit,a=ze(this.state.formItems),i=a.findIndex((function(t){return t.name==e.name})),l=a[i];a[i]=e;var s=e.label!==l.label,c=e.placeholder!==l.placeholder,u=e.helpText&&e.helpText!==l.helpText;s||c||u?this.setState({formItems:a,idForm:r+1},(function(){"function"==typeof t&&t()})):this.setState({formItems:a,idForm:r+1,idFormEdit:o+1},(function(){"function"==typeof t&&t()}))}},{key:"initHelpText",value:function(e){var t=this;if(!e.helpText){var n=Ke({},e);n.helpText="Texte d'aide",this.onUpdateField(n,(function(){t.setState({idForm:t.state.idForm+1,idFormEdit:t.state.idFormEdit+1})}))}}},{key:"onDeleteFormItem",value:function(e){var t=ze(this.state.formItems);for(var n in t)t[n].name===e&&t.splice(n,1);this.setState({formItems:t,idForm:this.state.idForm+1})}},{key:"onAddOptionFormItem",value:function(e,t){var n=ze(this.state.formItems),r=n.findIndex((function(t){return t.name==e.name})),o=Ke({},e);o.options.length>=this.limitations.optionsByField.max?alert("Vous ne pouvez pas ajouter plus d'élément pour ce champ"):(o.options.push({label:"Option sans titre",value:"option_"+Object(C.a)()}),n[r]=e,this.setState({formItems:n,idForm:this.state.idForm+1,idFormEdit:this.state.idFormEdit+1}))}},{key:"onPositionDownFormItem",value:function(e,t){var n=oe(ze(this.state.formItems),e,1,"name");this.setState({formItems:n,idForm:this.state.idForm+1})}},{key:"onPositionUpFormItem",value:function(e,t){var n=oe(ze(this.state.formItems),e,-1,"name");this.setState({formItems:n,idForm:this.state.idForm+1})}},{key:"cleanStrings",value:function(e){return"string"==typeof e?e.replace(/["]+/g,"'"):""}},{key:"getEnumFieldRJSF",value:function(e){var t=this;if(["radio","select"].indexOf(e.type)>=0)return e.options.map((function(e){return t.cleanStrings(e.label)}))}},{key:"getEnumCheckboxFieldRJSF",value:function(e){var t=this;return e.options.map((function(e){return t.cleanStrings(e.label)}))}},{key:"getTypeFieldRJSF",value:function(e){return{checkbox:"Case à cocher"===e.labelMenu?"boolean":"array",number:"number"}[e.type]||"string"}},{key:"getWidgetFieldRJSF",value:function(e){return{email:"email",date:"date",number:"updown",radio:"radio",checkbox:"Case à cocher"===e.labelMenu?"checkbox":"checkboxes",select:"select",text:"text",textarea:"textarea"}[e.type]||"text"}},{key:"buildSchema",value:function(){var e=this,t=this.props.ui,n={title:"",description:"",type:"object"},r=this.state.formItems,o={},a=[];return r.forEach((function(n){o[n.name]={},o[n.name].minLength=n.minLength,o[n.name].maxLength=n.maxLength;var r=null;if(n.options){var i=n.options.find((function(e){return!0===e.selected}));r=i&&i.label||void 0}r=e.cleanStrings(r),o[n.name].type=e.getTypeFieldRJSF(n),o[n.name].enum=e.getEnumFieldRJSF(n),o[n.name].title=e.cleanStrings(t.label&&n.label||""),"checkbox"===n.type&&("Case à cocher"===n.labelMenu?o[n.name].title=e.cleanStrings(n.options[0].label):(o[n.name].uniqueItems=!0,o[n.name].items={type:"string",enum:e.getEnumCheckboxFieldRJSF(n)})),"select"===n.type&&(o[n.name].default=r),"radio"===n.type&&(o[n.name].default=r),"number"===n.type&&(o[n.name].minimum=0),n.required&&a.push(n.name)})),n.properties=o,n.required=a,n}},{key:"onUpdateOpt",value:function(e,t,n){e.opt;var r=e.options,o=ze(this.state.formItems),a=o.findIndex((function(e){return e.name==r.name}));o[a]=r,"handleChangeLabel"===n?this.setState({formItems:o}):this.setState({formItems:o,idForm:this.state.idForm+1,idFormEdit:this.state.idFormEdit+1})}},{key:"buildUiSchema",value:function(){var e=this,t=this.props.ui,n={Message:{"ui:widget":"textarea"}},r=[];return this.state.formItems.forEach((function(o){n[o.name]={"ui:widget":e.getWidgetFieldRJSF(o),"ui:placeholder":e.cleanStrings(o.placeholder),"ui:help":e.cleanStrings(o.helpText),"ui:title":e.cleanStrings(t.label&&o.label||"")},r.push(o.name)})),r.push("*"),n["ui:order"]=r,n.testCheckbox={"ui:widget":"radio"},n}},{key:"togglePopover",value:function(e){var t="boolean"==typeof e?e:!this.state.popoverIsOpen;this.setState({popoverIsOpen:t})}},{key:"mepStack",value:function(e,t,n,r,i){var l=this.props,s=(l.mode,l.prefixCss),c=(l.onAction,l.ui),u=this.state,p=(u.schema,u.uiSchema,u.widgets,u.showErrorRecaptcha,u.loadingFailed),d=(u.isLoaded,r&&r.src&&c.map);return o.a.createElement(a.a,Ge({key:"mepStack",title:t},this.props),o.a.createElement("div",{className:bt(s,"row")},o.a.createElement("div",{className:bt(s,"col-12","col-md-6",!d&&"mx-auto",e&&"order-2")},o.a.createElement("div",null,this.renderForm(),!p&&o.a.createElement(O,Ge({cta:i},this.props)),this.requestState())),d&&o.a.createElement("div",{className:bt(s,"col-12 col-md-6",e&&"order-1")},this.renderMap(r))))}},{key:"integratedMep",value:function(e,t,n,r,a){var i=this.props,l=(i.mode,i.prefixCss),s=(i.onAction,i.ui),c=this.state,u=(c.schema,c.uiSchema,c.widgets,c.showErrorRecaptcha,c.loadingFailed),p=(c.isLoaded,r&&r.src&&s.map);return o.a.createElement("div",{className:bt(l,"row")},o.a.createElement("div",{className:bt(l,"col-12","col-md-6",!p&&"mx-auto",e&&"order-2")},o.a.createElement("div",null,this.renderForm(),!u&&o.a.createElement(O,Ge({cta:a},this.props)),this.requestState())))}},{key:"cleanFormItemsInState",value:function(){var e=this,t=Ke({},this.state),n=[];return this.state.formItems.forEach((function(t){var r=t;if(r.label=e.cleanStrings(t.label),r.helpText=e.cleanStrings(t.helpText),r.placeholder=e.cleanStrings(t.placeholder),void 0!==t.options){var o=[];t.options.forEach((function(t){var n=t;n.label=e.cleanStrings(t.label),n.value=e.cleanStrings(t.value),o.push(n)})),r.options=o}n.push(r)})),t.formItems=n,t}},{key:"traverse",value:function(e){var t=this;if(null!==e&&"object"==Xe(e))return Object.entries(e).forEach((function(e){var n=Ve(e,2),r=(n[0],n[1]);t.traverse(r)})),e}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null},r=this.state.cta;if(n&&r&&n.cta.link!==r.link){var o=r;o.link=n.cta.link,this.setState({cta:o})}this.sendUpdate()}},{key:"render",value:function(){var e=this.props,t=e.mep,n=e.blocks,r=(e.prefixCss,e.mode),a=(e.onAction,e.ui),i=(e.onSend,this.state),l=i.mepRender,s=i.item,c=i.showSuccessMsg,u=i.openedModal,p=(n.find((function(e){return"title"===e.name}))||{title:null}).title,d=(n.find((function(e){return"description"===e.name}))||{description:null}).description,m=(n.find((function(e){return"cta"===e.name}))||{cta:null}).cta,f=(n.find((function(e){return"msgSuccess"===e.name}))||{msgSuccess:{txt:'<p style="text-align:center;">Votre message a bien été envoyé. Nous y répondrons dès que possible.</p>'}}).msgSuccess;return this.props.integrated?[this.integratedMep(!1,p,d,s,m),o.a.createElement("div",{className:c?"":"d-none",key:"success-msg"},o.a.createElement(ot,{contentStyle:{color:"initial",margin:"5rem auto auto auto",background:"none",padding:0,border:0},open:u,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header border-0 pb-0"},o.a.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{className:"modal-body pt-0"},o.a.createElement("div",null,"edit"===r&&o.a.createElement("div",{"data-name-block":"block-success-msg",style:{display:"inline-flex",width:"100%"}}),"view"===r&&o.a.createElement("div",{dangerouslySetInnerHTML:{__html:f.txt}}))))))]:[l[t]&&l[t](p,d,a.map&&s,m)||l["stack-reverse"](p,d,a.map&&s,m),o.a.createElement("div",{className:c?"":"d-none",key:"success-msg"},o.a.createElement(ot,{contentStyle:{color:"initial",margin:"5rem auto auto auto",background:"none",padding:0,border:0},open:u,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header border-0 pb-0"},o.a.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{className:"modal-body pt-0"},o.a.createElement("div",null,"edit"===r&&o.a.createElement("div",{"data-name-block":"block-success-msg",style:{display:"inline-flex",width:"100%"}}),"view"===r&&o.a.createElement("div",{dangerouslySetInnerHTML:{__html:f.txt}}))))))]}}])&&$e(t.prototype,n),r&&$e(t,r),s}(r.Component));St.defaultProps={integrated:!1,formItems:[],useOnlyUiTitle:!0,autoAddUi:!0,resourceId:null,addEmail:!0,uiSchema:{Message:{"ui:widget":"textarea"}},url:null,urlSave:null,ui:{label:!0,map:!0,mapFullWdithScreen:!1},schema:{title:"",description:"",type:"object",required:["Email","Message","Nom","Note"],properties:{Nom:{type:"string",title:"Nom",minLength:2},Email:{type:"string",format:"email",title:"Email"},Note:{type:"number",enum:[1,2,3,4,5],title:"Note"},Message:{type:"string",title:"Message",minLength:8}}},onCloseModal:function(){},onAction:function(){},prefixCss:"",mep:"stack-reverse",mode:"view",sectionCss:"",containerCss:"container",bg:{class:"bg-white",img:{path:"https://images.unsplash.com/photo-1509624776920-0fac24a9dfda?ixlib=rb-0.3.5&s=dd42a6d…&auto=format&fit=crop&w=1350&q=80",class:"img-fluid"}},redirection:!1,blocks:[{name:"cta",cta:{txt:"Nous contacter",css:"",class:"btn-primary",link:"/faire-un-site-gratuitement.php",tpl:"BtnBootstrap",visible:!0,icon:{active:!0,css:"far fa-envelope"}}},{name:"title",title:{txt:"<h1>Demande d'informations</h1>",class:"",visible:!1}},{name:"description",description:{txt:"Pour toutes vos questions, veuillez remplir le formulaire ci-dessous"}},{name:"media",item:{src:"https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q=paris&output=embed",address:"paris",tpl:"iframe",visible:!1}}],btnAlign:"center",onSend:function(){}};var kt=function(e){var t=e.id,n=e.classNames,r=e.label,a=e.help,i=e.required,l=e.rawErrors,s=e.description,c=(e.errors,e.children),u=e.displayLabel,p=e.hidden,d=e.useOnlyUiTitle?e.uiSchema["ui:title"]:r;return o.a.createElement("div",{className:n+" "},u&&!p&&o.a.createElement("label",{className:"control-label font-weight-bold",htmlFor:t},d,d&&i?"*":null),s,c,l&&l.length>0&&o.a.createElement(Ot,{errors:l}),o.a.createElement("small",{className:"form-text text-muted"}," ",a))},Ot=function(e){var t=e.errors;return o.a.createElement("ul",{className:"list-unstyled mt-2"},t.map((function(e,t){return o.a.createElement("li",{key:t,className:"text-danger"}," ",o.a.createElement(Ft,{msg:e})," ")})))},Ct=function(e){return o.a.createElement(S.a,{key:"captcha",sitekey:"6LcAZCkUAAAAAJ2XQcVz6M2qgiwypmqhT501lFvv",render:"explicit",hl:"fr",verifyCallback:function(t){(0,e.onChange)(t)},expiredCallback:function(t){(0,e.onChange)(t)}})},Pt={"is a required property":"Veuillez remplir ce champ",'should match format "email"':"Email non valide","should NOT be shorter than _X_ characters":"Veuillez allonger ce texte pour qu'il comporte au moins _X_ caractères","should NOT be longer than _X_ characters":"Veuillez réduire ce texte à _X_ caractères maximun"},Ft=function(e){var t=e.msg,n=t,r=n.match(/\d+/),o=0;return r&&(n=n.replace(r[0],"_X_"),o=r[0]),Pt[n]?Pt[n].replace("_X_",o):t},It=t.default=St},959:function(e,t,n){var r;e.exports=(r=n(0),function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6),i=r(a),l=r(n(4)),s={className:l.default.string,onloadCallbackName:l.default.string,elementID:l.default.string,onloadCallback:l.default.func,verifyCallback:l.default.func,expiredCallback:l.default.func,render:l.default.oneOf(["onload","explicit"]),sitekey:l.default.string,theme:l.default.oneOf(["light","dark"]),type:l.default.string,verifyCallbackName:l.default.string,expiredCallbackName:l.default.string,size:l.default.oneOf(["invisible","compact","normal"]),tabindex:l.default.string,hl:l.default.string,badge:l.default.oneOf(["bottomright","bottomleft","inline"])},c=function(){return"undefined"!=typeof window&&void 0!==window.grecaptcha&&"function"==typeof window.grecaptcha.render},u=void 0,p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._renderGrecaptcha=n._renderGrecaptcha.bind(n),n.reset=n.reset.bind(n),n.state={ready:c(),widget:null},n.state.ready||"undefined"==typeof window||(u=setInterval(n._updateReadyState.bind(n),1e3)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.state.ready&&this._renderGrecaptcha()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.render,o=n.onloadCallback;"explicit"===r&&o&&this.state.ready&&!t.ready&&this._renderGrecaptcha()}},{key:"componentWillUnmount",value:function(){clearInterval(u)}},{key:"reset",value:function(){var e=this.state,t=e.ready,n=e.widget;t&&null!==n&&grecaptcha.reset(n)}},{key:"execute",value:function(){var e=this.state,t=e.ready,n=e.widget;t&&null!==n&&grecaptcha.execute(n)}},{key:"_updateReadyState",value:function(){c()&&(this.setState({ready:!0}),clearInterval(u))}},{key:"_renderGrecaptcha",value:function(){this.state.widget=grecaptcha.render(this.props.elementID,{sitekey:this.props.sitekey,callback:this.props.verifyCallback?this.props.verifyCallback:void 0,theme:this.props.theme,type:this.props.type,size:this.props.size,tabindex:this.props.tabindex,hl:this.props.hl,badge:this.props.badge,"expired-callback":this.props.expiredCallback?this.props.expiredCallback:void 0}),this.props.onloadCallback&&this.props.onloadCallback()}},{key:"render",value:function(){return"explicit"===this.props.render&&this.props.onloadCallback?i.default.createElement("div",{id:this.props.elementID,"data-onloadcallbackname":this.props.onloadCallbackName,"data-verifycallbackname":this.props.verifyCallbackName}):i.default.createElement("div",{id:this.props.elementID,className:this.props.className,"data-sitekey":this.props.sitekey,"data-theme":this.props.theme,"data-type":this.props.type,"data-size":this.props.size,"data-badge":this.props.badge,"data-tabindex":this.props.tabindex})}}]),t}(a.Component);t.default=p,p.propTypes=s,p.defaultProps={elementID:"g-recaptcha",className:"g-recaptcha",onloadCallback:void 0,onloadCallbackName:"onloadCallback",verifyCallback:void 0,verifyCallbackName:"verifyCallback",expiredCallback:void 0,expiredCallbackName:"expiredCallback",render:"onload",theme:"light",type:"image",size:"normal",tabindex:"0",hl:"en",badge:"bottomright"},e.exports=t.default},function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,a,i,l,s){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,a,i,l,s],p=0;(c=new Error(t.replace(/%s/g,(function(){return u[p++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";var r=n(1),o=n(2),a=n(5);e.exports=function(){function e(e,t,n,r,i,l){l!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){e.exports=n(3)()},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=r}]))}}]);